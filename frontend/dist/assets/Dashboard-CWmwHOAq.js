const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TunnetSectionFixed-F4xlaDYN.js","assets/index-DsBGyFQG.js","assets/router-DUq0sin2.js","assets/vendor-Bzgz95E1.js","assets/icons-B5_qnxFz.js","assets/index-iASDrYPB.css","assets/api-Bqs0zQX7.js","assets/utils-B9HHbEsj.js","assets/charts-DdKZH6bc.js","assets/payments-animations-DEMUWgxw.css","assets/PaymentsManagement-DR4L45Vb.js","assets/PropertiesSection-Dvz-9yfP.js","assets/AdminManagement-DwnrJ4F5.js","assets/ExpenseAnalytics-B9hwpW_U.js","assets/ExpenseAnalysis-CFah-QfF.js","assets/ApiDiagnostics-BT4cgiOf.js"])))=>i.map(i=>d[i]);
import{j as e,u as be,L as Y,_ as q}from"./index-DsBGyFQG.js";import{r as c}from"./router-DUq0sin2.js";import I from"./api-Bqs0zQX7.js";import{c as te,X as ve,d as Pe,e as Ee,f as Ke,g as Ae,B as oe,U as ie,C as je,D as Ne,h as le,S as ke,i as Je,j as pe,k as Xe,l as Ye,m as Ze,n as Qe,o as et,p as tt,q as st,W as at,r as Le,s as rt,t as nt,u as it,G as lt}from"./icons-B5_qnxFz.js";import{R as Ie,P as Te,a as Re,C as $e,T as Be,L as Fe}from"./charts-DdKZH6bc.js";const L=(i,t={})=>{const r={...{year:"numeric",month:"long",day:"numeric",timeZone:"Europe/Paris"},...t};try{return(typeof i=="string"?new Date(i):i).toLocaleDateString("fr-FR",r)}catch(a){return console.error("Error formatting date:",a),"Date invalide"}},ot=(i,t={})=>{const r={...{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"},...t};try{return(typeof i=="string"?new Date(i):i).toLocaleString("fr-FR",r)}catch(a){return console.error("Error formatting date and time:",a),"Date et heure invalides"}},fe=(i={})=>ot(new Date,i),ct=i=>{try{const t=typeof i=="string"?new Date(i):i,s=new Date;return s.setHours(0,0,0,0),t.setHours(0,0,0,0),t<s}catch(t){return console.error("Error checking if date is overdue:",t),!1}},dt=i=>{try{const t=typeof i=="string"?new Date(i):i,s=new Date;s.setHours(0,0,0,0),t.setHours(0,0,0,0);const r=t-s;return Math.ceil(r/(1e3*60*60*24))}catch(t){return console.error("Error calculating days until due:",t),0}},V=(i,t="EUR")=>{try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t}).format(i)}catch(s){return console.error("Error formatting currency:",s),`${i} ‚Ç¨`}},Oe=()=>"http://192.168.1.109:4002/api".replace("/api",""),mt=i=>{if(!i||typeof i!="string"||!i.trim())return console.warn("‚ö†Ô∏è Empty or invalid URL provided to normalizePhotoUrl:",i),"";const t=i.trim();if(t.startsWith("http://")||t.startsWith("https://"))return t;const s=Oe();if(t.startsWith("/uploads"))return`${s}${t}`;if(t.startsWith("uploads/"))return`${s}/${t}`;const r=t.startsWith("/")?t.substring(1):t;return`${s}/uploads/${r}`};class ut{cache;cacheTimeout;refreshInterval;isRefreshing;constructor(){this.cache=new Map,this.cacheTimeout=300*1e3,this.refreshInterval=null,this.isRefreshing=!1}isCacheValid(t){const s=this.cache.get(t);return s?Date.now()-s.timestamp<this.cacheTimeout:!1}getCachedData(t){const s=this.cache.get(t);return s?s.data:null}setCachedData(t,s){this.cache.set(t,{data:s,timestamp:Date.now()})}clearCache(){this.cache.clear()}startAutoRefresh(t=120*1e3){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval(()=>{this.refreshAllData()},t),console.log("üîÑ Auto-refresh started with interval:",t/1e3,"seconds")}stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("‚èπÔ∏è Auto-refresh stopped"))}async refreshAllData(){if(!this.isRefreshing){this.isRefreshing=!0,console.log("üîÑ Refreshing all data...");try{const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills(),this.fetchBillsStats(),this.fetchExpenses()]),s=["Properties","Tenants","Bills","Stats","Expenses"];t.forEach((r,a)=>{r.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${s[a]} refresh failed:`,r.reason)}),console.log("‚úÖ Data refresh completed")}catch(t){console.error("‚ùå Error refreshing data:",t)}finally{this.isRefreshing=!1}}}async fetchProperties(){const t="properties";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üè† Fetching properties with photos...");const s=await I.listProperties();if(s.data?.success&&s.data?.data?.properties){const r=await Promise.all(s.data.data.properties.map(async a=>{let o=[];try{const h=await I.getPropertyPhotos(a.id);h.data?.success&&h.data?.data?.photos&&(o=h.data.data.photos.map(g=>({...g,display_url:mt(g.file_url),created_at_fr:L(g.created_at),updated_at_fr:g.updated_at?L(g.updated_at):null})))}catch(h){console.warn(`‚ö†Ô∏è Could not fetch photos for property ${a.id}:`,h)}return{...a,photos:o,primary_photo:o.find(h=>h.is_primary)||o[0]||null,created_at_fr:L(a.created_at),updated_at_fr:a.updated_at?L(a.updated_at):null,rent_formatted:V(a.rent||a.monthly_rent||0),is_active:a.status==="ACTIVE",status_fr:a.status==="ACTIVE"?"Actif":"Inactif",display_title:a.title||a.name||"Propri√©t√© sans nom",display_address:this.formatAddress(a),photo_count:o.length,has_photos:o.length>0}}));return this.setCachedData(t,r),console.log("‚úÖ Properties fetched with photos:",r.length),r}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching properties:",s),s}}async fetchTenants(){const t="tenants";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üë• Fetching tenants...");const s=await I.listTenants();if(s.data?.success&&s.data?.data?.tenants){const r=s.data.data.tenants.map(a=>({...a,created_at_fr:L(a.created_at),updated_at_fr:a.updated_at?L(a.updated_at):null,move_in_date_fr:a.move_in_date?L(a.move_in_date):null,move_out_date_fr:a.move_out_date?L(a.move_out_date):null,rent_amount_formatted:a.rent_amount?V(a.rent_amount):null,is_active:a.status==="ACTIVE"||a.is_active===!0,status_fr:a.status==="ACTIVE"||a.is_active===!0?"Actif":"Inactif",display_name:a.fullName||a.full_name||a.name||"Locataire"}));return this.setCachedData(t,r),console.log("‚úÖ Tenants fetched:",r.length),r}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching tenants:",s),s}}async fetchBills(t={}){const s=`bills_${JSON.stringify(t)}`;if(this.isCacheValid(s))return this.getCachedData(s);try{console.log("üí≥ Fetching bills...");const r=await I.listBills(t);if(r.data?.success&&r.data?.data?.bills){const a=r.data.data.bills.map(o=>{const h=o.payment_date?new Date(o.payment_date):null,g=ct(o.due_date),d=dt(o.due_date);return{...o,created_at_fr:L(o.created_at),due_date_fr:L(o.due_date),payment_date_fr:h?L(h):null,amount_formatted:V(o.amount||o.total_amount||0),rent_amount_formatted:o.rent_amount?V(o.rent_amount):null,charges_formatted:o.charges?V(o.charges):null,total_amount_formatted:V(o.total_amount||o.amount||0),is_overdue:g,days_until_due:d,status_fr:this.getBillStatusFrench(o.status),priority:this.getBillPriority(o.status,g,d),tenant_display_name:o.tenant?.name||o.tenant?.fullName||"Locataire",property_display_name:o.property?.title||o.property?.name||"Propri√©t√©"}});return this.setCachedData(s,a),console.log("‚úÖ Bills fetched:",a.length),a}throw new Error("Invalid response structure")}catch(r){throw console.error("‚ùå Error fetching bills:",r),r}}async fetchBillsStats(){const t="bills_stats";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üìä Fetching bills statistics...");const s=await I.getBillsStats();if(s.data?.success&&s.data?.data){const r=s.data.data,a={...r,totalAmount_formatted:V(r.totalAmount||0),paidAmount_formatted:V(r.paidAmount||0),pendingAmount_formatted:V(r.pendingAmount||0),overdueAmount_formatted:V(r.overdueAmount||0),totalBills_fr:`${r.totalBills||0} facture${(r.totalBills||0)>1?"s":""}`,paidBills_fr:`${r.paidBills||0} facture${(r.paidBills||0)>1?"s":""} pay√©e${(r.paidBills||0)>1?"s":""}`,pendingBills_fr:`${r.pendingBills||0} facture${(r.pendingBills||0)>1?"s":""} en attente`,overdueBills_fr:`${r.overdueBills||0} facture${(r.overdueBills||0)>1?"s":""} en retard`,last_updated:fe(),last_updated_timestamp:new Date().toISOString()};return this.setCachedData(t,a),console.log("‚úÖ Bills statistics fetched"),a}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching bills statistics:",s),s}}async fetchExpenses(){const t="expenses";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üí∞ Fetching expenses...");const s=await I.listExpenses();if(s.data?.success&&s.data?.data?.expenses){const r=s.data.data.expenses.map(a=>({...a,created_at_fr:L(a.created_at),date_fr:a.date?L(a.date):null,amount_formatted:V(a.amount||0),category_fr:this.getExpenseCategoryFrench(a.category),status_fr:a.status==="APPROVED"?"Approuv√©":"En attente"}));return this.setCachedData(t,r),console.log("‚úÖ Expenses fetched:",r.length),r}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching expenses:",s),s}}getBillStatusFrench(t){return{PENDING:"En attente",PAID:"Pay√©",OVERDUE:"En retard",RECEIPT_SENT:"Re√ßu envoy√©",CANCELLED:"Annul√©"}[t]||t}getBillPriority(t,s,r){return t==="PAID"?"low":s?"critical":r<=3?"high":r<=7?"medium":"low"}getExpenseCategoryFrench(t){return{MAINTENANCE:"Maintenance",REPAIRS:"R√©parations",UTILITIES:"Services publics",INSURANCE:"Assurance",TAXES:"Taxes",ADMINISTRATIVE:"Administratif",OTHER:"Autre"}[t]||t}async getDashboardSummary(){try{console.log("üìä Fetching dashboard summary...");const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills({limit:10}),this.fetchBillsStats(),this.fetchExpenses()]),s=t[0].status==="fulfilled"?t[0].value:[],r=t[1].status==="fulfilled"?t[1].value:[],a=t[2].status==="fulfilled"?t[2].value:[],o=t[3].status==="fulfilled"?t[3].value:{totalBills:0,totalAmount:0,pendingBills:0,overdueBills:0,statusBreakdown:[]},h=t[4].status==="fulfilled"?t[4].value:[];t.forEach((d,u)=>{d.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${["Properties","Tenants","Bills","Stats","Expenses"][u]} API failed:`,d.reason)});const g={properties:{total:s.length,active:s.filter(d=>d.is_active).length,data:s},tenants:{total:r.length,active:r.filter(d=>d.is_active||d.status==="ACTIVE").length,data:r},bills:{total:a.length,pending:a.filter(d=>d.status==="PENDING").length,overdue:a.filter(d=>d.is_overdue||d.status==="OVERDUE").length,paid:a.filter(d=>d.status==="PAID").length,data:a},stats:o,expenses:{total:h.length,data:h},last_updated:fe(),last_updated_timestamp:new Date().toISOString()};return console.log("‚úÖ Dashboard summary fetched"),g}catch(t){throw console.error("‚ùå Error fetching dashboard summary:",t),t}}getNewBillDefaults(){return{tenant_id:0,property_id:0,amount:0,month:new Date().toISOString().slice(0,7),due_date:new Date(Date.now()+720*60*60*1e3).toISOString(),description:"Paiement de loyer mensuel",status:"PENDING"}}getBackendBaseUrl(){return Oe()}formatAddress(t){const s=[];return t.address&&s.push(t.address),t.city&&s.push(t.city),t.postal_code&&s.push(t.postal_code),s.join(", ")||"Adresse non sp√©cifi√©e"}getSystemStatus(){return{cache_size:this.cache.size,is_auto_refresh_active:!!this.refreshInterval,is_refreshing:this.isRefreshing,current_time:fe(),timezone:"Europe/Paris",backend_base_url:this.getBackendBaseUrl()}}}const ye=new ut,K=({icon:i,title:t,description:s,onClick:r,color:a,delay:o=0,className:h=""})=>{const[g,d]=c.useState([]),u=c.useRef(null),N=w=>{const S=u.current?.getBoundingClientRect();if(S){const R=w.clientX-S.left,$=w.clientY-S.top,v={id:Date.now(),x:R,y:$};d(E=>[...E,v]),setTimeout(()=>{d(E=>E.filter(O=>O.id!==v.id))},600)}r()},n=(w=>{const S={blue:{bg:"bg-blue-50",hover:"hover:bg-blue-100",icon:"text-blue-600",text:"text-blue-800",gradient:"gradient-bg-blue"},green:{bg:"bg-green-50",hover:"hover:bg-green-100",icon:"text-green-600",text:"text-green-800",gradient:"gradient-bg-green"},purple:{bg:"bg-purple-50",hover:"hover:bg-purple-100",icon:"text-purple-600",text:"text-purple-800",gradient:"gradient-bg-purple"},orange:{bg:"bg-orange-50",hover:"hover:bg-orange-100",icon:"text-orange-600",text:"text-orange-800",gradient:"gradient-bg-orange"},indigo:{bg:"bg-indigo-50",hover:"hover:bg-indigo-100",icon:"text-indigo-600",text:"text-indigo-800",gradient:"gradient-bg-blue"},teal:{bg:"bg-teal-50",hover:"hover:bg-teal-100",icon:"text-teal-600",text:"text-teal-800",gradient:"gradient-bg-green"},pink:{bg:"bg-pink-50",hover:"hover:bg-pink-100",icon:"text-pink-600",text:"text-pink-800",gradient:"gradient-bg-purple"}};return S[w]||S.blue})(a);return e.jsxs("button",{ref:u,onClick:N,className:`
        professional-card
        relative
        p-6
        ${n.bg}
        ${n.hover}
        rounded-xl
        text-center
        group
        overflow-hidden
        border
        border-gray-200
        hover:border-gray-300
        focus:outline-none
        focus:ring-2
        focus:ring-blue-500
        focus:ring-offset-2
        transition-all
        duration-300
        ease-out
        ${h}
      `,style:{animationDelay:`${o}ms`,animation:"textSlideUp 0.5s ease-out forwards"},title:s,children:[g.map(w=>e.jsx("span",{className:"ripple",style:{left:w.x-10,top:w.y-10,width:20,height:20}},w.id)),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:`
          professional-card-icon
          w-16
          h-16
          mx-auto
          rounded-full
          flex
          items-center
          justify-center
          ${n.gradient}
          shadow-lg
          group-hover:shadow-xl
          transition-all
          duration-300
        `,children:e.jsx(i,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:`
          absolute
          inset-0
          w-16
          h-16
          mx-auto
          rounded-full
          ${n.gradient}
          opacity-0
          group-hover:opacity-20
          blur-xl
          transition-opacity
          duration-300
        `})]}),e.jsx("h3",{className:`
        text-lg
        font-semibold
        ${n.text}
        mb-2
        group-hover:text-gray-900
        transition-colors
        duration-300
      `,children:t}),e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors duration-300",children:s}),e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-white/20 transition-colors duration-300"})]})},gt=()=>{const[i,t]=c.useState([]),[s,r]=c.useState(!1),[a,o]=c.useState(!0),[h,g]=c.useState(0),[d,u]=c.useState("default"),[N,b]=c.useState(new Set);c.useEffect(()=>{"Notification"in window&&(u(Notification.permission),Notification.permission==="default"&&Notification.requestPermission().then(l=>{u(l),l==="granted"&&console.log("‚úÖ Notifications push activ√©es")}))},[]),c.useEffect(()=>{n();const l=setInterval(n,120*1e3);return()=>clearInterval(l)},[]);const n=async()=>{try{o(!0);const[l,f]=await Promise.all([I.listBills({limit:100}),I.listTenants()]),C=l?.data?.data?.bills||[],_=f?.data?.data||[],T=[],A=new Date;A.setHours(0,0,0,0),C.filter(x=>{if(x.status==="PAID"||!x.due_date)return!1;const D=new Date(x.due_date);return D.setHours(0,0,0,0),D<A}).forEach(x=>{const D=new Date(x.due_date),p=Math.floor((A.getTime()-D.getTime())/(1e3*60*60*24)),j=x.total_amount||x.amount||0;let B="medium";p>30||j>1e3?B="high":p>7||j>500?B="medium":B="low",T.push({id:`overdue-${x.id}`,type:"overdue",title:p>30?"‚ö†Ô∏è Facture Tr√®s en Retard":"Facture en Retard",message:`Facture de ‚Ç¨${j.toFixed(2)} pour ${x.tenant?.name||"Locataire"} - ${p} jour(s) de retard`,action:{section:"payments",id:x.id},timestamp:D,read:!1,priority:B,category:"bills",amount:j,daysOverdue:p})}),C.filter(x=>{if(x.status==="PAID"||!x.due_date)return!1;const D=new Date(x.due_date);D.setHours(0,0,0,0);const p=Math.floor((D.getTime()-A.getTime())/(1e3*60*60*24));return p>=0&&p<=3}).forEach(x=>{const D=new Date(x.due_date),p=Math.floor((D.getTime()-A.getTime())/(1e3*60*60*24)),j=x.total_amount||x.amount||0,B=p===0?"high":p===1?"medium":"low";T.push({id:`upcoming-${x.id}`,type:"upcoming",title:p===0?"üî¥ √âch√©ance Aujourd'hui":p===1?"‚ö†Ô∏è √âch√©ance Demain":"√âch√©ance Proche",message:`Facture de ‚Ç¨${j.toFixed(2)} pour ${x.tenant?.name||"Locataire"} - ${p===0?"Aujourd'hui":`Dans ${p} jour(s)`}`,action:{section:"payments",id:x.id},timestamp:D,read:!1,priority:B,category:"bills",amount:j,daysUntilDue:p})}),_.forEach(x=>{const D=x.lease_end||x.lease_end_date;if(D){const p=new Date(D);p.setHours(0,0,0,0);const j=Math.floor((p.getTime()-A.getTime())/(1e3*60*60*24));if(j>=0&&j<=30){const B=j<=7?"high":j<=15?"medium":"low";T.push({id:`lease-expiry-${x.id}`,type:j<=7?"upcoming":"info",title:j===0?"üî¥ Contrat Expire Aujourd'hui":j<=7?"‚ö†Ô∏è Contrat Expire Bient√¥t":"Contrat qui Expire",message:`Le contrat de ${x.name||x.fullName||"Locataire"} expire ${j===0?"aujourd'hui":`dans ${j} jour(s)`}`,action:{section:"tunnet",id:x.id},timestamp:p,read:!1,priority:B,category:"leases",daysUntilDue:j})}}});const F={high:3,medium:2,low:1};T.sort((x,D)=>{const p=F[x.priority||"low"],j=F[D.priority||"low"];return p!==j?j-p:D.timestamp.getTime()-x.timestamp.getTime()});const H=new Set(T.map(x=>x.id)),G=T.filter(x=>!N.has(x.id));if(b(H),d==="granted"&&G.length>0){const x=G.filter(p=>p.priority==="high"),D=G.filter(p=>p.priority==="medium"&&(p.type==="overdue"||p.daysUntilDue===0));if(x.forEach(p=>{E(p)}),D.length>0&&D.slice(0,3).forEach(p=>{E(p)}),G.length>5){const p=G.filter(B=>B.type==="overdue").length,j=G.filter(B=>B.type==="upcoming").length;(p>0||j>0)&&setTimeout(()=>{E({id:"summary",type:"info",title:"R√©sum√© des Notifications",message:`${p>0?`${p} facture(s) en retard. `:""}${j>0?`${j} √©ch√©ance(s) proche(s).`:""}`,timestamp:new Date,read:!1,priority:"medium",category:"system"})},2e3)}}t(T),g(T.filter(x=>!x.read).length)}catch(l){console.error("Error fetching notifications:",l)}finally{o(!1)}},w=l=>{t(f=>{const C=f.map(_=>_.id===l?{..._,read:!0}:_);return g(C.filter(_=>!_.read).length),C})},S=()=>{t(l=>l.map(f=>({...f,read:!0}))),g(0)},R=l=>{if(w(l.id),l.action){const f=new CustomEvent("navigate-to-section",{detail:{section:l.action.section,billId:l.action.id,tenantId:l.action.id}});window.dispatchEvent(f),r(!1)}},$=l=>{switch(l){case"overdue":return e.jsx(Ee,{className:"w-5 h-5 text-red-600"});case"upcoming":return e.jsx(Ke,{className:"w-5 h-5 text-yellow-600"});case"info":return e.jsx(Ee,{className:"w-5 h-5 text-blue-600"});case"success":return e.jsx(Pe,{className:"w-5 h-5 text-green-600"});default:return e.jsx(te,{className:"w-5 h-5 text-gray-600"})}},v=l=>{const C=new Date().getTime()-l.getTime(),_=Math.floor(C/(1e3*60*60*24));return _===0?"Aujourd'hui":_===1?"Hier":_<7?`Il y a ${_} jours`:l.toLocaleDateString("fr-FR")},E=l=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const f=l.type==="overdue"?"/icon-error.png":l.type==="upcoming"?"/icon-warning.png":"/icon-info.png",C={body:l.message,icon:f,badge:"/icon-badge.png",tag:l.id,requireInteraction:l.type==="overdue",silent:!1,data:{notificationId:l.id,section:l.action?.section,id:l.action?.id}},_=new Notification(l.title,C);_.onclick=()=>{if(window.focus(),l.action){const T=new CustomEvent("navigate-to-section",{detail:{section:l.action.section,billId:l.action.id,tenantId:l.action.id}});window.dispatchEvent(T)}_.close()},l.type!=="overdue"&&setTimeout(()=>{_.close()},5e3)},O=async()=>{if(!("Notification"in window)){alert("Votre navigateur ne supporte pas les notifications");return}const l=await Notification.requestPermission();u(l),l==="granted"&&new Notification("Notifications activ√©es",{body:"Vous recevrez des alertes pour les factures en retard et les √©ch√©ances importantes.",icon:"/icon-success.png"})};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!s),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Notifications",children:[e.jsx(te,{className:"w-6 h-6"}),h>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:h>9?"9+":h})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[600px] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),h>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-medium rounded-full",children:h})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),r(!1)},className:"text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100","aria-label":"Fermer",children:e.jsx(ve,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-200",children:[h>0&&e.jsx("button",{onClick:l=>{l.stopPropagation(),S()},className:"text-xs text-blue-600 hover:text-blue-700 font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Tout marquer lu"}),d!=="granted"&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),O()},className:"text-xs text-green-600 hover:text-green-700 font-medium px-2 py-1 rounded hover:bg-green-50 flex items-center gap-1",title:"Activer les notifications push",children:[e.jsx(te,{className:"w-3 h-3"}),"Activer les notifications"]}),d==="granted"&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(Pe,{className:"w-3 h-3"}),"Notifications activ√©es"]})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"500px"},children:a?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Chargement..."})]}):i.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(te,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm font-medium",children:"Aucune notification"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Vous serez notifi√© des √©v√©nements importants"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:i.map(l=>e.jsx("div",{onClick:()=>R(l),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors border-l-4 ${l.read?"opacity-70 bg-gray-50":"bg-white"} ${l.type==="overdue"?"border-l-red-500":l.type==="upcoming"?"border-l-yellow-500":l.type==="info"?"border-l-blue-500":"border-l-green-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:$(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 leading-tight",children:l.title}),!l.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 leading-relaxed",children:l.message}),e.jsx("p",{className:"text-xs text-gray-400",children:v(l.timestamp)})]})]})},l.id))})}),i.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:l=>{l.stopPropagation(),n()},className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium py-2 rounded hover:bg-blue-50 transition-colors",children:"Actualiser les notifications"})})]})]})]})},ht=c.lazy(()=>q(()=>import("./TunnetSectionFixed-F4xlaDYN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),xt=c.lazy(()=>q(()=>import("./PaymentsManagement-DR4L45Vb.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))),pt=c.lazy(()=>q(()=>import("./PropertiesSection-Dvz-9yfP.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]))),ft=c.lazy(()=>q(()=>import("./AdminManagement-DwnrJ4F5.js"),__vite__mapDeps([12,1,2,3,4,5,6,7]))),yt=c.lazy(()=>q(()=>import("./ExpenseAnalytics-B9hwpW_U.js"),__vite__mapDeps([13,1,2,3,4,5,6,7]))),bt=c.lazy(()=>q(()=>import("./ExpenseAnalysis-CFah-QfF.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8]))),vt=c.lazy(()=>q(()=>import("./ApiDiagnostics-BT4cgiOf.js"),__vite__mapDeps([15,1,2,3,4,5,6,7]))),ne=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],ee=(i,t)=>{if(!i||i.length===0){alert("Aucune donn√©e √† exporter");return}const s=Object.keys(i[0]),r=[s.join(","),...i.map(g=>s.map(d=>{const u=g[d];return typeof u=="string"&&(u.includes(",")||u.includes('"'))?`"${u.replace(/"/g,'""')}"`:u||""}).join(","))].join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a"),h=URL.createObjectURL(a);o.setAttribute("href",h),o.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)},Me=async()=>{try{const[i,t,s,r,a]=await Promise.all([I.listProperties(),I.listTenants(),I.listBills({limit:1e3}),I.listExpenses(),I.getBillsStats()]),o=i.data?.data||[],h=t.data?.data||[],g=s.data?.data?.bills||[],d=r.data?.data||[],u=a.data?.data||{};if(o.length>0){const b=o.map(n=>({ID:n.id,Titre:n.title||n.name||"",Adresse:n.address||"",Ville:n.city||"","Code Postal":n.postal_code||"","Loyer Mensuel":n.rent||n.monthly_rent||0,Type:n.type||"",Statut:n.status||"ACTIVE","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));ee(b,"proprietes")}if(h.length>0){const b=h.map(n=>({ID:n.id,"Nom Complet":n.fullName||n.full_name||"",Email:n.email||"",T√©l√©phone:n.phone||"",Propri√©t√©:n.propertyName||n.property_name||"",Statut:n.status||n.is_active?"ACTIF":"INACTIF","Date d'Entr√©e":n.move_in_date?new Date(n.move_in_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));ee(b,"locataires")}if(g.length>0){const b=g.map(n=>({ID:n.id,Locataire:n.tenantName||n.tenant_name||"",Propri√©t√©:n.propertyName||n.property_name||"",Mois:n.month||"",Loyer:n.rent_amount||n.amount||0,Charges:n.charges||0,Total:n.total_amount||n.amount||0,Statut:n.status==="PAID"?"PAY√â":"EN ATTENTE","Date de Paiement":n.payment_date?new Date(n.payment_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));ee(b,"factures")}if(d.length>0){const b=d.map(n=>({ID:n.id,Description:n.description||"",Type:n.type||"",Montant:n.amount||0,Propri√©t√©:n.propertyName||n.property_name||"",Date:n.date?new Date(n.date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));ee(b,"depenses")}const N=[{"Total Propri√©t√©s":o.length,"Locataires Actifs":h.filter(b=>b.status==="ACTIVE"||b.is_active).length,"Factures Total":g.length,"Factures Pay√©es":g.filter(b=>b.status==="PAID").length,"Factures En Attente":g.filter(b=>b.status!=="PAID").length,"Revenus Mensuels":u.totalAmount||0,"Total D√©penses":d.reduce((b,n)=>b+(n.amount||0),0),"Date d'Export":new Date().toLocaleDateString("fr-FR")}];ee(N,"resume_dashboard"),alert("Exportation termin√©e ! Tous les fichiers CSV ont √©t√© t√©l√©charg√©s.")}catch(i){console.error("Erreur lors de l'exportation:",i),alert("Erreur lors de l'exportation des donn√©es. Veuillez r√©essayer.")}},Ue=c.memo(({onError:i})=>{const{t}=be(),[s,r]=c.useState({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!0,error:null,lastUpdated:null});return c.useEffect(()=>((async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping API calls"),r(g=>({...g,loading:!1,error:"No authentication token"})),i?.(!0);return}r(g=>({...g,loading:!0,error:null}));const h=await ye.getDashboardSummary();r({totalProperties:h.properties.total,activeTenants:h.tenants.active,monthlyRevenue:h.stats.totalAmount||0,pendingBills:h.stats.pendingBills||0,loading:!1,error:null,lastUpdated:h.last_updated}),i?.(!1)}catch(o){console.error("Error fetching statistics:",o);let h="Failed to load statistics";const g=o?.message||"";g.includes("Network error")?h="Network connection error. Please check your internet connection.":g.includes("timeout")?h="Request timeout. Please try again.":g.includes("401")?h="Authentication error. Please login again.":g.includes("500")&&(h="Server error. Please try again later."),r({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!1,error:h,lastUpdated:null}),i?.(!0)}})(),ye.startAutoRefresh(120*1e3),()=>{ye.stopAutoRefresh()}),[i]),s.loading?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[[1,2,3,4].map(a=>e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mt-2"})]}),e.jsx("div",{className:"p-3 bg-gray-200 rounded-full w-12 h-12"})]})},a)),e.jsx("div",{className:"col-span-full text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Chargement des statistiques du tableau de bord..."]})})]}):s.error?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-red-600 font-medium",children:s.error}),e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Veuillez rafra√Æchir la page ou v√©rifier votre connexion."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:Me,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:t("dashboard.exportAllData"),children:[e.jsx(it,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:t("dashboard.exportData")})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("dashboard.totalProperties")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalProperties})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(oe,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t("dashboard.fromDatabase")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("dashboard.activeTenants")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.activeTenants})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(ie,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t("dashboard.currentlyActive")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-yellow-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("dashboard.monthlyRevenue")}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["‚Ç¨",s.monthlyRevenue.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(Ne,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t("dashboard.thisMonth")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-red-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:t("dashboard.pendingBills")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.pendingBills})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(je,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:t("dashboard.awaitingPayment")})]})]}),s.lastUpdated&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Derni√®re mise √† jour : ",s.lastUpdated]})})]})});Ue.displayName="RealStatistics";const Ve=c.memo(()=>{const[i,t]=c.useState([]),[s,r]=c.useState(!0),[a,o]=c.useState(null);if(c.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping property API calls"),r(!1),o("No authentication token");return}r(!0);const N=(await I.listProperties())?.data||{},b=N.data??N,n=b?.properties||b?.items||b||[],S=(Array.isArray(n)?n:[]).sort((R,$)=>($.rent||$.monthly_rent||0)-(R.rent||R.monthly_rent||0)).slice(0,3);t(S),o(null)}catch(d){console.error("Error fetching properties:",d),o(d?.userMessage||d?.response?.data?.error||"Failed to load property data"),t([])}finally{r(!1)}})()},[]),s)return e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},g))});if(a)return e.jsx("div",{className:"text-red-600 text-center py-4",children:a});if(i.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-4",children:e.jsx(oe,{className:"w-12 h-12 text-blue-600"})}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"Aucune propri√©t√© trouv√©e"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Commencez par ajouter votre premi√®re propri√©t√©"})]});const h=["bg-green-500","bg-blue-500","bg-yellow-500"];return e.jsx("div",{className:"space-y-4",children:i.map((g,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 ${h[d]} rounded-full mr-3`}),e.jsx("span",{className:"font-medium",children:g.title||g.name||`Property ${g.id}`})]}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["‚Ç¨",g.rent||g.monthly_rent||0,"/mo"]})]},g.id))})});Ve.displayName="RealPropertyPerformance";const jt=()=>{const[i,t]=c.useState([]),[s,r]=c.useState(!0),[a,o]=c.useState(null);c.useEffect(()=>{(async()=>{try{r(!0);const[N,b]=await Promise.all([I.listTenants(),I.listBills({limit:5,sort:"created_at",order:"DESC"})]),n=N?.data||{},w=n.data??n,S=w?.tenants||w?.items||w||[],R=Array.isArray(S)?S:[],$=b?.data||{},v=$.data??$,E=v?.bills||v?.items||v||[],O=Array.isArray(E)?E:[],l=[];R.slice(0,2).forEach(f=>{l.push({id:`tenant-${f.id??Math.random().toString(36).slice(2)}`,type:"tenant",message:"New tenant registered",detail:`${f.fullName||f.full_name||"Tenant"} moved into ${f.propertyName||f.property_name||"property"}`,time:f.created_at||f.createdAt||new Date().toISOString(),color:"blue"})}),O.slice(0,2).forEach(f=>{const C=f.total_amount??f.amount??0;l.push({id:`bill-${f.id??Math.random().toString(36).slice(2)}`,type:"payment",message:f.status==="PAID"?"Payment received":"Bill generated",detail:f.status==="PAID"?`‚Ç¨${C} from ${f.tenantName||f.tenant_name||"tenant"}`:`‚Ç¨${C} bill for ${f.tenantName||f.tenant_name||"tenant"}`,time:f.created_at||f.createdAt||new Date().toISOString(),color:f.status==="PAID"?"green":"yellow"})}),l.sort((f,C)=>new Date(C.time).getTime()-new Date(f.time).getTime()),t(l.slice(0,3)),o(null)}catch(N){console.error("Error fetching recent activity:",N),o(N?.userMessage||N?.response?.data?.error||"Failed to load recent activity"),t([])}finally{r(!1)}})()},[]);const h=u=>{const N=new Date(u),n=Math.floor((new Date().getTime()-N.getTime())/(1e3*60*60));return n<1?"Just now":n<24?`${n} hours ago`:`${Math.floor(n/24)} days ago`};if(s)return e.jsx("div",{className:"space-y-3",children:[1,2,3].map(u=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-48"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},u))});if(a)return e.jsx("div",{className:"text-red-600 text-center py-4",children:a});if(i.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-4",children:"Aucune activit√© r√©cente"});const g=u=>{switch(u){case"blue":return"bg-blue-50";case"green":return"bg-green-50";case"yellow":return"bg-yellow-50";default:return"bg-gray-50"}},d=u=>{switch(u){case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"space-y-3",children:i.map(u=>e.jsxs("div",{className:`flex items-center p-3 ${g(u.color)} rounded-lg`,children:[e.jsx("div",{className:`w-2 h-2 ${d(u.color)} rounded-full mr-3`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:u.message}),e.jsx("p",{className:"text-xs text-gray-600",children:u.detail})]}),e.jsx("span",{className:"text-xs text-gray-500",children:h(u.time)})]},u.id))})},Nt=()=>{const[i,t]=c.useState(!0),[s,r]=c.useState([]),[a,o]=c.useState([]),[h,g]=c.useState(0);return c.useEffect(()=>{(async()=>{try{t(!0),console.log("üìä Fetching revenue data (paid bills)...");const N=(await I.listBills({status:"PAID",limit:1e3,sortBy:"created_at",sortOrder:"DESC"}))?.data?.data||{},b=N?.bills||N?.items||N||[];if(console.log("üí∞ Revenue (paid bills) response:",b),!b||b.length===0){console.log("‚ÑπÔ∏è No paid bills found (no revenue yet)"),r([]),o([]),g(0),t(!1);return}const n={},w={};let S=0;for(const v of b){if(v.status!=="PAID"&&v.status!=="RECEIPT_SENT")continue;const E=parseFloat(v.total_amount||v.amount||0);S+=E;const O=v.property_id||"unknown",l=v.property?.title||v.property?.name||`Propri√©t√© #${O}`;n[O]||(n[O]={name:l,value:0}),n[O].value+=E;const f=v.month||(()=>{const C=new Date(v.paid_at||v.updated_at||v.created_at||new Date),_=String(C.getMonth()+1).padStart(2,"0");return`${C.getFullYear()}-${_}`})();w[f]=(w[f]||0)+E}const R=Object.values(n).map(v=>({name:v.name,value:Number(v.value.toFixed(2))})).sort((v,E)=>E.value-v.value),$=Object.keys(w).sort().slice(-6).map(v=>({name:v,value:Number(w[v].toFixed(2))}));r(R),o($),g(Number(S.toFixed(2))),console.log("‚úÖ Revenue data processed successfully:",{totalRevenue:S,properties:R.length,months:$.length})}catch(u){console.error("‚ùå Error loading revenue data:",u),r([]),o([]),g(0)}finally{t(!1)}})()},[]),e.jsxs("div",{className:"space-y-4",children:[h>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus Totaux"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["‚Ç¨",h.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(Ne,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Bas√© sur les factures pay√©es uniquement"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Revenus par Propri√©t√©"}),i?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des revenus‚Ä¶"}):s.length>0?e.jsx(Ie,{width:"100%",height:260,children:e.jsxs(Te,{children:[e.jsx(Re,{data:s,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:d,percent:u})=>`${d.length>15?d.substring(0,15)+"...":d} ${(u*100).toFixed(0)}%`,children:s.map((d,u)=>e.jsx($e,{fill:ne[u%ne.length]},u))}),e.jsx(Be,{formatter:(d,u)=>[`‚Ç¨${Number(d).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u]}),e.jsx(Fe,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-3",children:e.jsx(le,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:"Aucun revenu disponible"}),e.jsx("p",{className:"text-xs mt-2",children:"Les revenus appara√Ætront ici une fois les factures pay√©es"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Revenus Mensuels (6 derniers mois)"}),i?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des revenus mensuels‚Ä¶"}):a.length>0?e.jsx(Ie,{width:"100%",height:260,children:e.jsxs(Te,{children:[e.jsx(Re,{data:a,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:d,percent:u})=>`${d} ${(u*100).toFixed(0)}%`,children:a.map((d,u)=>e.jsx($e,{fill:ne[u%ne.length]},u))}),e.jsx(Be,{formatter:(d,u)=>[`‚Ç¨${Number(d).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u]}),e.jsx(Fe,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-3",children:e.jsx(Le,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:"Aucun revenu mensuel"}),e.jsx("p",{className:"text-xs mt-2",children:"Les revenus mensuels appara√Ætront ici au fil du temps"})]})]})]})]})},wt=()=>{const{t:i}=be(),[t,s]=c.useState("overview"),r=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[a,o]=c.useState(null),[h,g]=c.useState(!1),[d,u]=c.useState(!1),N=c.useCallback(A=>{const{section:M,billId:m,tenantId:F,propertyId:H}=A.detail;s(M),m&&localStorage.setItem("selectedBillId",m.toString()),F&&localStorage.setItem("selectedTenantId",F.toString()),H&&localStorage.setItem("selectedPropertyId",H.toString())},[]),b=c.useCallback(A=>{const{billId:M}=A.detail;localStorage.setItem("openReceiptForBill",M.toString()),s("payments")},[]);c.useEffect(()=>(window.addEventListener("navigate-to-section",N),window.addEventListener("open-receipt",b),()=>{window.removeEventListener("navigate-to-section",N),window.removeEventListener("open-receipt",b)}),[N,b]);const n=()=>{o(null),g(!1)},w=()=>e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(pt,{})}),S=()=>(console.log("renderTunnetContent called, rendering TunnetSectionFixed"),e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(ht,{})})),R=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ue,{onError:u}),d&&e.jsx(vt,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 lg:p-8 min-h-[300px] md:min-h-[420px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg md:text-xl font-semibold flex items-center",children:[e.jsx(le,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-blue-600 flex-shrink-0"}),i("dashboard.revenueOverview")]})}),e.jsx(Nt,{})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Le,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-green-600 flex-shrink-0"}),i("dashboard.propertyPerformance")]}),e.jsx(Ve,{})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold mb-4 flex items-center",children:[e.jsx(te,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-purple-600 flex-shrink-0"}),i("dashboard.recentActivity")]}),e.jsx(jt,{})]}),e.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-xl border border-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(pe,{className:"w-5 h-5 md:w-6 md:h-6 mr-2 md:mr-3 text-orange-500 flex-shrink-0"}),i("dashboard.quickActions")]}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:"Gestion Immobili√®re"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8 items-stretch",children:[e.jsx(K,{icon:oe,title:"Ajouter Propri√©t√©",description:"Cr√©er une nouvelle propri√©t√© dans le syst√®me",onClick:()=>s("properties"),color:"blue",delay:100,className:"card-stagger-1"}),e.jsx(K,{icon:ie,title:"Ajouter Locataire",description:"Enregistrer un nouveau locataire",onClick:()=>s("tunnet"),color:"green",delay:200,className:"card-stagger-2"}),e.jsx(K,{icon:je,title:"G√©n√©rer Facture",description:"Cr√©er et envoyer des factures de loyer",onClick:()=>s("payments"),color:"purple",delay:300,className:"card-stagger-3"}),e.jsx(K,{icon:le,title:"Voir Rapports",description:"Analyser les donn√©es et performances",onClick:()=>s("expense-analytics"),color:"orange",delay:400,className:"card-stagger-4"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx(K,{icon:ke,title:"Param√®tres",description:"Configurer les pr√©f√©rences du syst√®me",onClick:()=>s("settings"),color:"indigo",delay:500,className:"card-stagger-1"}),e.jsx(K,{icon:rt,title:"Exporter Donn√©es",description:"T√©l√©charger les donn√©es en CSV",onClick:Me,color:"teal",delay:600,className:"card-stagger-2"}),e.jsx(K,{icon:nt,title:"Aide & Support",description:"Obtenir de l'aide et des informations",onClick:()=>{alert(`Aide Tableau de Bord:

‚Ä¢ Utilisez les Actions Rapides pour naviguer entre les sections
‚Ä¢ Les Statistiques affichent les donn√©es en temps r√©el de votre base de donn√©es
‚Ä¢ L'Activit√© R√©cente affiche les derni√®res mises √† jour des locataires et factures
‚Ä¢ Les Graphiques montrent les r√©partitions et tendances des d√©penses`)},color:"pink",delay:700,className:"card-stagger-3"})]})]})]}),$=()=>e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(xt,{})}),v=()=>e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(yt,{})}),E=()=>e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(bt,{})}),O=()=>{const{language:A,setLanguage:M,t:m}=be(),F=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[H,G]=c.useState(F?.name||""),[x,D]=c.useState(F?.email||""),[p,j]=c.useState(()=>{const y=F?.signature_photo;if(!y)return null;if(typeof y=="string"&&/^https?:\/\//i.test(y))return y;const Q="http://192.168.1.109:4002/api".replace(/\/api\/?$/,"");let P=y.replace(/\\/g,"/");return P=P.replace(/^public[\\/]/,""),P.startsWith("uploads/")||(P.includes("uploads/")?(P=P.split("uploads/")[1],P=`uploads/${P}`):P=`uploads/${P}`),`${Q}/${P}`}),[B,we]=c.useState(!1),[ce,W]=c.useState(""),[_e,De]=c.useState(!1),[se,ae]=c.useState(""),[de,me]=c.useState(""),[Z,ue]=c.useState(""),[Se,ge]=c.useState(""),[J,Ce]=c.useState(!1),[re,z]=c.useState(""),[ze,he]=c.useState(!1),qe=async()=>{try{De(!0),ae("");const y={};H&&H!==F?.name&&(y.name=H),x&&x!==F?.email&&(y.email=x);const k=await q(()=>import("./api-Bqs0zQX7.js"),__vite__mapDeps([6,7]));await k.default.updateProfile(y);const P=(await k.default.me())?.data?.data?.admin;P&&localStorage.setItem("user",JSON.stringify(P)),ae(m("settings.saved")),setTimeout(()=>ae(""),3e3)}catch(y){ae(y?.response?.data?.error||y?.userMessage||y?.message||m("settings.save")+" failed")}finally{De(!1)}},He=async y=>{try{const k=y.target.files?.[0];if(!k)return;if(!k.type.startsWith("image/")){W("‚ùå Please select an image file (PNG, JPG, etc.)");return}we(!0),W("");const P=await(await q(()=>import("./api-Bqs0zQX7.js"),__vite__mapDeps([6,7]))).uploadSignature(k);if(!P?.data?.success){const X=P?.data?.error||"Failed to upload signature";W(`‚ùå ${X}`),console.error("Signature upload failed:",P?.data);return}const xe=P?.data?.data?.admin;if(xe){localStorage.setItem("user",JSON.stringify(xe));const X=xe.signature_photo;if(X){if(/^https?:\/\//i.test(X))j(X);else{const Ge="http://192.168.1.109:4002/api".replace(/\/api\/?$/,"");let U=X.replace(/\\/g,"/");U=U.replace(/^public[\\/]/,""),U.startsWith("uploads/")||(U.includes("uploads/")?(U=U.split("uploads/")[1],U=`uploads/${U}`):U=`uploads/${U}`),j(`${Ge}/${U}`)}W(m("settings.saved")),setTimeout(()=>W(""),3e3)}else W("‚ö†Ô∏è Signature uploaded but path not returned")}else W("‚ùå Invalid response from server")}catch(k){console.error("Signature upload error:",k);const Q=k?.response?.data?.error||k?.message||"Failed to upload signature";W(`‚ùå ${Q}`),setTimeout(()=>W(""),5e3)}finally{we(!1),y.target&&(y.target.value="")}},We=async()=>{try{if(Ce(!0),z(""),!de){z(m("settings.password.current.required"));return}if(!Z){z(m("settings.password.new.required"));return}if(Z.length<6){z(m("settings.password.new.min"));return}if(Z!==Se){z(m("settings.password.mismatch"));return}console.log("üîÑ Appel de l'API changePassword...");const k=await(await q(()=>import("./api-Bqs0zQX7.js"),__vite__mapDeps([6,7]))).default.changePassword({currentPassword:de,newPassword:Z});if(console.log("üì• R√©ponse de l'API changePassword:",k?.data),k?.data?.success||k?.data?.message)console.log("‚úÖ Changement de mot de passe r√©ussi"),z(m("settings.password.success")),me(""),ue(""),ge(""),he(!1),setTimeout(()=>{z("")},7e3);else throw console.error("‚ùå R√©ponse invalide du serveur:",k),new Error("R√©ponse invalide du serveur")}catch(y){console.error("Error changing password:",y);const k=y?.response?.data?.error||y?.response?.data?.message||y?.userMessage||y?.message||m("settings.password.failed");z(`‚ùå ${k}`),setTimeout(()=>{z("")},5e3)}finally{Ce(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m("settings.title")})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(lt,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:m("settings.language.title")})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:m("settings.language.description")}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.language.label")}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"language",value:"fr",checked:A==="fr",onChange:y=>M(y.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 focus:ring-2"}),e.jsx("span",{className:"ml-2 text-gray-700 group-hover:text-gray-900",children:m("settings.language.french")})]}),e.jsxs("label",{className:"flex items-center cursor-pointer group",children:[e.jsx("input",{type:"radio",name:"language",value:"en",checked:A==="en",onChange:y=>M(y.target.value),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500 focus:ring-2"}),e.jsx("span",{className:"ml-2 text-gray-700 group-hover:text-gray-900",children:m("settings.language.english")})]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m("settings.account.title")}),e.jsx("p",{className:"text-gray-600 mb-4",children:m("settings.account.description")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.profile.name")}),e.jsx("input",{type:"text",value:H,onChange:y=>G(y.target.value),placeholder:m("settings.profile.name.placeholder"),title:m("settings.profile.name"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.profile.email")}),e.jsx("input",{type:"email",value:x,onChange:y=>D(y.target.value),placeholder:m("settings.profile.email.placeholder"),title:m("settings.profile.email"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-2",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-2",children:m("settings.signature.title")}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:m("settings.signature.description")}),p?e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:m("settings.signature.current")}),e.jsx("div",{className:"inline-block border rounded-lg p-2 bg-gray-50",children:e.jsx("img",{src:p,alt:"Signature",className:"max-h-20 object-contain"})})]}):e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:m("settings.signature.none")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-800 rounded-lg cursor-pointer hover:bg-gray-200 transition-colors text-sm",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:He,disabled:B}),m(p?"settings.signature.change":"settings.signature.upload")]}),ce&&e.jsx("span",{className:`text-xs ${ce===m("settings.saved")?"text-green-600":"text-red-600"}`,children:ce})]})]}),e.jsx("button",{onClick:qe,disabled:_e,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60 transition-colors",children:m(_e?"settings.saving":"settings.save")}),se&&e.jsx("div",{className:`text-sm ${se==="Saved"||se===m("settings.saved")?"text-green-600":"text-red-600"}`,children:se})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m("settings.password.title")}),e.jsx("p",{className:"text-gray-600 mb-4",children:m("settings.password.description")}),ze?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.password.current")}),e.jsx("input",{type:"password",value:de,onChange:y=>me(y.target.value),placeholder:m("settings.password.current.placeholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:J})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.password.new")}),e.jsx("input",{type:"password",value:Z,onChange:y=>ue(y.target.value),placeholder:m("settings.password.new.placeholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:J})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:m("settings.password.confirm")}),e.jsx("input",{type:"password",value:Se,onChange:y=>ge(y.target.value),placeholder:m("settings.password.confirm.placeholder"),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:J})]}),re&&e.jsx("div",{className:`text-sm p-3 rounded-lg ${re.includes("succ√®s")||re.includes("success")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:re}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:We,disabled:J,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:m(J?"settings.password.changing":"settings.password.change")}),e.jsx("button",{onClick:()=>{he(!1),me(""),ue(""),ge(""),z("")},disabled:J,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:m("settings.cancel")})]})]}):e.jsx("button",{onClick:()=>he(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:m("settings.password.change")})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:m("settings.logout.title")}),e.jsx("p",{className:"text-gray-600 mb-4",children:m("settings.logout.description")}),e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},className:"w-full md:w-auto bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:m("settings.logout.button")})]})]})},l=()=>e.jsx(O,{}),f=()=>e.jsx(c.Suspense,{fallback:e.jsx(Y,{}),children:e.jsx(ft,{})}),C=()=>{switch(t){case"overview":return R();case"properties":return w();case"tunnet":return S();case"payments":return $();case"expense-analytics":return v();case"expense-analysis":return E();case"settings":return l();case"admin-management":return f();default:return R()}},[_,T]=c.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[e.jsx("button",{onClick:()=>T(!_),className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md border border-gray-200","aria-label":"Toggle menu",children:e.jsx(Ae,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:`${_?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:static inset-y-0 left-0 z-40 w-80 bg-white border-r border-gray-200 transition-transform duration-300 ease-in-out md:transition-none`,children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold text-gray-900",children:i("nav.dashboard")}),e.jsx("button",{onClick:()=>T(!1),className:"md:hidden p-1 text-gray-500 hover:text-gray-700","aria-label":"Close menu",children:e.jsx(ve,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"mt-4 px-2 md:px-4 overflow-y-auto h-[calc(100vh-80px)]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>s("overview"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="overview"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Ae,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.overview")})]}),e.jsxs("button",{onClick:()=>s("properties"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="properties"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(oe,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.properties")})]}),e.jsxs("button",{onClick:()=>s("tunnet"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="tunnet"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ie,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.tenants")})]}),e.jsxs("button",{onClick:()=>s("payments"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="payments"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(je,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.payments")})]}),e.jsxs("button",{onClick:()=>s("expense-analytics"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="expense-analytics"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Ne,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.expenses")})]}),e.jsxs("button",{onClick:()=>s("expense-analysis"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="expense-analysis"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(le,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.expenseAnalysis")})]}),e.jsxs("button",{onClick:()=>s("settings"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="settings"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ke,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.settings")})]}),r?.role==="SUPER_ADMIN"&&e.jsxs("button",{onClick:()=>s("admin-management"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${t==="admin-management"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:i("nav.admin"),children:[e.jsx(Je,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:i("nav.admin")})]})]})})]}),_&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>T(!1)}),e.jsxs("div",{className:"flex-1 w-full min-w-0",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-3 md:px-6 py-3 md:py-4 sticky top-0 z-20",children:e.jsx("div",{className:"flex items-center justify-end gap-2 md:gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsx(gt,{}),e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 hover:bg-gray-50 p-1.5 md:p-2 rounded-lg transition-colors cursor-pointer","aria-label":"Aller aux Param√®tres",onClick:()=>{s("settings"),T(!1)},children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-xs md:text-sm flex-shrink-0",children:(r?.name||r?.fullName||"U").charAt(0).toUpperCase()}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:r?.name||r?.fullName||"Utilisateur"}),e.jsx("div",{className:"text-xs text-gray-500",children:r?.role||"Administrateur"})]})]})]})})}),e.jsx("div",{className:"p-3 md:p-4 lg:p-6 w-full max-w-full overflow-x-hidden",children:C()})]}),h&&a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsx("h2",{className:"text-lg md:text-heading-large truncate",children:a.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:a.rating}),e.jsxs("span",{className:"ml-1 card-subtitle",children:["(",a.reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center card-subtitle",children:[e.jsx(Xe,{className:"w-4 h-4 mr-1"}),a.location]})]})]}),e.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close property details",children:e.jsx(ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("div",{className:"mb-6 md:mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("img",{src:a.images[0],alt:a.title,className:"w-full h-48 md:h-80 object-cover rounded-lg"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:a.images.slice(1,5).map((A,M)=>e.jsx("img",{src:A,alt:`${a.title} ${M+2}`,className:"w-full h-24 md:h-36 object-cover rounded-lg"},M))})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:[a.propertyDetails.propertyType," hosted by ",a.host.name]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${a.tagColor==="orange"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:a.tag})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:gap-6 text-gray-600 mb-4 text-sm md:text-base",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[a.guests," guests"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[a.bedrooms," bedrooms"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ze,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[a.bathrooms," bathrooms"]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:a.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:"What this place offers"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:a.amenities.map((A,M)=>{const m=F=>{switch(F.toLowerCase()){case"wifi":return e.jsx(at,{className:"w-5 h-5"});case"tv":return e.jsx(st,{className:"w-5 h-5"});case"parking":return e.jsx(tt,{className:"w-5 h-5"});case"coffee maker":return e.jsx(et,{className:"w-5 h-5"});default:return e.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded"})}};return e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg",children:[m(A),e.jsx("span",{className:"text-gray-700",children:A})]},M)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Property Type"}),e.jsx("p",{className:"text-gray-700",children:a.propertyDetails.propertyType})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Size"}),e.jsx("p",{className:"text-gray-700",children:a.propertyDetails.size})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-in"}),e.jsx("p",{className:"text-gray-700",children:a.propertyDetails.checkIn})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-out"}),e.jsx("p",{className:"text-gray-700",children:a.propertyDetails.checkOut})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"lg:sticky lg:top-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("img",{src:a.host.avatar,alt:a.host.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Hosted by ",a.host.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.host.joinDate})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"price-large",children:[a.price,"‚Ç¨"]}),e.jsx("span",{className:"text-body-small text-gray-500 ml-1",children:"mois"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pe,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:a.rating})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Check-in Date"}),e.jsx("input",{type:"date",placeholder:"Select check-in date",title:"Check-in date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Lease Duration"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Lease duration",children:[e.jsx("option",{children:"3 months"}),e.jsx("option",{children:"6 months"}),e.jsx("option",{children:"12 months"}),e.jsx("option",{children:"Month by month"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Room Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Room type",children:[e.jsx("option",{children:"Private room"}),e.jsx("option",{children:"Shared room"}),e.jsx("option",{children:"Master room"})]})]}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors btn-text",children:"Apply Now"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Add to favorites",children:e.jsx(Qe,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Application review required"})})]})]})})]})]})]})})]})},At=Object.freeze(Object.defineProperty({__proto__:null,default:wt},Symbol.toStringTag,{value:"Module"}));export{At as D,ye as d,mt as n};
