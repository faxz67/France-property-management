const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TunnetSectionFixed-BUSHoV68.js","assets/index-rAghrxu1.js","assets/router-DUq0sin2.js","assets/vendor-Bzgz95E1.js","assets/icons-B-WyEUkg.js","assets/index-S3J0gaqV.css","assets/api-XfUXylTc.js","assets/utils-B9HHbEsj.js","assets/charts-DdKZH6bc.js","assets/payments-animations-DEMUWgxw.css","assets/PaymentsManagement-DC32f09D.js","assets/PropertiesSection-Dq7XNF2v.js","assets/AdminManagement-DxOj0CHI.js","assets/ExpenseAnalytics-CCe9st_z.js","assets/ApiDiagnostics-CYFavNuo.js"])))=>i.map(i=>d[i]);
import{j as e,L as T,_ as C}from"./index-rAghrxu1.js";import{r as m}from"./router-DUq0sin2.js";import y from"./api-XfUXylTc.js";import{b as ce,B as V,c as O,C as z,D as ae,S as J,d as de,e as me,f as F,M as ue,X as he,g as ge,h as xe,i as pe,j as fe,k as ve,l as ye,W as be,m as X,n as je,o as Ne,p as we,q as _e,r as De}from"./icons-B-WyEUkg.js";import{R as Y,P as Z,a as Q,C as ee,T as te,L as se}from"./charts-DdKZH6bc.js";const b=(a,t={})=>{const s={...{year:"numeric",month:"long",day:"numeric",timeZone:"Europe/Paris"},...t};try{return(typeof a=="string"?new Date(a):a).toLocaleDateString("fr-FR",s)}catch(o){return console.error("Error formatting date:",o),"Date invalide"}},Se=(a,t={})=>{const s={...{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"},...t};try{return(typeof a=="string"?new Date(a):a).toLocaleString("fr-FR",s)}catch(o){return console.error("Error formatting date and time:",o),"Date et heure invalides"}},M=(a={})=>Se(new Date,a),Ee=a=>{try{const t=typeof a=="string"?new Date(a):a,r=new Date;return r.setHours(0,0,0,0),t.setHours(0,0,0,0),t<r}catch(t){return console.error("Error checking if date is overdue:",t),!1}},Ae=a=>{try{const t=typeof a=="string"?new Date(a):a,r=new Date;r.setHours(0,0,0,0),t.setHours(0,0,0,0);const s=t-r;return Math.ceil(s/(1e3*60*60*24))}catch(t){return console.error("Error calculating days until due:",t),0}},_=(a,t="EUR")=>{try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t}).format(a)}catch(r){return console.error("Error formatting currency:",r),`${a} ‚Ç¨`}},re=()=>"http://192.168.1.109:4002/api".replace("/api",""),Ce=a=>{if(!a)return console.warn("‚ö†Ô∏è Empty URL provided to normalizePhotoUrl"),"";if(console.log("üîç normalizePhotoUrl input:",a),a.startsWith("http://")||a.startsWith("https://"))return console.log("‚úÖ URL is already complete, using as-is:",a),a;const t=re();if(console.log("üîß Backend base URL:",t),a.startsWith("/uploads")){const s=`${t}${a}`;return console.log("‚úÖ Normalized /uploads URL:",s),s}if(a.startsWith("uploads/")){const s=`${t}/${a}`;return console.log("‚úÖ Normalized uploads/ URL:",s),s}const r=`${t}/uploads/${a.startsWith("/")?a.substring(1):a}`;return console.log("‚úÖ Normalized relative URL:",r),r};class Pe{cache;cacheTimeout;refreshInterval;isRefreshing;constructor(){this.cache=new Map,this.cacheTimeout=300*1e3,this.refreshInterval=null,this.isRefreshing=!1}isCacheValid(t){const r=this.cache.get(t);return r?Date.now()-r.timestamp<this.cacheTimeout:!1}getCachedData(t){const r=this.cache.get(t);return r?r.data:null}setCachedData(t,r){this.cache.set(t,{data:r,timestamp:Date.now()})}clearCache(){this.cache.clear()}startAutoRefresh(t=120*1e3){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval(()=>{this.refreshAllData()},t),console.log("üîÑ Auto-refresh started with interval:",t/1e3,"seconds")}stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("‚èπÔ∏è Auto-refresh stopped"))}async refreshAllData(){if(!this.isRefreshing){this.isRefreshing=!0,console.log("üîÑ Refreshing all data...");try{const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills(),this.fetchBillsStats(),this.fetchExpenses()]),r=["Properties","Tenants","Bills","Stats","Expenses"];t.forEach((s,o)=>{s.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${r[o]} refresh failed:`,s.reason)}),console.log("‚úÖ Data refresh completed")}catch(t){console.error("‚ùå Error refreshing data:",t)}finally{this.isRefreshing=!1}}}async fetchProperties(){const t="properties";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üè† Fetching properties with photos...");const r=await y.listProperties();if(r.data?.success&&r.data?.data?.properties){const s=await Promise.all(r.data.data.properties.map(async o=>{let i=[];try{const c=await y.getPropertyPhotos(o.id);c.data?.success&&c.data?.data?.photos&&(i=c.data.data.photos.map(l=>({...l,display_url:Ce(l.file_url),created_at_fr:b(l.created_at),updated_at_fr:l.updated_at?b(l.updated_at):null})))}catch(c){console.warn(`‚ö†Ô∏è Could not fetch photos for property ${o.id}:`,c)}return{...o,photos:i,primary_photo:i.find(c=>c.is_primary)||i[0]||null,created_at_fr:b(o.created_at),updated_at_fr:o.updated_at?b(o.updated_at):null,rent_formatted:_(o.rent||o.monthly_rent||0),is_active:o.status==="ACTIVE",status_fr:o.status==="ACTIVE"?"Actif":"Inactif",display_title:o.title||o.name||"Propri√©t√© sans nom",display_address:this.formatAddress(o),photo_count:i.length,has_photos:i.length>0}}));return this.setCachedData(t,s),console.log("‚úÖ Properties fetched with photos:",s.length),s}throw new Error("Invalid response structure")}catch(r){throw console.error("‚ùå Error fetching properties:",r),r}}async fetchTenants(){const t="tenants";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üë• Fetching tenants...");const r=await y.listTenants();if(r.data?.success&&r.data?.data?.tenants){const s=r.data.data.tenants.map(o=>({...o,created_at_fr:b(o.created_at),updated_at_fr:o.updated_at?b(o.updated_at):null,move_in_date_fr:o.move_in_date?b(o.move_in_date):null,move_out_date_fr:o.move_out_date?b(o.move_out_date):null,rent_amount_formatted:o.rent_amount?_(o.rent_amount):null,is_active:o.status==="ACTIVE"||o.is_active===!0,status_fr:o.status==="ACTIVE"||o.is_active===!0?"Actif":"Inactif",display_name:o.fullName||o.full_name||o.name||"Locataire"}));return this.setCachedData(t,s),console.log("‚úÖ Tenants fetched:",s.length),s}throw new Error("Invalid response structure")}catch(r){throw console.error("‚ùå Error fetching tenants:",r),r}}async fetchBills(t={}){const r=`bills_${JSON.stringify(t)}`;if(this.isCacheValid(r))return this.getCachedData(r);try{console.log("üí≥ Fetching bills...");const s=await y.listBills(t);if(s.data?.success&&s.data?.data?.bills){const o=s.data.data.bills.map(i=>{const c=i.payment_date?new Date(i.payment_date):null,l=Ee(i.due_date),d=Ae(i.due_date);return{...i,created_at_fr:b(i.created_at),due_date_fr:b(i.due_date),payment_date_fr:c?b(c):null,amount_formatted:_(i.amount||i.total_amount||0),rent_amount_formatted:i.rent_amount?_(i.rent_amount):null,charges_formatted:i.charges?_(i.charges):null,total_amount_formatted:_(i.total_amount||i.amount||0),is_overdue:l,days_until_due:d,status_fr:this.getBillStatusFrench(i.status),priority:this.getBillPriority(i.status,l,d),tenant_display_name:i.tenant?.name||i.tenant?.fullName||"Locataire",property_display_name:i.property?.title||i.property?.name||"Propri√©t√©"}});return this.setCachedData(r,o),console.log("‚úÖ Bills fetched:",o.length),o}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching bills:",s),s}}async fetchBillsStats(){const t="bills_stats";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üìä Fetching bills statistics...");const r=await y.getBillsStats();if(r.data?.success&&r.data?.data){const s=r.data.data,o={...s,totalAmount_formatted:_(s.totalAmount||0),paidAmount_formatted:_(s.paidAmount||0),pendingAmount_formatted:_(s.pendingAmount||0),overdueAmount_formatted:_(s.overdueAmount||0),totalBills_fr:`${s.totalBills||0} facture${(s.totalBills||0)>1?"s":""}`,paidBills_fr:`${s.paidBills||0} facture${(s.paidBills||0)>1?"s":""} pay√©e${(s.paidBills||0)>1?"s":""}`,pendingBills_fr:`${s.pendingBills||0} facture${(s.pendingBills||0)>1?"s":""} en attente`,overdueBills_fr:`${s.overdueBills||0} facture${(s.overdueBills||0)>1?"s":""} en retard`,last_updated:M(),last_updated_timestamp:new Date().toISOString()};return this.setCachedData(t,o),console.log("‚úÖ Bills statistics fetched"),o}throw new Error("Invalid response structure")}catch(r){throw console.error("‚ùå Error fetching bills statistics:",r),r}}async fetchExpenses(){const t="expenses";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üí∞ Fetching expenses...");const r=await y.listExpenses();if(r.data?.success&&r.data?.data?.expenses){const s=r.data.data.expenses.map(o=>({...o,created_at_fr:b(o.created_at),date_fr:o.date?b(o.date):null,amount_formatted:_(o.amount||0),category_fr:this.getExpenseCategoryFrench(o.category),status_fr:o.status==="APPROVED"?"Approuv√©":"En attente"}));return this.setCachedData(t,s),console.log("‚úÖ Expenses fetched:",s.length),s}throw new Error("Invalid response structure")}catch(r){throw console.error("‚ùå Error fetching expenses:",r),r}}getBillStatusFrench(t){return{PENDING:"En attente",PAID:"Pay√©",OVERDUE:"En retard",RECEIPT_SENT:"Re√ßu envoy√©",CANCELLED:"Annul√©"}[t]||t}getBillPriority(t,r,s){return t==="PAID"?"low":r?"critical":s<=3?"high":s<=7?"medium":"low"}getExpenseCategoryFrench(t){return{MAINTENANCE:"Maintenance",REPAIRS:"R√©parations",UTILITIES:"Services publics",INSURANCE:"Assurance",TAXES:"Taxes",ADMINISTRATIVE:"Administratif",OTHER:"Autre"}[t]||t}async getDashboardSummary(){try{console.log("üìä Fetching dashboard summary...");const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills({limit:10}),this.fetchBillsStats(),this.fetchExpenses()]),r=t[0].status==="fulfilled"?t[0].value:[],s=t[1].status==="fulfilled"?t[1].value:[],o=t[2].status==="fulfilled"?t[2].value:[],i=t[3].status==="fulfilled"?t[3].value:{totalBills:0,totalAmount:0,pendingBills:0,overdueBills:0,statusBreakdown:[]},c=t[4].status==="fulfilled"?t[4].value:[];t.forEach((d,u)=>{d.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${["Properties","Tenants","Bills","Stats","Expenses"][u]} API failed:`,d.reason)});const l={properties:{total:r.length,active:r.filter(d=>d.is_active).length,data:r},tenants:{total:s.length,active:s.filter(d=>d.is_active||d.status==="ACTIVE").length,data:s},bills:{total:o.length,pending:o.filter(d=>d.status==="PENDING").length,overdue:o.filter(d=>d.is_overdue||d.status==="OVERDUE").length,paid:o.filter(d=>d.status==="PAID").length,data:o},stats:i,expenses:{total:c.length,data:c},last_updated:M(),last_updated_timestamp:new Date().toISOString()};return console.log("‚úÖ Dashboard summary fetched"),l}catch(t){throw console.error("‚ùå Error fetching dashboard summary:",t),t}}getNewBillDefaults(){return{tenant_id:0,property_id:0,amount:0,month:new Date().toISOString().slice(0,7),due_date:new Date(Date.now()+720*60*60*1e3).toISOString(),description:"Paiement de loyer mensuel",status:"PENDING"}}getBackendBaseUrl(){return re()}formatAddress(t){const r=[];return t.address&&r.push(t.address),t.city&&r.push(t.city),t.country&&r.push(t.country),r.join(", ")||"Adresse non sp√©cifi√©e"}getSystemStatus(){return{cache_size:this.cache.size,is_auto_refresh_active:!!this.refreshInterval,is_refreshing:this.isRefreshing,current_time:M(),timezone:"Europe/Paris",backend_base_url:this.getBackendBaseUrl()}}}const U=new Pe,A=({icon:a,title:t,description:r,onClick:s,color:o,delay:i=0,className:c=""})=>{const[l,d]=m.useState([]),u=m.useRef(null),x=p=>{const v=u.current?.getBoundingClientRect();if(v){const j=p.clientX-v.left,N=p.clientY-v.top,S={id:Date.now(),x:j,y:N};d(E=>[...E,S]),setTimeout(()=>{d(E=>E.filter(R=>R.id!==S.id))},600)}s()},n=(p=>{const v={blue:{bg:"bg-blue-50",hover:"hover:bg-blue-100",icon:"text-blue-600",text:"text-blue-800",gradient:"gradient-bg-blue"},green:{bg:"bg-green-50",hover:"hover:bg-green-100",icon:"text-green-600",text:"text-green-800",gradient:"gradient-bg-green"},purple:{bg:"bg-purple-50",hover:"hover:bg-purple-100",icon:"text-purple-600",text:"text-purple-800",gradient:"gradient-bg-purple"},orange:{bg:"bg-orange-50",hover:"hover:bg-orange-100",icon:"text-orange-600",text:"text-orange-800",gradient:"gradient-bg-orange"},indigo:{bg:"bg-indigo-50",hover:"hover:bg-indigo-100",icon:"text-indigo-600",text:"text-indigo-800",gradient:"gradient-bg-blue"},teal:{bg:"bg-teal-50",hover:"hover:bg-teal-100",icon:"text-teal-600",text:"text-teal-800",gradient:"gradient-bg-green"},pink:{bg:"bg-pink-50",hover:"hover:bg-pink-100",icon:"text-pink-600",text:"text-pink-800",gradient:"gradient-bg-purple"}};return v[p]||v.blue})(o);return e.jsxs("button",{ref:u,onClick:x,className:`
        professional-card
        relative
        p-6
        ${n.bg}
        ${n.hover}
        rounded-xl
        text-center
        group
        overflow-hidden
        border
        border-gray-200
        hover:border-gray-300
        focus:outline-none
        focus:ring-2
        focus:ring-blue-500
        focus:ring-offset-2
        transition-all
        duration-300
        ease-out
        ${c}
      `,style:{animationDelay:`${i}ms`,animation:"textSlideUp 0.5s ease-out forwards"},title:r,children:[l.map(p=>e.jsx("span",{className:"ripple",style:{left:p.x-10,top:p.y-10,width:20,height:20}},p.id)),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:`
          professional-card-icon
          w-16
          h-16
          mx-auto
          rounded-full
          flex
          items-center
          justify-center
          ${n.gradient}
          shadow-lg
          group-hover:shadow-xl
          transition-all
          duration-300
        `,children:e.jsx(a,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:`
          absolute
          inset-0
          w-16
          h-16
          mx-auto
          rounded-full
          ${n.gradient}
          opacity-0
          group-hover:opacity-20
          blur-xl
          transition-opacity
          duration-300
        `})]}),e.jsx("h3",{className:`
        text-lg
        font-semibold
        ${n.text}
        mb-2
        group-hover:text-gray-900
        transition-colors
        duration-300
      `,children:t}),e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors duration-300",children:r}),e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-white/20 transition-colors duration-300"})]})},Ie=m.lazy(()=>C(()=>import("./TunnetSectionFixed-BUSHoV68.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Re=m.lazy(()=>C(()=>import("./PaymentsManagement-DC32f09D.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))),Te=m.lazy(()=>C(()=>import("./PropertiesSection-Dq7XNF2v.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]))),$e=m.lazy(()=>C(()=>import("./AdminManagement-DxOj0CHI.js"),__vite__mapDeps([12,1,2,3,4,5,6,7]))),ke=m.lazy(()=>C(()=>import("./ExpenseAnalytics-CCe9st_z.js"),__vite__mapDeps([13,1,2,3,4,5,6,7,8]))),Be=m.lazy(()=>C(()=>import("./ApiDiagnostics-CYFavNuo.js"),__vite__mapDeps([14,1,2,3,4,5,6,7]))),L=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],$=(a,t)=>{if(!a||a.length===0){alert("Aucune donn√©e √† exporter");return}const r=Object.keys(a[0]),s=[r.join(","),...a.map(l=>r.map(d=>{const u=l[d];return typeof u=="string"&&(u.includes(",")||u.includes('"'))?`"${u.replace(/"/g,'""')}"`:u||""}).join(","))].join(`
`),o=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),c=URL.createObjectURL(o);i.setAttribute("href",c),i.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},ne=async()=>{try{const[a,t,r,s,o]=await Promise.all([y.listProperties(),y.listTenants(),y.listBills({limit:1e3}),y.listExpenses(),y.getBillsStats()]),i=a.data?.data||[],c=t.data?.data||[],l=r.data?.data?.bills||[],d=s.data?.data||[],u=o.data?.data||{};if(i.length>0){const g=i.map(n=>({ID:n.id,Titre:n.title||n.name||"",Adresse:n.address||"",Ville:n.city||"",Pays:n.country||"","Loyer Mensuel":n.rent||n.monthly_rent||0,Type:n.type||"",Statut:n.status||"ACTIVE","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));$(g,"proprietes")}if(c.length>0){const g=c.map(n=>({ID:n.id,"Nom Complet":n.fullName||n.full_name||"",Email:n.email||"",T√©l√©phone:n.phone||"",Propri√©t√©:n.propertyName||n.property_name||"",Statut:n.status||n.is_active?"ACTIF":"INACTIF","Date d'Entr√©e":n.move_in_date?new Date(n.move_in_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));$(g,"locataires")}if(l.length>0){const g=l.map(n=>({ID:n.id,Locataire:n.tenantName||n.tenant_name||"",Propri√©t√©:n.propertyName||n.property_name||"",Mois:n.month||"",Loyer:n.rent_amount||n.amount||0,Charges:n.charges||0,Total:n.total_amount||n.amount||0,Statut:n.status==="PAID"?"PAY√â":"EN ATTENTE","Date de Paiement":n.payment_date?new Date(n.payment_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));$(g,"factures")}if(d.length>0){const g=d.map(n=>({ID:n.id,Description:n.description||"",Type:n.type||"",Montant:n.amount||0,Propri√©t√©:n.propertyName||n.property_name||"",Date:n.date?new Date(n.date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));$(g,"depenses")}const x=[{"Total Propri√©t√©s":i.length,"Locataires Actifs":c.filter(g=>g.status==="ACTIVE"||g.is_active).length,"Factures Total":l.length,"Factures Pay√©es":l.filter(g=>g.status==="PAID").length,"Factures En Attente":l.filter(g=>g.status!=="PAID").length,"Revenus Mensuels":u.totalAmount||0,"Total D√©penses":d.reduce((g,n)=>g+(n.amount||0),0),"Date d'Export":new Date().toLocaleDateString("fr-FR")}];$(x,"resume_dashboard"),alert("Exportation termin√©e ! Tous les fichiers CSV ont √©t√© t√©l√©charg√©s.")}catch(a){console.error("Erreur lors de l'exportation:",a),alert("Erreur lors de l'exportation des donn√©es. Veuillez r√©essayer.")}},oe=m.memo(({onError:a})=>{const[t,r]=m.useState({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!0,error:null,lastUpdated:null});return m.useEffect(()=>((async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping API calls"),r(c=>({...c,loading:!1,error:"No authentication token"})),a?.(!0);return}r(c=>({...c,loading:!0,error:null}));const i=await U.getDashboardSummary();r({totalProperties:i.properties.total,activeTenants:i.tenants.active,monthlyRevenue:i.stats.totalAmount||0,pendingBills:i.stats.pendingBills||0,loading:!1,error:null,lastUpdated:i.last_updated}),a?.(!1)}catch(o){console.error("Error fetching statistics:",o);let i="Failed to load statistics";const c=o?.message||"";c.includes("Network error")?i="Network connection error. Please check your internet connection.":c.includes("timeout")?i="Request timeout. Please try again.":c.includes("401")?i="Authentication error. Please login again.":c.includes("500")&&(i="Server error. Please try again later."),r({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!1,error:i,lastUpdated:null}),a?.(!0)}})(),U.startAutoRefresh(120*1e3),()=>{U.stopAutoRefresh()}),[a]),t.loading?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[[1,2,3,4].map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mt-2"})]}),e.jsx("div",{className:"p-3 bg-gray-200 rounded-full w-12 h-12"})]})},s)),e.jsx("div",{className:"col-span-full text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Chargement des statistiques du tableau de bord..."]})})]}):t.error?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-red-600 font-medium",children:t.error}),e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Veuillez rafra√Æchir la page ou v√©rifier votre connexion."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:ne,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Exporter toutes les donn√©es",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Exporter les Donn√©es"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500 nav-hover-lift nav-item-enter-delay-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Propri√©t√©s Totales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 content-fade-in",children:t.totalProperties})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full nav-icon-float",children:e.jsx(V,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Depuis la base de donn√©es"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-green-500 nav-hover-lift nav-item-enter-delay-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Locataires Actifs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 content-fade-in",children:t.activeTenants})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full nav-icon-float-delay",children:e.jsx(O,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Actuellement actifs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-yellow-500 nav-hover-lift nav-item-enter-delay-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus Mensuels"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 content-fade-in",children:["‚Ç¨",t.monthlyRevenue.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full nav-icon-float",children:e.jsx(ae,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("p",{className:"text-xs text-green-600 mt-2",children:"Ce mois-ci"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-red-500 nav-hover-lift nav-item-enter-delay-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Factures en Attente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 content-fade-in",children:t.pendingBills})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full nav-icon-float-delay",children:e.jsx(z,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("p",{className:"text-xs text-red-600 mt-2",children:"N√©cessitent une attention"})]})]}),t.lastUpdated&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Derni√®re mise √† jour : ",t.lastUpdated]})})]})});oe.displayName="RealStatistics";const ie=m.memo(()=>{const[a,t]=m.useState([]),[r,s]=m.useState(!0),[o,i]=m.useState(null);if(m.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping property API calls"),s(!1),i("No authentication token");return}s(!0);const x=(await y.listProperties())?.data||{},g=x.data??x,n=g?.properties||g?.items||g||[],v=(Array.isArray(n)?n:[]).sort((j,N)=>(N.rent||N.monthly_rent||0)-(j.rent||j.monthly_rent||0)).slice(0,3);t(v),i(null)}catch(d){console.error("Error fetching properties:",d),i(d?.userMessage||d?.response?.data?.error||"Failed to load property data"),t([])}finally{s(!1)}})()},[]),r)return e.jsx("div",{className:"space-y-4",children:[1,2,3].map(l=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},l))});if(o)return e.jsx("div",{className:"text-red-600 text-center py-4",children:o});if(a.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-4",children:"Aucune propri√©t√© trouv√©e"});const c=["bg-green-500","bg-blue-500","bg-yellow-500"];return e.jsx("div",{className:"space-y-4",children:a.map((l,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 ${c[d]} rounded-full mr-3`}),e.jsx("span",{className:"font-medium",children:l.title||l.name||`Property ${l.id}`})]}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["‚Ç¨",l.rent||l.monthly_rent||0,"/mo"]})]},l.id))})});ie.displayName="RealPropertyPerformance";const Le=()=>{const[a,t]=m.useState([]),[r,s]=m.useState(!0),[o,i]=m.useState(null);m.useEffect(()=>{(async()=>{try{s(!0);const[x,g]=await Promise.all([y.listTenants(),y.listBills({limit:5,sort:"created_at",order:"DESC"})]),n=x?.data||{},p=n.data??n,v=p?.tenants||p?.items||p||[],j=Array.isArray(v)?v:[],N=g?.data||{},S=N.data??N,E=S?.bills||S?.items||S||[],R=Array.isArray(E)?E:[],P=[];j.slice(0,2).forEach(h=>{P.push({id:`tenant-${h.id??Math.random().toString(36).slice(2)}`,type:"tenant",message:"New tenant registered",detail:`${h.fullName||h.full_name||"Tenant"} moved into ${h.propertyName||h.property_name||"property"}`,time:h.created_at||h.createdAt||new Date().toISOString(),color:"blue"})}),R.slice(0,2).forEach(h=>{const f=h.total_amount??h.amount??0;P.push({id:`bill-${h.id??Math.random().toString(36).slice(2)}`,type:"payment",message:h.status==="PAID"?"Payment received":"Bill generated",detail:h.status==="PAID"?`‚Ç¨${f} from ${h.tenantName||h.tenant_name||"tenant"}`:`‚Ç¨${f} bill for ${h.tenantName||h.tenant_name||"tenant"}`,time:h.created_at||h.createdAt||new Date().toISOString(),color:h.status==="PAID"?"green":"yellow"})}),P.sort((h,f)=>new Date(f.time).getTime()-new Date(h.time).getTime()),t(P.slice(0,3)),i(null)}catch(x){console.error("Error fetching recent activity:",x),i(x?.userMessage||x?.response?.data?.error||"Failed to load recent activity"),t([])}finally{s(!1)}})()},[]);const c=u=>{const x=new Date(u),n=Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60));return n<1?"Just now":n<24?`${n} hours ago`:`${Math.floor(n/24)} days ago`};if(r)return e.jsx("div",{className:"space-y-3",children:[1,2,3].map(u=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-48"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},u))});if(o)return e.jsx("div",{className:"text-red-600 text-center py-4",children:o});if(a.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-4",children:"Aucune activit√© r√©cente"});const l=u=>{switch(u){case"blue":return"bg-blue-50";case"green":return"bg-green-50";case"yellow":return"bg-yellow-50";default:return"bg-gray-50"}},d=u=>{switch(u){case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"space-y-3",children:a.map(u=>e.jsxs("div",{className:`flex items-center p-3 ${l(u.color)} rounded-lg`,children:[e.jsx("div",{className:`w-2 h-2 ${d(u.color)} rounded-full mr-3`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:u.message}),e.jsx("p",{className:"text-xs text-gray-600",children:u.detail})]}),e.jsx("span",{className:"text-xs text-gray-500",children:c(u.time)})]},u.id))})},Oe=()=>{const[a,t]=m.useState(!0),[r,s]=m.useState([]),[o,i]=m.useState([]);return m.useEffect(()=>{(async()=>{try{t(!0),console.log("Fetching expense data...");const d=(await y.listExpenses()).data?.data||[];if(console.log("Expense response:",d),console.log("Expenses data:",d),!d||d.length===0){console.log("No expenses found, using default data"),s([{name:"Maintenance",value:1200},{name:"Utilities",value:800},{name:"Insurance",value:400}]),i([{name:"2024-10",value:2400},{name:"2024-11",value:1800},{name:"2024-12",value:2200}]),t(!1);return}const u={},x={};for(const n of d){const p=(n.type||"Misc").toString();u[p]=(u[p]||0)+Number(n.amount||0);const v=(()=>{const j=new Date(n.date||n.created_at||new Date),N=String(j.getMonth()+1).padStart(2,"0");return`${j.getFullYear()}-${N}`})();x[v]=(x[v]||0)+Number(n.amount||0)}s(Object.keys(u).map(n=>({name:n,value:u[n]})));const g=Object.keys(x).sort().slice(-6);i(g.map(n=>({name:n,value:x[n]}))),console.log("Expense data processed successfully")}catch(l){console.error("Error loading expenses:",l),s([{name:"Maintenance",value:1200},{name:"Utilities",value:800},{name:"Insurance",value:400}]),i([{name:"2024-10",value:2400},{name:"2024-11",value:1800},{name:"2024-12",value:2200}])}finally{t(!1)}})()},[]),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Expense Breakdown (Type)"}),a?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des donn√©es de d√©penses‚Ä¶"}):r.length>0?e.jsx(Y,{width:"100%",height:260,children:e.jsxs(Z,{children:[e.jsx(Q,{data:r,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:c,percent:l})=>`${c} ${(l*100).toFixed(0)}%`,children:r.map((c,l)=>e.jsx(ee,{fill:L[l%L.length]},l))}),e.jsx(te,{formatter:(c,l)=>[`‚Ç¨${c}`,l]}),e.jsx(se,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("p",{children:"Aucune donn√©e de d√©pense disponible"}),e.jsx("p",{className:"text-xs mt-2",children:"Ajoutez des d√©penses pour voir la r√©partition"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Monthly Expenses (Last 6)"}),a?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des donn√©es mensuelles‚Ä¶"}):o.length>0?e.jsx(Y,{width:"100%",height:260,children:e.jsxs(Z,{children:[e.jsx(Q,{data:o,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:c,percent:l})=>`${c} ${(l*100).toFixed(0)}%`,children:o.map((c,l)=>e.jsx(ee,{fill:L[l%L.length]},l))}),e.jsx(te,{formatter:(c,l)=>[`‚Ç¨${c}`,l]}),e.jsx(se,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("p",{children:"Aucune donn√©e de d√©pense mensuelle"}),e.jsx("p",{className:"text-xs mt-2",children:"Les d√©penses appara√Ætront ici au fil du temps"})]})]})]})},Fe=()=>{const[a,t]=m.useState("overview"),r=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[s,o]=m.useState(null),[i,c]=m.useState(!1),[l,d]=m.useState(!1),u=m.useCallback(h=>{const{section:f,billId:I,tenantId:D,propertyId:k}=h.detail;t(f),I&&localStorage.setItem("selectedBillId",I.toString()),D&&localStorage.setItem("selectedTenantId",D.toString()),k&&localStorage.setItem("selectedPropertyId",k.toString())},[]),x=m.useCallback(h=>{const{billId:f}=h.detail;localStorage.setItem("openReceiptForBill",f.toString()),t("payments")},[]);m.useEffect(()=>(window.addEventListener("navigate-to-section",u),window.addEventListener("open-receipt",x),()=>{window.removeEventListener("navigate-to-section",u),window.removeEventListener("open-receipt",x)}),[u,x]);const g=()=>{o(null),c(!1)},n=()=>e.jsx(m.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(Te,{})}),p=()=>(console.log("renderTunnetContent called, rendering TunnetSectionFixed"),e.jsx(m.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(Ie,{})})),v=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Bienvenue dans la Gestion Immobili√®re"}),e.jsx("p",{className:"text-blue-100",children:"G√©rez vos propri√©t√©s, locataires et finances efficacement"})]}),e.jsx(oe,{onError:d}),l&&e.jsx(Be,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8 min-h-[420px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-xl font-semibold flex items-center",children:[e.jsx(X,{className:"w-5 h-5 mr-2 text-blue-600"}),"Aper√ßu des Revenus"]})}),e.jsx(Oe,{})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(je,{className:"w-5 h-5 mr-2 text-green-600"}),"Performance des Propri√©t√©s"]}),e.jsx(ie,{})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[e.jsx(Ne,{className:"w-5 h-5 mr-2 text-purple-600"}),"Activit√© R√©cente"]}),e.jsx(Le,{})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-100 p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(F,{className:"w-6 h-6 mr-3 text-orange-500"}),"Actions Rapides"]}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:"Gestion Immobili√®re"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(A,{icon:V,title:"Ajouter Propri√©t√©",description:"Cr√©er une nouvelle propri√©t√© dans le syst√®me",onClick:()=>t("properties"),color:"blue",delay:100,className:"card-stagger-1"}),e.jsx(A,{icon:O,title:"Ajouter Locataire",description:"Enregistrer un nouveau locataire",onClick:()=>t("tunnet"),color:"green",delay:200,className:"card-stagger-2"}),e.jsx(A,{icon:z,title:"G√©n√©rer Facture",description:"Cr√©er et envoyer des factures de loyer",onClick:()=>t("payments"),color:"purple",delay:300,className:"card-stagger-3"}),e.jsx(A,{icon:X,title:"Voir Rapports",description:"Analyser les donn√©es et performances",onClick:()=>t("expense-analytics"),color:"orange",delay:400,className:"card-stagger-4"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(A,{icon:J,title:"Param√®tres",description:"Configurer les pr√©f√©rences du syst√®me",onClick:()=>t("settings"),color:"indigo",delay:500,className:"card-stagger-1"}),e.jsx(A,{icon:we,title:"Exporter Donn√©es",description:"T√©l√©charger les donn√©es en CSV",onClick:ne,color:"teal",delay:600,className:"card-stagger-2"}),e.jsx(A,{icon:_e,title:"Aide & Support",description:"Obtenir de l'aide et des informations",onClick:()=>{alert(`Aide Tableau de Bord:

‚Ä¢ Utilisez les Actions Rapides pour naviguer entre les sections
‚Ä¢ Les Statistiques affichent les donn√©es en temps r√©el de votre base de donn√©es
‚Ä¢ L'Activit√© R√©cente affiche les derni√®res mises √† jour des locataires et factures
‚Ä¢ Les Graphiques montrent les r√©partitions et tendances des d√©penses`)},color:"pink",delay:700,className:"card-stagger-3"})]})]})]}),j=()=>e.jsx(m.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(Re,{})}),N=()=>e.jsx(m.Suspense,{fallback:e.jsx(T,{}),children:e.jsx(ke,{})}),S=()=>{const h=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[f,I]=m.useState(h?.name||""),[D,k]=m.useState(h?.email||""),[G,H]=m.useState(!1),[K,B]=m.useState(""),le=async()=>{try{H(!0),B("");const w={};f&&f!==h?.name&&(w.name=f),D&&D!==h?.email&&(w.email=D);const W=await C(()=>import("./api-XfUXylTc.js"),__vite__mapDeps([6,7]));await W.default.updateProfile(w);const q=(await W.default.me())?.data?.data?.admin;q&&localStorage.setItem("user",JSON.stringify(q)),B("Saved"),setTimeout(()=>B(""),3e3)}catch(w){B(w?.response?.data?.error||w?.userMessage||w?.message||"Save failed")}finally{H(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Param√®tres"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Param√®tres du Compte"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"G√©rez vos pr√©f√©rences et param√®tres de compte."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du Profil"}),e.jsx("input",{type:"text",value:f,onChange:w=>I(w.target.value),placeholder:"Entrez votre nom de profil",title:"Nom du profil",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:D,onChange:w=>k(w.target.value),placeholder:"Entrez votre email",title:"Adresse email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:le,disabled:G,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60",children:G?"Enregistrement...":"Enregistrer les Modifications"}),K&&e.jsx("div",{className:"text-sm text-gray-600",children:K}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},className:"w-full md:w-auto bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"Se d√©connecter"})})]})]})]})},E=()=>e.jsx(S,{}),R=()=>e.jsx(m.Suspense,{fallback:e.jsx(T,{}),children:e.jsx($e,{})}),P=()=>{switch(a){case"overview":return v();case"properties":return n();case"tunnet":return p();case"payments":return j();case"expense-analytics":return N();case"settings":return E();case"admin-management":return R();default:return v()}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxs("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 animate-slide-in-left",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsx("h1",{className:"text-display-medium text-gray-900 animate-fade-in",children:"Tableau de Bord"}),e.jsx("div",{className:"mt-2 w-12 h-1 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full animate-expand"})]}),e.jsx("nav",{className:"mt-8 px-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>t("overview"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-1 ${a==="overview"?"text-white bg-gradient-to-r from-blue-600 to-blue-700 border-l-4 border-blue-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-blue-50 hover:text-blue-600 hover:border-l-4 hover:border-blue-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="overview"?"bg-white/20 nav-icon-float":"bg-gray-100 group-hover:bg-blue-100"}`,children:e.jsx(ce,{className:`w-5 h-5 nav-transition ${a==="overview"?"text-white":"text-gray-400 group-hover:text-blue-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="overview"?"text-white":"text-gray-600 group-hover:text-blue-600"}`,children:"Vue d'ensemble"}),a==="overview"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),e.jsxs("button",{onClick:()=>t("properties"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-2 ${a==="properties"?"text-white bg-gradient-to-r from-green-600 to-green-700 border-l-4 border-green-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-green-50 hover:text-green-600 hover:border-l-4 hover:border-green-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="properties"?"bg-white/20 nav-icon-float-delay":"bg-gray-100 group-hover:bg-green-100"}`,children:e.jsx(V,{className:`w-5 h-5 nav-transition ${a==="properties"?"text-white":"text-gray-400 group-hover:text-green-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="properties"?"text-white":"text-gray-600 group-hover:text-green-600"}`,children:"Propri√©t√©s"}),a==="properties"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),e.jsxs("button",{onClick:()=>t("tunnet"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-3 ${a==="tunnet"?"text-white bg-gradient-to-r from-purple-600 to-purple-700 border-l-4 border-purple-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-purple-50 hover:text-purple-600 hover:border-l-4 hover:border-purple-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="tunnet"?"bg-white/20 nav-icon-float":"bg-gray-100 group-hover:bg-purple-100"}`,children:e.jsx(O,{className:`w-5 h-5 nav-transition ${a==="tunnet"?"text-white":"text-gray-400 group-hover:text-purple-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="tunnet"?"text-white":"text-gray-600 group-hover:text-purple-600"}`,children:"Locataires"}),a==="tunnet"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),e.jsxs("button",{onClick:()=>t("payments"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-4 ${a==="payments"?"text-white bg-gradient-to-r from-orange-600 to-orange-700 border-l-4 border-orange-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-orange-50 hover:text-orange-600 hover:border-l-4 hover:border-orange-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="payments"?"bg-white/20 nav-icon-float-delay":"bg-gray-100 group-hover:bg-orange-100"}`,children:e.jsx(z,{className:`w-5 h-5 nav-transition ${a==="payments"?"text-white":"text-gray-400 group-hover:text-orange-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="payments"?"text-white":"text-gray-600 group-hover:text-orange-600"}`,children:"Paiements"}),a==="payments"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),e.jsxs("button",{onClick:()=>t("expense-analytics"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-5 ${a==="expense-analytics"?"text-white bg-gradient-to-r from-indigo-600 to-indigo-700 border-l-4 border-indigo-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-indigo-50 hover:text-indigo-600 hover:border-l-4 hover:border-indigo-200"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="expense-analytics"?"bg-white/20 nav-icon-float":"bg-gray-100 group-hover:bg-indigo-100"}`,children:e.jsx(ae,{className:`w-5 h-5 nav-transition ${a==="expense-analytics"?"text-white":"text-gray-400 group-hover:text-indigo-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="expense-analytics"?"text-white":"text-gray-600 group-hover:text-indigo-600"}`,children:"Analyse des D√©penses"}),a==="expense-analytics"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),e.jsxs("button",{onClick:()=>t("settings"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-6 ${a==="settings"?"text-white bg-gradient-to-r from-gray-600 to-gray-700 border-l-4 border-gray-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-gray-100 hover:text-gray-700 hover:border-l-4 hover:border-gray-300"}`,children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="settings"?"bg-white/20 nav-icon-float-delay":"bg-gray-100 group-hover:bg-gray-200"}`,children:e.jsx(J,{className:`w-5 h-5 nav-transition ${a==="settings"?"text-white":"text-gray-400 group-hover:text-gray-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="settings"?"text-white":"text-gray-600 group-hover:text-gray-700"}`,children:"Param√®tres"}),a==="settings"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]}),r?.role==="SUPER_ADMIN"&&e.jsxs("button",{onClick:()=>t("admin-management"),className:`group w-full flex items-center px-4 py-3 rounded-xl nav-transition nav-hover-lift nav-item-enter-delay-7 ${a==="admin-management"?"text-white bg-gradient-to-r from-red-600 to-red-700 border-l-4 border-red-300 shadow-lg nav-active-glow":"text-gray-600 hover:bg-gradient-to-r hover:from-gray-50 hover:to-red-50 hover:text-red-600 hover:border-l-4 hover:border-red-200"}`,title:"Gestion des Administrateurs",children:[e.jsx("div",{className:`p-2 rounded-lg nav-transition ${a==="admin-management"?"bg-white/20 nav-icon-float":"bg-gray-100 group-hover:bg-red-100"}`,children:e.jsx(de,{className:`w-5 h-5 nav-transition ${a==="admin-management"?"text-white":"text-gray-400 group-hover:text-red-600"}`})}),e.jsx("span",{className:`ml-3 font-medium nav-transition ${a==="admin-management"?"text-white":"text-gray-600 group-hover:text-red-600"}`,children:"Gestion Administrateurs"}),a==="admin-management"&&e.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full nav-active-pulse"})]})]})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4 content-fade-in",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center flex-1 max-w-lg nav-item-enter-delay-1",children:e.jsxs("div",{className:"relative w-full group",children:[e.jsx(me,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 group-focus-within:text-blue-500 nav-transition"}),e.jsx("input",{type:"text",placeholder:"Rechercher","aria-label":"Rechercher des propri√©t√©s",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 nav-transition nav-hover-lift form-input"})]})}),e.jsx("div",{className:"flex items-center space-x-4 nav-item-enter-delay-2",children:e.jsxs("div",{className:"flex items-center space-x-3 hover:bg-gray-50 p-2 rounded-lg nav-transition nav-hover-lift cursor-pointer","aria-label":"Aller aux Param√®tres",onClick:()=>t("settings"),children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-sm hover:ring-2 hover:ring-blue-300 nav-transition nav-hover-scale",children:(r?.name||r?.fullName||"U").charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("div",{className:"text-label-large text-gray-900",children:r?.name||r?.fullName||"Utilisateur"}),e.jsx("div",{className:"text-label-medium text-gray-500",children:r?.role||"Administrateur"})]})]})})]})}),e.jsx("div",{className:"p-6 content-scale-in",children:P()})]}),i&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-y-auto transform animate-modal-slide-up",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-heading-large",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:s.rating}),e.jsxs("span",{className:"ml-1 card-subtitle",children:["(",s.reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center card-subtitle",children:[e.jsx(ue,{className:"w-4 h-4 mr-1"}),s.location]})]})]}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-all duration-200 transform hover:scale-110","aria-label":"Close property details",children:e.jsx(he,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-80 object-cover rounded-lg"})}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.images.slice(1,5).map((h,f)=>e.jsx("img",{src:h,alt:`${s.title} ${f+2}`,className:"w-full h-36 object-cover rounded-lg"},f))})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-semibold text-gray-900",children:[s.propertyDetails.propertyType," hosted by ",s.host.name]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.tagColor==="orange"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:s.tag})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.guests," guests"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.bedrooms," bedrooms"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xe,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.bathrooms," bathrooms"]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"What this place offers"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.amenities.map((h,f)=>{const I=D=>{switch(D.toLowerCase()){case"wifi":return e.jsx(be,{className:"w-5 h-5"});case"tv":return e.jsx(ye,{className:"w-5 h-5"});case"parking":return e.jsx(ve,{className:"w-5 h-5"});case"coffee maker":return e.jsx(fe,{className:"w-5 h-5"});default:return e.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded"})}};return e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg",children:[I(h),e.jsx("span",{className:"text-gray-700",children:h})]},f)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Property Type"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.propertyType})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Size"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.size})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-in"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.checkIn})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-out"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.checkOut})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("img",{src:s.host.avatar,alt:s.host.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Hosted by ",s.host.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.host.joinDate})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"price-large",children:[s.price,"‚Ç¨"]}),e.jsx("span",{className:"text-body-small text-gray-500 ml-1",children:"mois"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:s.rating})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Check-in Date"}),e.jsx("input",{type:"date",placeholder:"Select check-in date",title:"Check-in date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Lease Duration"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Lease duration",children:[e.jsx("option",{children:"3 months"}),e.jsx("option",{children:"6 months"}),e.jsx("option",{children:"12 months"}),e.jsx("option",{children:"Month by month"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Room Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Room type",children:[e.jsx("option",{children:"Private room"}),e.jsx("option",{children:"Shared room"}),e.jsx("option",{children:"Master room"})]})]}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors btn-text",children:"Apply Now"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Add to favorites",children:e.jsx(pe,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Application review required"})})]})]})})]})]})]})})]})},Ke=Object.freeze(Object.defineProperty({__proto__:null,default:Fe},Symbol.toStringTag,{value:"Module"}));export{Ke as D,U as d,Ce as n};
