const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TunnetSectionFixed-BIfWqHZl.js","assets/index-BRkigiy4.js","assets/router-DUq0sin2.js","assets/vendor-Bzgz95E1.js","assets/icons-ByKMif1I.js","assets/index-BolW42S6.css","assets/api-DQwSXtBv.js","assets/utils-B9HHbEsj.js","assets/charts-DdKZH6bc.js","assets/payments-animations-DEMUWgxw.css","assets/PaymentsManagement-DeTqkt-r.js","assets/PropertiesSection-CAfMrod3.js","assets/AdminManagement-DRmwi1X_.js","assets/ExpenseAnalytics-BV4ZFLxl.js","assets/ExpenseAnalysis-rp6Tb-2w.js","assets/ApiDiagnostics-CDsgl-2U.js"])))=>i.map(i=>d[i]);
import{j as e,L as G,_ as z}from"./index-BRkigiy4.js";import{r as d}from"./router-DUq0sin2.js";import k from"./api-DQwSXtBv.js";import{c as W,X as oe,d as he,e as ge,f as ke,g as xe,B as X,U as J,C as Q,D as de,h as ee,S as pe,i as Ie,j as ne,k as Re,l as Te,m as $e,n as Be,o as Fe,p as Le,q as Me,W as Oe,r as we,s as ze,t as Ue,u as Ve}from"./icons-ByKMif1I.js";import{R as fe,P as ye,a as be,C as ve,T as je,L as Ne}from"./charts-DdKZH6bc.js";const T=(o,t={})=>{const s={...{year:"numeric",month:"long",day:"numeric",timeZone:"Europe/Paris"},...t};try{return(typeof o=="string"?new Date(o):o).toLocaleDateString("fr-FR",s)}catch(r){return console.error("Error formatting date:",r),"Date invalide"}},qe=(o,t={})=>{const s={...{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"},...t};try{return(typeof o=="string"?new Date(o):o).toLocaleString("fr-FR",s)}catch(r){return console.error("Error formatting date and time:",r),"Date et heure invalides"}},ie=(o={})=>qe(new Date,o),He=o=>{try{const t=typeof o=="string"?new Date(o):o,a=new Date;return a.setHours(0,0,0,0),t.setHours(0,0,0,0),t<a}catch(t){return console.error("Error checking if date is overdue:",t),!1}},Ge=o=>{try{const t=typeof o=="string"?new Date(o):o,a=new Date;a.setHours(0,0,0,0),t.setHours(0,0,0,0);const s=t-a;return Math.ceil(s/(1e3*60*60*24))}catch(t){return console.error("Error calculating days until due:",t),0}},B=(o,t="EUR")=>{try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t}).format(o)}catch(a){return console.error("Error formatting currency:",a),`${o} ‚Ç¨`}},_e=()=>"http://192.168.1.109:4002/api".replace("/api",""),Ke=o=>{if(!o||typeof o!="string"||!o.trim())return console.warn("‚ö†Ô∏è Empty or invalid URL provided to normalizePhotoUrl:",o),"";const t=o.trim();if(t.startsWith("http://")||t.startsWith("https://"))return t;const a=_e();if(t.startsWith("/uploads"))return`${a}${t}`;if(t.startsWith("uploads/"))return`${a}/${t}`;const s=t.startsWith("/")?t.substring(1):t;return`${a}/uploads/${s}`};class We{cache;cacheTimeout;refreshInterval;isRefreshing;constructor(){this.cache=new Map,this.cacheTimeout=300*1e3,this.refreshInterval=null,this.isRefreshing=!1}isCacheValid(t){const a=this.cache.get(t);return a?Date.now()-a.timestamp<this.cacheTimeout:!1}getCachedData(t){const a=this.cache.get(t);return a?a.data:null}setCachedData(t,a){this.cache.set(t,{data:a,timestamp:Date.now()})}clearCache(){this.cache.clear()}startAutoRefresh(t=120*1e3){this.refreshInterval&&clearInterval(this.refreshInterval),this.refreshInterval=setInterval(()=>{this.refreshAllData()},t),console.log("üîÑ Auto-refresh started with interval:",t/1e3,"seconds")}stopAutoRefresh(){this.refreshInterval&&(clearInterval(this.refreshInterval),this.refreshInterval=null,console.log("‚èπÔ∏è Auto-refresh stopped"))}async refreshAllData(){if(!this.isRefreshing){this.isRefreshing=!0,console.log("üîÑ Refreshing all data...");try{const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills(),this.fetchBillsStats(),this.fetchExpenses()]),a=["Properties","Tenants","Bills","Stats","Expenses"];t.forEach((s,r)=>{s.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${a[r]} refresh failed:`,s.reason)}),console.log("‚úÖ Data refresh completed")}catch(t){console.error("‚ùå Error refreshing data:",t)}finally{this.isRefreshing=!1}}}async fetchProperties(){const t="properties";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üè† Fetching properties with photos...");const a=await k.listProperties();if(a.data?.success&&a.data?.data?.properties){const s=await Promise.all(a.data.data.properties.map(async r=>{let i=[];try{const u=await k.getPropertyPhotos(r.id);u.data?.success&&u.data?.data?.photos&&(i=u.data.data.photos.map(g=>({...g,display_url:Ke(g.file_url),created_at_fr:T(g.created_at),updated_at_fr:g.updated_at?T(g.updated_at):null})))}catch(u){console.warn(`‚ö†Ô∏è Could not fetch photos for property ${r.id}:`,u)}return{...r,photos:i,primary_photo:i.find(u=>u.is_primary)||i[0]||null,created_at_fr:T(r.created_at),updated_at_fr:r.updated_at?T(r.updated_at):null,rent_formatted:B(r.rent||r.monthly_rent||0),is_active:r.status==="ACTIVE",status_fr:r.status==="ACTIVE"?"Actif":"Inactif",display_title:r.title||r.name||"Propri√©t√© sans nom",display_address:this.formatAddress(r),photo_count:i.length,has_photos:i.length>0}}));return this.setCachedData(t,s),console.log("‚úÖ Properties fetched with photos:",s.length),s}throw new Error("Invalid response structure")}catch(a){throw console.error("‚ùå Error fetching properties:",a),a}}async fetchTenants(){const t="tenants";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üë• Fetching tenants...");const a=await k.listTenants();if(a.data?.success&&a.data?.data?.tenants){const s=a.data.data.tenants.map(r=>({...r,created_at_fr:T(r.created_at),updated_at_fr:r.updated_at?T(r.updated_at):null,move_in_date_fr:r.move_in_date?T(r.move_in_date):null,move_out_date_fr:r.move_out_date?T(r.move_out_date):null,rent_amount_formatted:r.rent_amount?B(r.rent_amount):null,is_active:r.status==="ACTIVE"||r.is_active===!0,status_fr:r.status==="ACTIVE"||r.is_active===!0?"Actif":"Inactif",display_name:r.fullName||r.full_name||r.name||"Locataire"}));return this.setCachedData(t,s),console.log("‚úÖ Tenants fetched:",s.length),s}throw new Error("Invalid response structure")}catch(a){throw console.error("‚ùå Error fetching tenants:",a),a}}async fetchBills(t={}){const a=`bills_${JSON.stringify(t)}`;if(this.isCacheValid(a))return this.getCachedData(a);try{console.log("üí≥ Fetching bills...");const s=await k.listBills(t);if(s.data?.success&&s.data?.data?.bills){const r=s.data.data.bills.map(i=>{const u=i.payment_date?new Date(i.payment_date):null,g=He(i.due_date),c=Ge(i.due_date);return{...i,created_at_fr:T(i.created_at),due_date_fr:T(i.due_date),payment_date_fr:u?T(u):null,amount_formatted:B(i.amount||i.total_amount||0),rent_amount_formatted:i.rent_amount?B(i.rent_amount):null,charges_formatted:i.charges?B(i.charges):null,total_amount_formatted:B(i.total_amount||i.amount||0),is_overdue:g,days_until_due:c,status_fr:this.getBillStatusFrench(i.status),priority:this.getBillPriority(i.status,g,c),tenant_display_name:i.tenant?.name||i.tenant?.fullName||"Locataire",property_display_name:i.property?.title||i.property?.name||"Propri√©t√©"}});return this.setCachedData(a,r),console.log("‚úÖ Bills fetched:",r.length),r}throw new Error("Invalid response structure")}catch(s){throw console.error("‚ùå Error fetching bills:",s),s}}async fetchBillsStats(){const t="bills_stats";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üìä Fetching bills statistics...");const a=await k.getBillsStats();if(a.data?.success&&a.data?.data){const s=a.data.data,r={...s,totalAmount_formatted:B(s.totalAmount||0),paidAmount_formatted:B(s.paidAmount||0),pendingAmount_formatted:B(s.pendingAmount||0),overdueAmount_formatted:B(s.overdueAmount||0),totalBills_fr:`${s.totalBills||0} facture${(s.totalBills||0)>1?"s":""}`,paidBills_fr:`${s.paidBills||0} facture${(s.paidBills||0)>1?"s":""} pay√©e${(s.paidBills||0)>1?"s":""}`,pendingBills_fr:`${s.pendingBills||0} facture${(s.pendingBills||0)>1?"s":""} en attente`,overdueBills_fr:`${s.overdueBills||0} facture${(s.overdueBills||0)>1?"s":""} en retard`,last_updated:ie(),last_updated_timestamp:new Date().toISOString()};return this.setCachedData(t,r),console.log("‚úÖ Bills statistics fetched"),r}throw new Error("Invalid response structure")}catch(a){throw console.error("‚ùå Error fetching bills statistics:",a),a}}async fetchExpenses(){const t="expenses";if(this.isCacheValid(t))return this.getCachedData(t);try{console.log("üí∞ Fetching expenses...");const a=await k.listExpenses();if(a.data?.success&&a.data?.data?.expenses){const s=a.data.data.expenses.map(r=>({...r,created_at_fr:T(r.created_at),date_fr:r.date?T(r.date):null,amount_formatted:B(r.amount||0),category_fr:this.getExpenseCategoryFrench(r.category),status_fr:r.status==="APPROVED"?"Approuv√©":"En attente"}));return this.setCachedData(t,s),console.log("‚úÖ Expenses fetched:",s.length),s}throw new Error("Invalid response structure")}catch(a){throw console.error("‚ùå Error fetching expenses:",a),a}}getBillStatusFrench(t){return{PENDING:"En attente",PAID:"Pay√©",OVERDUE:"En retard",RECEIPT_SENT:"Re√ßu envoy√©",CANCELLED:"Annul√©"}[t]||t}getBillPriority(t,a,s){return t==="PAID"?"low":a?"critical":s<=3?"high":s<=7?"medium":"low"}getExpenseCategoryFrench(t){return{MAINTENANCE:"Maintenance",REPAIRS:"R√©parations",UTILITIES:"Services publics",INSURANCE:"Assurance",TAXES:"Taxes",ADMINISTRATIVE:"Administratif",OTHER:"Autre"}[t]||t}async getDashboardSummary(){try{console.log("üìä Fetching dashboard summary...");const t=await Promise.allSettled([this.fetchProperties(),this.fetchTenants(),this.fetchBills({limit:10}),this.fetchBillsStats(),this.fetchExpenses()]),a=t[0].status==="fulfilled"?t[0].value:[],s=t[1].status==="fulfilled"?t[1].value:[],r=t[2].status==="fulfilled"?t[2].value:[],i=t[3].status==="fulfilled"?t[3].value:{totalBills:0,totalAmount:0,pendingBills:0,overdueBills:0,statusBreakdown:[]},u=t[4].status==="fulfilled"?t[4].value:[];t.forEach((c,m)=>{c.status==="rejected"&&console.warn(`‚ö†Ô∏è  ${["Properties","Tenants","Bills","Stats","Expenses"][m]} API failed:`,c.reason)});const g={properties:{total:a.length,active:a.filter(c=>c.is_active).length,data:a},tenants:{total:s.length,active:s.filter(c=>c.is_active||c.status==="ACTIVE").length,data:s},bills:{total:r.length,pending:r.filter(c=>c.status==="PENDING").length,overdue:r.filter(c=>c.is_overdue||c.status==="OVERDUE").length,paid:r.filter(c=>c.status==="PAID").length,data:r},stats:i,expenses:{total:u.length,data:u},last_updated:ie(),last_updated_timestamp:new Date().toISOString()};return console.log("‚úÖ Dashboard summary fetched"),g}catch(t){throw console.error("‚ùå Error fetching dashboard summary:",t),t}}getNewBillDefaults(){return{tenant_id:0,property_id:0,amount:0,month:new Date().toISOString().slice(0,7),due_date:new Date(Date.now()+720*60*60*1e3).toISOString(),description:"Paiement de loyer mensuel",status:"PENDING"}}getBackendBaseUrl(){return _e()}formatAddress(t){const a=[];return t.address&&a.push(t.address),t.city&&a.push(t.city),t.postal_code&&a.push(t.postal_code),a.join(", ")||"Adresse non sp√©cifi√©e"}getSystemStatus(){return{cache_size:this.cache.size,is_auto_refresh_active:!!this.refreshInterval,is_refreshing:this.isRefreshing,current_time:ie(),timezone:"Europe/Paris",backend_base_url:this.getBackendBaseUrl()}}}const le=new We,q=({icon:o,title:t,description:a,onClick:s,color:r,delay:i=0,className:u=""})=>{const[g,c]=d.useState([]),m=d.useRef(null),v=_=>{const S=m.current?.getBoundingClientRect();if(S){const R=_.clientX-S.left,I=_.clientY-S.top,y={id:Date.now(),x:R,y:I};c(E=>[...E,y]),setTimeout(()=>{c(E=>E.filter($=>$.id!==y.id))},600)}s()},n=(_=>{const S={blue:{bg:"bg-blue-50",hover:"hover:bg-blue-100",icon:"text-blue-600",text:"text-blue-800",gradient:"gradient-bg-blue"},green:{bg:"bg-green-50",hover:"hover:bg-green-100",icon:"text-green-600",text:"text-green-800",gradient:"gradient-bg-green"},purple:{bg:"bg-purple-50",hover:"hover:bg-purple-100",icon:"text-purple-600",text:"text-purple-800",gradient:"gradient-bg-purple"},orange:{bg:"bg-orange-50",hover:"hover:bg-orange-100",icon:"text-orange-600",text:"text-orange-800",gradient:"gradient-bg-orange"},indigo:{bg:"bg-indigo-50",hover:"hover:bg-indigo-100",icon:"text-indigo-600",text:"text-indigo-800",gradient:"gradient-bg-blue"},teal:{bg:"bg-teal-50",hover:"hover:bg-teal-100",icon:"text-teal-600",text:"text-teal-800",gradient:"gradient-bg-green"},pink:{bg:"bg-pink-50",hover:"hover:bg-pink-100",icon:"text-pink-600",text:"text-pink-800",gradient:"gradient-bg-purple"}};return S[_]||S.blue})(r);return e.jsxs("button",{ref:m,onClick:v,className:`
        professional-card
        relative
        p-6
        ${n.bg}
        ${n.hover}
        rounded-xl
        text-center
        group
        overflow-hidden
        border
        border-gray-200
        hover:border-gray-300
        focus:outline-none
        focus:ring-2
        focus:ring-blue-500
        focus:ring-offset-2
        transition-all
        duration-300
        ease-out
        ${u}
      `,style:{animationDelay:`${i}ms`,animation:"textSlideUp 0.5s ease-out forwards"},title:a,children:[g.map(_=>e.jsx("span",{className:"ripple",style:{left:_.x-10,top:_.y-10,width:20,height:20}},_.id)),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:`
          professional-card-icon
          w-16
          h-16
          mx-auto
          rounded-full
          flex
          items-center
          justify-center
          ${n.gradient}
          shadow-lg
          group-hover:shadow-xl
          transition-all
          duration-300
        `,children:e.jsx(o,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:`
          absolute
          inset-0
          w-16
          h-16
          mx-auto
          rounded-full
          ${n.gradient}
          opacity-0
          group-hover:opacity-20
          blur-xl
          transition-opacity
          duration-300
        `})]}),e.jsx("h3",{className:`
        text-lg
        font-semibold
        ${n.text}
        mb-2
        group-hover:text-gray-900
        transition-colors
        duration-300
      `,children:t}),e.jsx("p",{className:"text-sm text-gray-600 group-hover:text-gray-700 transition-colors duration-300",children:a}),e.jsx("div",{className:"absolute inset-0 rounded-xl border-2 border-transparent group-hover:border-white/20 transition-colors duration-300"})]})},Je=()=>{const[o,t]=d.useState([]),[a,s]=d.useState(!1),[r,i]=d.useState(!0),[u,g]=d.useState(0),[c,m]=d.useState("default"),[v,f]=d.useState(new Set);d.useEffect(()=>{"Notification"in window&&(m(Notification.permission),Notification.permission==="default"&&Notification.requestPermission().then(l=>{m(l),l==="granted"&&console.log("‚úÖ Notifications push activ√©es")}))},[]),d.useEffect(()=>{n();const l=setInterval(n,120*1e3);return()=>clearInterval(l)},[]);const n=async()=>{try{i(!0);const[l,p]=await Promise.all([k.listBills({limit:100}),k.listTenants()]),C=l?.data?.data?.bills||[],D=p?.data?.data||[],N=[],P=new Date;P.setHours(0,0,0,0),C.filter(h=>{if(h.status==="PAID"||!h.due_date)return!1;const j=new Date(h.due_date);return j.setHours(0,0,0,0),j<P}).forEach(h=>{const j=new Date(h.due_date),x=Math.floor((P.getTime()-j.getTime())/(1e3*60*60*24)),b=h.total_amount||h.amount||0;let A="medium";x>30||b>1e3?A="high":x>7||b>500?A="medium":A="low",N.push({id:`overdue-${h.id}`,type:"overdue",title:x>30?"‚ö†Ô∏è Facture Tr√®s en Retard":"Facture en Retard",message:`Facture de ‚Ç¨${b.toFixed(2)} pour ${h.tenant?.name||"Locataire"} - ${x} jour(s) de retard`,action:{section:"payments",id:h.id},timestamp:j,read:!1,priority:A,category:"bills",amount:b,daysOverdue:x})}),C.filter(h=>{if(h.status==="PAID"||!h.due_date)return!1;const j=new Date(h.due_date);j.setHours(0,0,0,0);const x=Math.floor((j.getTime()-P.getTime())/(1e3*60*60*24));return x>=0&&x<=3}).forEach(h=>{const j=new Date(h.due_date),x=Math.floor((j.getTime()-P.getTime())/(1e3*60*60*24)),b=h.total_amount||h.amount||0,A=x===0?"high":x===1?"medium":"low";N.push({id:`upcoming-${h.id}`,type:"upcoming",title:x===0?"üî¥ √âch√©ance Aujourd'hui":x===1?"‚ö†Ô∏è √âch√©ance Demain":"√âch√©ance Proche",message:`Facture de ‚Ç¨${b.toFixed(2)} pour ${h.tenant?.name||"Locataire"} - ${x===0?"Aujourd'hui":`Dans ${x} jour(s)`}`,action:{section:"payments",id:h.id},timestamp:j,read:!1,priority:A,category:"bills",amount:b,daysUntilDue:x})}),D.forEach(h=>{const j=h.lease_end||h.lease_end_date;if(j){const x=new Date(j);x.setHours(0,0,0,0);const b=Math.floor((x.getTime()-P.getTime())/(1e3*60*60*24));if(b>=0&&b<=30){const A=b<=7?"high":b<=15?"medium":"low";N.push({id:`lease-expiry-${h.id}`,type:b<=7?"upcoming":"info",title:b===0?"üî¥ Contrat Expire Aujourd'hui":b<=7?"‚ö†Ô∏è Contrat Expire Bient√¥t":"Contrat qui Expire",message:`Le contrat de ${h.name||h.fullName||"Locataire"} expire ${b===0?"aujourd'hui":`dans ${b} jour(s)`}`,action:{section:"tunnet",id:h.id},timestamp:x,read:!1,priority:A,category:"leases",daysUntilDue:b})}}});const V={high:3,medium:2,low:1};N.sort((h,j)=>{const x=V[h.priority||"low"],b=V[j.priority||"low"];return x!==b?b-x:j.timestamp.getTime()-h.timestamp.getTime()});const Y=new Set(N.map(h=>h.id)),M=N.filter(h=>!v.has(h.id));if(f(Y),c==="granted"&&M.length>0){const h=M.filter(x=>x.priority==="high"),j=M.filter(x=>x.priority==="medium"&&(x.type==="overdue"||x.daysUntilDue===0));if(h.forEach(x=>{E(x)}),j.length>0&&j.slice(0,3).forEach(x=>{E(x)}),M.length>5){const x=M.filter(A=>A.type==="overdue").length,b=M.filter(A=>A.type==="upcoming").length;(x>0||b>0)&&setTimeout(()=>{E({id:"summary",type:"info",title:"R√©sum√© des Notifications",message:`${x>0?`${x} facture(s) en retard. `:""}${b>0?`${b} √©ch√©ance(s) proche(s).`:""}`,timestamp:new Date,read:!1,priority:"medium",category:"system"})},2e3)}}t(N),g(N.filter(h=>!h.read).length)}catch(l){console.error("Error fetching notifications:",l)}finally{i(!1)}},_=l=>{t(p=>{const C=p.map(D=>D.id===l?{...D,read:!0}:D);return g(C.filter(D=>!D.read).length),C})},S=()=>{t(l=>l.map(p=>({...p,read:!0}))),g(0)},R=l=>{if(_(l.id),l.action){const p=new CustomEvent("navigate-to-section",{detail:{section:l.action.section,billId:l.action.id,tenantId:l.action.id}});window.dispatchEvent(p),s(!1)}},I=l=>{switch(l){case"overdue":return e.jsx(ge,{className:"w-5 h-5 text-red-600"});case"upcoming":return e.jsx(ke,{className:"w-5 h-5 text-yellow-600"});case"info":return e.jsx(ge,{className:"w-5 h-5 text-blue-600"});case"success":return e.jsx(he,{className:"w-5 h-5 text-green-600"});default:return e.jsx(W,{className:"w-5 h-5 text-gray-600"})}},y=l=>{const C=new Date().getTime()-l.getTime(),D=Math.floor(C/(1e3*60*60*24));return D===0?"Aujourd'hui":D===1?"Hier":D<7?`Il y a ${D} jours`:l.toLocaleDateString("fr-FR")},E=l=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const p=l.type==="overdue"?"/icon-error.png":l.type==="upcoming"?"/icon-warning.png":"/icon-info.png",C={body:l.message,icon:p,badge:"/icon-badge.png",tag:l.id,requireInteraction:l.type==="overdue",silent:!1,data:{notificationId:l.id,section:l.action?.section,id:l.action?.id}},D=new Notification(l.title,C);D.onclick=()=>{if(window.focus(),l.action){const N=new CustomEvent("navigate-to-section",{detail:{section:l.action.section,billId:l.action.id,tenantId:l.action.id}});window.dispatchEvent(N)}D.close()},l.type!=="overdue"&&setTimeout(()=>{D.close()},5e3)},$=async()=>{if(!("Notification"in window)){alert("Votre navigateur ne supporte pas les notifications");return}const l=await Notification.requestPermission();m(l),l==="granted"&&new Notification("Notifications activ√©es",{body:"Vous recevrez des alertes pour les factures en retard et les √©ch√©ances importantes.",icon:"/icon-success.png"})};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>s(!a),className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Notifications",children:[e.jsx(W,{className:"w-6 h-6"}),u>0&&e.jsx("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:u>9?"9+":u})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-96 bg-white rounded-lg shadow-2xl border border-gray-200 z-50 max-h-[600px] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),u>0&&e.jsx("span",{className:"px-2 py-0.5 bg-red-500 text-white text-xs font-medium rounded-full",children:u})]}),e.jsx("button",{onClick:l=>{l.stopPropagation(),s(!1)},className:"text-gray-400 hover:text-gray-600 p-1 rounded hover:bg-gray-100","aria-label":"Fermer",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-gray-200",children:[u>0&&e.jsx("button",{onClick:l=>{l.stopPropagation(),S()},className:"text-xs text-blue-600 hover:text-blue-700 font-medium px-2 py-1 rounded hover:bg-blue-50",children:"Tout marquer lu"}),c!=="granted"&&e.jsxs("button",{onClick:l=>{l.stopPropagation(),$()},className:"text-xs text-green-600 hover:text-green-700 font-medium px-2 py-1 rounded hover:bg-green-50 flex items-center gap-1",title:"Activer les notifications push",children:[e.jsx(W,{className:"w-3 h-3"}),"Activer les notifications"]}),c==="granted"&&e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),"Notifications activ√©es"]})]})]}),e.jsx("div",{className:"overflow-y-auto flex-1",style:{maxHeight:"500px"},children:r?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-600 border-t-transparent mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Chargement..."})]}):o.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(W,{className:"w-10 h-10 mx-auto mb-3 text-gray-300"}),e.jsx("p",{className:"text-sm font-medium",children:"Aucune notification"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Vous serez notifi√© des √©v√©nements importants"})]}):e.jsx("div",{className:"divide-y divide-gray-100",children:o.map(l=>e.jsx("div",{onClick:()=>R(l),className:`p-4 cursor-pointer hover:bg-gray-50 transition-colors border-l-4 ${l.read?"opacity-70 bg-gray-50":"bg-white"} ${l.type==="overdue"?"border-l-red-500":l.type==="upcoming"?"border-l-yellow-500":l.type==="info"?"border-l-blue-500":"border-l-green-500"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5 flex-shrink-0",children:I(l.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 leading-tight",children:l.title}),!l.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-1"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 leading-relaxed",children:l.message}),e.jsx("p",{className:"text-xs text-gray-400",children:y(l.timestamp)})]})]})},l.id))})}),o.length>0&&e.jsx("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:l=>{l.stopPropagation(),n()},className:"w-full text-sm text-blue-600 hover:text-blue-700 font-medium py-2 rounded hover:bg-blue-50 transition-colors",children:"Actualiser les notifications"})})]})]})]})},Xe=d.lazy(()=>z(()=>import("./TunnetSectionFixed-BIfWqHZl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Ye=d.lazy(()=>z(()=>import("./PaymentsManagement-DeTqkt-r.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))),Ze=d.lazy(()=>z(()=>import("./PropertiesSection-CAfMrod3.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]))),Qe=d.lazy(()=>z(()=>import("./AdminManagement-DRmwi1X_.js"),__vite__mapDeps([12,1,2,3,4,5,6,7]))),et=d.lazy(()=>z(()=>import("./ExpenseAnalytics-BV4ZFLxl.js"),__vite__mapDeps([13,1,2,3,4,5,6,7]))),tt=d.lazy(()=>z(()=>import("./ExpenseAnalysis-rp6Tb-2w.js"),__vite__mapDeps([14,1,2,3,4,5,6,7,8]))),st=d.lazy(()=>z(()=>import("./ApiDiagnostics-CDsgl-2U.js"),__vite__mapDeps([15,1,2,3,4,5,6,7]))),Z=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884D8","#82CA9D"],K=(o,t)=>{if(!o||o.length===0){alert("Aucune donn√©e √† exporter");return}const a=Object.keys(o[0]),s=[a.join(","),...o.map(g=>a.map(c=>{const m=g[c];return typeof m=="string"&&(m.includes(",")||m.includes('"'))?`"${m.replace(/"/g,'""')}"`:m||""}).join(","))].join(`
`),r=new Blob([s],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),u=URL.createObjectURL(r);i.setAttribute("href",u),i.setAttribute("download",`${t}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)},De=async()=>{try{const[o,t,a,s,r]=await Promise.all([k.listProperties(),k.listTenants(),k.listBills({limit:1e3}),k.listExpenses(),k.getBillsStats()]),i=o.data?.data||[],u=t.data?.data||[],g=a.data?.data?.bills||[],c=s.data?.data||[],m=r.data?.data||{};if(i.length>0){const f=i.map(n=>({ID:n.id,Titre:n.title||n.name||"",Adresse:n.address||"",Ville:n.city||"","Code Postal":n.postal_code||"","Loyer Mensuel":n.rent||n.monthly_rent||0,Type:n.type||"",Statut:n.status||"ACTIVE","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));K(f,"proprietes")}if(u.length>0){const f=u.map(n=>({ID:n.id,"Nom Complet":n.fullName||n.full_name||"",Email:n.email||"",T√©l√©phone:n.phone||"",Propri√©t√©:n.propertyName||n.property_name||"",Statut:n.status||n.is_active?"ACTIF":"INACTIF","Date d'Entr√©e":n.move_in_date?new Date(n.move_in_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));K(f,"locataires")}if(g.length>0){const f=g.map(n=>({ID:n.id,Locataire:n.tenantName||n.tenant_name||"",Propri√©t√©:n.propertyName||n.property_name||"",Mois:n.month||"",Loyer:n.rent_amount||n.amount||0,Charges:n.charges||0,Total:n.total_amount||n.amount||0,Statut:n.status==="PAID"?"PAY√â":"EN ATTENTE","Date de Paiement":n.payment_date?new Date(n.payment_date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));K(f,"factures")}if(c.length>0){const f=c.map(n=>({ID:n.id,Description:n.description||"",Type:n.type||"",Montant:n.amount||0,Propri√©t√©:n.propertyName||n.property_name||"",Date:n.date?new Date(n.date).toLocaleDateString("fr-FR"):"","Date de Cr√©ation":new Date(n.created_at).toLocaleDateString("fr-FR")}));K(f,"depenses")}const v=[{"Total Propri√©t√©s":i.length,"Locataires Actifs":u.filter(f=>f.status==="ACTIVE"||f.is_active).length,"Factures Total":g.length,"Factures Pay√©es":g.filter(f=>f.status==="PAID").length,"Factures En Attente":g.filter(f=>f.status!=="PAID").length,"Revenus Mensuels":m.totalAmount||0,"Total D√©penses":c.reduce((f,n)=>f+(n.amount||0),0),"Date d'Export":new Date().toLocaleDateString("fr-FR")}];K(v,"resume_dashboard"),alert("Exportation termin√©e ! Tous les fichiers CSV ont √©t√© t√©l√©charg√©s.")}catch(o){console.error("Erreur lors de l'exportation:",o),alert("Erreur lors de l'exportation des donn√©es. Veuillez r√©essayer.")}},Ce=d.memo(({onError:o})=>{const[t,a]=d.useState({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!0,error:null,lastUpdated:null});return d.useEffect(()=>((async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping API calls"),a(u=>({...u,loading:!1,error:"No authentication token"})),o?.(!0);return}a(u=>({...u,loading:!0,error:null}));const i=await le.getDashboardSummary();a({totalProperties:i.properties.total,activeTenants:i.tenants.active,monthlyRevenue:i.stats.totalAmount||0,pendingBills:i.stats.pendingBills||0,loading:!1,error:null,lastUpdated:i.last_updated}),o?.(!1)}catch(r){console.error("Error fetching statistics:",r);let i="Failed to load statistics";const u=r?.message||"";u.includes("Network error")?i="Network connection error. Please check your internet connection.":u.includes("timeout")?i="Request timeout. Please try again.":u.includes("401")?i="Authentication error. Please login again.":u.includes("500")&&(i="Server error. Please try again later."),a({totalProperties:0,activeTenants:0,monthlyRevenue:0,pendingBills:0,loading:!1,error:i,lastUpdated:null}),o?.(!0)}})(),le.startAutoRefresh(120*1e3),()=>{le.stopAutoRefresh()}),[o]),t.loading?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[[1,2,3,4].map(s=>e.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 mt-2"})]}),e.jsx("div",{className:"p-3 bg-gray-200 rounded-full w-12 h-12"})]})},s)),e.jsx("div",{className:"col-span-full text-center py-4",children:e.jsxs("div",{className:"inline-flex items-center text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Chargement des statistiques du tableau de bord..."]})})]}):t.error?e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-red-600 font-medium",children:t.error}),e.jsx("p",{className:"text-red-500 text-sm mt-1",children:"Veuillez rafra√Æchir la page ou v√©rifier votre connexion."})]})})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:De,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:"Exporter toutes les donn√©es",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Exporter les Donn√©es"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-blue-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Propri√©t√©s Totales"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.totalProperties})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(X,{className:"w-6 h-6 text-blue-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Depuis la base de donn√©es"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-green-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Locataires Actifs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.activeTenants})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(J,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Actuellement actifs"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-yellow-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus Mensuels"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["‚Ç¨",t.monthlyRevenue.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:e.jsx(de,{className:"w-6 h-6 text-yellow-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ce mois-ci"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border-l-4 border-red-500 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Factures en Attente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.pendingBills})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(Q,{className:"w-6 h-6 text-red-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"N√©cessitent une attention"})]})]}),t.lastUpdated&&e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Derni√®re mise √† jour : ",t.lastUpdated]})})]})});Ce.displayName="RealStatistics";const Se=d.memo(()=>{const[o,t]=d.useState([]),[a,s]=d.useState(!0),[r,i]=d.useState(null);if(d.useEffect(()=>{(async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping property API calls"),s(!1),i("No authentication token");return}s(!0);const v=(await k.listProperties())?.data||{},f=v.data??v,n=f?.properties||f?.items||f||[],S=(Array.isArray(n)?n:[]).sort((R,I)=>(I.rent||I.monthly_rent||0)-(R.rent||R.monthly_rent||0)).slice(0,3);t(S),i(null)}catch(c){console.error("Error fetching properties:",c),i(c?.userMessage||c?.response?.data?.error||"Failed to load property data"),t([])}finally{s(!1)}})()},[]),a)return e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},g))});if(r)return e.jsx("div",{className:"text-red-600 text-center py-4",children:r});if(o.length===0)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-4",children:e.jsx(X,{className:"w-12 h-12 text-blue-600"})}),e.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"Aucune propri√©t√© trouv√©e"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Commencez par ajouter votre premi√®re propri√©t√©"})]});const u=["bg-green-500","bg-blue-500","bg-yellow-500"];return e.jsx("div",{className:"space-y-4",children:o.map((g,c)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 ${u[c]} rounded-full mr-3`}),e.jsx("span",{className:"font-medium",children:g.title||g.name||`Property ${g.id}`})]}),e.jsxs("span",{className:"text-green-600 font-semibold",children:["‚Ç¨",g.rent||g.monthly_rent||0,"/mo"]})]},g.id))})});Se.displayName="RealPropertyPerformance";const at=()=>{const[o,t]=d.useState([]),[a,s]=d.useState(!0),[r,i]=d.useState(null);d.useEffect(()=>{(async()=>{try{s(!0);const[v,f]=await Promise.all([k.listTenants(),k.listBills({limit:5,sort:"created_at",order:"DESC"})]),n=v?.data||{},_=n.data??n,S=_?.tenants||_?.items||_||[],R=Array.isArray(S)?S:[],I=f?.data||{},y=I.data??I,E=y?.bills||y?.items||y||[],$=Array.isArray(E)?E:[],l=[];R.slice(0,2).forEach(p=>{l.push({id:`tenant-${p.id??Math.random().toString(36).slice(2)}`,type:"tenant",message:"New tenant registered",detail:`${p.fullName||p.full_name||"Tenant"} moved into ${p.propertyName||p.property_name||"property"}`,time:p.created_at||p.createdAt||new Date().toISOString(),color:"blue"})}),$.slice(0,2).forEach(p=>{const C=p.total_amount??p.amount??0;l.push({id:`bill-${p.id??Math.random().toString(36).slice(2)}`,type:"payment",message:p.status==="PAID"?"Payment received":"Bill generated",detail:p.status==="PAID"?`‚Ç¨${C} from ${p.tenantName||p.tenant_name||"tenant"}`:`‚Ç¨${C} bill for ${p.tenantName||p.tenant_name||"tenant"}`,time:p.created_at||p.createdAt||new Date().toISOString(),color:p.status==="PAID"?"green":"yellow"})}),l.sort((p,C)=>new Date(C.time).getTime()-new Date(p.time).getTime()),t(l.slice(0,3)),i(null)}catch(v){console.error("Error fetching recent activity:",v),i(v?.userMessage||v?.response?.data?.error||"Failed to load recent activity"),t([])}finally{s(!1)}})()},[]);const u=m=>{const v=new Date(m),n=Math.floor((new Date().getTime()-v.getTime())/(1e3*60*60));return n<1?"Just now":n<24?`${n} hours ago`:`${Math.floor(n/24)} days ago`};if(a)return e.jsx("div",{className:"space-y-3",children:[1,2,3].map(m=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-200 rounded-full mr-3"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-1"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-48"})]}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]},m))});if(r)return e.jsx("div",{className:"text-red-600 text-center py-4",children:r});if(o.length===0)return e.jsx("div",{className:"text-gray-500 text-center py-4",children:"Aucune activit√© r√©cente"});const g=m=>{switch(m){case"blue":return"bg-blue-50";case"green":return"bg-green-50";case"yellow":return"bg-yellow-50";default:return"bg-gray-50"}},c=m=>{switch(m){case"blue":return"bg-blue-500";case"green":return"bg-green-500";case"yellow":return"bg-yellow-500";default:return"bg-gray-500"}};return e.jsx("div",{className:"space-y-3",children:o.map(m=>e.jsxs("div",{className:`flex items-center p-3 ${g(m.color)} rounded-lg`,children:[e.jsx("div",{className:`w-2 h-2 ${c(m.color)} rounded-full mr-3`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:m.message}),e.jsx("p",{className:"text-xs text-gray-600",children:m.detail})]}),e.jsx("span",{className:"text-xs text-gray-500",children:u(m.time)})]},m.id))})},rt=()=>{const[o,t]=d.useState(!0),[a,s]=d.useState([]),[r,i]=d.useState([]),[u,g]=d.useState(0);return d.useEffect(()=>{(async()=>{try{t(!0),console.log("üìä Fetching revenue data (paid bills)...");const v=(await k.listBills({status:"PAID",limit:1e3,sortBy:"created_at",sortOrder:"DESC"}))?.data?.data||{},f=v?.bills||v?.items||v||[];if(console.log("üí∞ Revenue (paid bills) response:",f),!f||f.length===0){console.log("‚ÑπÔ∏è No paid bills found (no revenue yet)"),s([]),i([]),g(0),t(!1);return}const n={},_={};let S=0;for(const y of f){if(y.status!=="PAID"&&y.status!=="RECEIPT_SENT")continue;const E=parseFloat(y.total_amount||y.amount||0);S+=E;const $=y.property_id||"unknown",l=y.property?.title||y.property?.name||`Propri√©t√© #${$}`;n[$]||(n[$]={name:l,value:0}),n[$].value+=E;const p=y.month||(()=>{const C=new Date(y.paid_at||y.updated_at||y.created_at||new Date),D=String(C.getMonth()+1).padStart(2,"0");return`${C.getFullYear()}-${D}`})();_[p]=(_[p]||0)+E}const R=Object.values(n).map(y=>({name:y.name,value:Number(y.value.toFixed(2))})).sort((y,E)=>E.value-y.value),I=Object.keys(_).sort().slice(-6).map(y=>({name:y,value:Number(_[y].toFixed(2))}));s(R),i(I),g(Number(S.toFixed(2))),console.log("‚úÖ Revenue data processed successfully:",{totalRevenue:S,properties:R.length,months:I.length})}catch(m){console.error("‚ùå Error loading revenue data:",m),s([]),i([]),g(0)}finally{t(!1)}})()},[]),e.jsxs("div",{className:"space-y-4",children:[u>0&&e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenus Totaux"}),e.jsxs("p",{className:"text-2xl font-bold text-green-700",children:["‚Ç¨",u.toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(de,{className:"w-6 h-6 text-green-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Bas√© sur les factures pay√©es uniquement"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Revenus par Propri√©t√©"}),o?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des revenus‚Ä¶"}):a.length>0?e.jsx(fe,{width:"100%",height:260,children:e.jsxs(ye,{children:[e.jsx(be,{data:a,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:c,percent:m})=>`${c.length>15?c.substring(0,15)+"...":c} ${(m*100).toFixed(0)}%`,children:a.map((c,m)=>e.jsx(ve,{fill:Z[m%Z.length]},m))}),e.jsx(je,{formatter:(c,m)=>[`‚Ç¨${Number(c).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,m]}),e.jsx(Ne,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-3",children:e.jsx(ee,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:"Aucun revenu disponible"}),e.jsx("p",{className:"text-xs mt-2",children:"Les revenus appara√Ætront ici une fois les factures pay√©es"})]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Revenus Mensuels (6 derniers mois)"}),o?e.jsx("div",{className:"text-gray-500 py-10 text-center",children:"Chargement des revenus mensuels‚Ä¶"}):r.length>0?e.jsx(fe,{width:"100%",height:260,children:e.jsxs(ye,{children:[e.jsx(be,{data:r,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:c,percent:m})=>`${c} ${(m*100).toFixed(0)}%`,children:r.map((c,m)=>e.jsx(ve,{fill:Z[m%Z.length]},m))}),e.jsx(je,{formatter:(c,m)=>[`‚Ç¨${Number(c).toLocaleString("fr-FR",{minimumFractionDigits:2,maximumFractionDigits:2})}`,m]}),e.jsx(Ne,{})]})}):e.jsxs("div",{className:"text-gray-500 py-10 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full mb-3",children:e.jsx(we,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"font-medium",children:"Aucun revenu mensuel"}),e.jsx("p",{className:"text-xs mt-2",children:"Les revenus mensuels appara√Ætront ici au fil du temps"})]})]})]})]})},nt=()=>{const[o,t]=d.useState("overview"),a=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[s,r]=d.useState(null),[i,u]=d.useState(!1),[g,c]=d.useState(!1),m=d.useCallback(N=>{const{section:P,billId:U,tenantId:F,propertyId:V}=N.detail;t(P),U&&localStorage.setItem("selectedBillId",U.toString()),F&&localStorage.setItem("selectedTenantId",F.toString()),V&&localStorage.setItem("selectedPropertyId",V.toString())},[]),v=d.useCallback(N=>{const{billId:P}=N.detail;localStorage.setItem("openReceiptForBill",P.toString()),t("payments")},[]);d.useEffect(()=>(window.addEventListener("navigate-to-section",m),window.addEventListener("open-receipt",v),()=>{window.removeEventListener("navigate-to-section",m),window.removeEventListener("open-receipt",v)}),[m,v]);const f=()=>{r(null),u(!1)},n=()=>e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(Ze,{})}),_=()=>(console.log("renderTunnetContent called, rendering TunnetSectionFixed"),e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(Xe,{})})),S=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 rounded-lg md:rounded-xl p-4 md:p-6 lg:p-8 text-white overflow-hidden shadow-lg",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 md:w-64 md:h-64 bg-white rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 md:w-64 md:h-64 bg-purple-300 rounded-full blur-3xl"})]}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold mb-2 drop-shadow-lg",children:"Bienvenue dans la Gestion Immobili√®re"}),e.jsx("p",{className:"text-blue-100 text-sm md:text-base lg:text-lg",children:"G√©rez vos propri√©t√©s, locataires et finances efficacement"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-3 lg:gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30",children:e.jsx(X,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30",children:e.jsx(J,{className:"w-8 h-8 text-white"})}),e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-lg rounded-2xl flex items-center justify-center border border-white/30",children:e.jsx(Q,{className:"w-8 h-8 text-white"})})]})]})})]}),e.jsx(Ce,{onError:c}),g&&e.jsx(st,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6 lg:p-8 min-h-[300px] md:min-h-[420px]",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg md:text-xl font-semibold flex items-center",children:[e.jsx(ee,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-blue-600 flex-shrink-0"}),"Aper√ßu des Revenus"]})}),e.jsx(rt,{})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold mb-4 flex items-center",children:[e.jsx(we,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-green-600 flex-shrink-0"}),"Performance des Propri√©t√©s"]}),e.jsx(Se,{})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 md:p-6",children:[e.jsxs("h3",{className:"text-base md:text-lg font-semibold mb-4 flex items-center",children:[e.jsx(W,{className:"w-4 h-4 md:w-5 md:h-5 mr-2 text-purple-600 flex-shrink-0"}),"Activit√© R√©cente"]}),e.jsx(at,{})]}),e.jsxs("div",{className:"bg-white rounded-lg md:rounded-xl shadow-xl border border-gray-100 p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-800 flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 md:w-6 md:h-6 mr-2 md:mr-3 text-orange-500 flex-shrink-0"}),"Actions Rapides"]}),e.jsx("div",{className:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded-full",children:"Gestion Immobili√®re"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsx(q,{icon:X,title:"Ajouter Propri√©t√©",description:"Cr√©er une nouvelle propri√©t√© dans le syst√®me",onClick:()=>t("properties"),color:"blue",delay:100,className:"card-stagger-1"}),e.jsx(q,{icon:J,title:"Ajouter Locataire",description:"Enregistrer un nouveau locataire",onClick:()=>t("tunnet"),color:"green",delay:200,className:"card-stagger-2"}),e.jsx(q,{icon:Q,title:"G√©n√©rer Facture",description:"Cr√©er et envoyer des factures de loyer",onClick:()=>t("payments"),color:"purple",delay:300,className:"card-stagger-3"}),e.jsx(q,{icon:ee,title:"Voir Rapports",description:"Analyser les donn√©es et performances",onClick:()=>t("expense-analytics"),color:"orange",delay:400,className:"card-stagger-4"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx(q,{icon:pe,title:"Param√®tres",description:"Configurer les pr√©f√©rences du syst√®me",onClick:()=>t("settings"),color:"indigo",delay:500,className:"card-stagger-1"}),e.jsx(q,{icon:ze,title:"Exporter Donn√©es",description:"T√©l√©charger les donn√©es en CSV",onClick:De,color:"teal",delay:600,className:"card-stagger-2"}),e.jsx(q,{icon:Ue,title:"Aide & Support",description:"Obtenir de l'aide et des informations",onClick:()=>{alert(`Aide Tableau de Bord:

‚Ä¢ Utilisez les Actions Rapides pour naviguer entre les sections
‚Ä¢ Les Statistiques affichent les donn√©es en temps r√©el de votre base de donn√©es
‚Ä¢ L'Activit√© R√©cente affiche les derni√®res mises √† jour des locataires et factures
‚Ä¢ Les Graphiques montrent les r√©partitions et tendances des d√©penses`)},color:"pink",delay:700,className:"card-stagger-3"})]})]})]}),R=()=>e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(Ye,{})}),I=()=>e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(et,{})}),y=()=>e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(tt,{})}),E=()=>{const N=(()=>{try{return JSON.parse(localStorage.getItem("user")||"null")}catch{return null}})(),[P,U]=d.useState(N?.name||""),[F,V]=d.useState(N?.email||""),[Y,M]=d.useState(!1),[h,j]=d.useState(""),[x,b]=d.useState(""),[A,te]=d.useState(""),[ce,se]=d.useState(""),[H,me]=d.useState(!1),[ae,L]=d.useState(""),[Pe,re]=d.useState(!1),Ee=async()=>{try{M(!0),j("");const w={};P&&P!==N?.name&&(w.name=P),F&&F!==N?.email&&(w.email=F);const O=await z(()=>import("./api-DQwSXtBv.js"),__vite__mapDeps([6,7]));await O.default.updateProfile(w);const ue=(await O.default.me())?.data?.data?.admin;ue&&localStorage.setItem("user",JSON.stringify(ue)),j("Saved"),setTimeout(()=>j(""),3e3)}catch(w){j(w?.response?.data?.error||w?.userMessage||w?.message||"Save failed")}finally{M(!1)}},Ae=async()=>{try{if(me(!0),L(""),!x){L("Le mot de passe actuel est requis");return}if(!A){L("Le nouveau mot de passe est requis");return}if(A.length<6){L("Le nouveau mot de passe doit contenir au moins 6 caract√®res");return}if(A!==ce){L("Les mots de passe ne correspondent pas");return}console.log("üîÑ Appel de l'API changePassword...");const O=await(await z(()=>import("./api-DQwSXtBv.js"),__vite__mapDeps([6,7]))).default.changePassword({currentPassword:x,newPassword:A});if(console.log("üì• R√©ponse de l'API changePassword:",O?.data),O?.data?.success||O?.data?.message)console.log("‚úÖ Changement de mot de passe r√©ussi"),L("‚úÖ Mot de passe chang√© avec succ√®s! Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."),b(""),te(""),se(""),re(!1),setTimeout(()=>{L("")},7e3);else throw console.error("‚ùå R√©ponse invalide du serveur:",O),new Error("R√©ponse invalide du serveur")}catch(w){console.error("Error changing password:",w);const O=w?.response?.data?.error||w?.response?.data?.message||w?.userMessage||w?.message||"√âchec du changement de mot de passe";L(`‚ùå ${O}`),setTimeout(()=>{L("")},5e3)}finally{me(!1)}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Param√®tres"})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Param√®tres du Compte"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"G√©rez vos pr√©f√©rences et param√®tres de compte."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du Profil"}),e.jsx("input",{type:"text",value:P,onChange:w=>U(w.target.value),placeholder:"Entrez votre nom de profil",title:"Nom du profil",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:F,onChange:w=>V(w.target.value),placeholder:"Entrez votre email",title:"Adresse email",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsx("button",{onClick:Ee,disabled:Y,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60",children:Y?"Enregistrement...":"Enregistrer les Modifications"}),h&&e.jsx("div",{className:`text-sm ${h==="Saved"?"text-green-600":"text-red-600"}`,children:h})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Changer le Mot de Passe"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Mettez √† jour votre mot de passe pour s√©curiser votre compte."}),Pe?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mot de Passe Actuel"}),e.jsx("input",{type:"password",value:x,onChange:w=>b(w.target.value),placeholder:"Entrez votre mot de passe actuel",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:H})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nouveau Mot de Passe"}),e.jsx("input",{type:"password",value:A,onChange:w=>te(w.target.value),placeholder:"Entrez votre nouveau mot de passe (min. 6 caract√®res)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:H})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmer le Nouveau Mot de Passe"}),e.jsx("input",{type:"password",value:ce,onChange:w=>se(w.target.value),placeholder:"Confirmez votre nouveau mot de passe",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:H})]}),ae&&e.jsx("div",{className:`text-sm p-3 rounded-lg ${ae.includes("succ√®s")?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"}`,children:ae}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Ae,disabled:H,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:H?"Changement...":"Changer le Mot de Passe"}),e.jsx("button",{onClick:()=>{re(!1),b(""),te(""),se(""),L("")},disabled:H,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 disabled:opacity-60 disabled:cursor-not-allowed transition-colors",children:"Annuler"})]})]}):e.jsx("button",{onClick:()=>re(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Changer le Mot de Passe"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D√©connexion"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"D√©connectez-vous de votre compte."}),e.jsx("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},className:"w-full md:w-auto bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Se d√©connecter"})]})]})},$=()=>e.jsx(E,{}),l=()=>e.jsx(d.Suspense,{fallback:e.jsx(G,{}),children:e.jsx(Qe,{})}),p=()=>{switch(o){case"overview":return S();case"properties":return n();case"tunnet":return _();case"payments":return R();case"expense-analytics":return I();case"expense-analysis":return y();case"settings":return $();case"admin-management":return l();default:return S()}},[C,D]=d.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col md:flex-row",children:[e.jsx("button",{onClick:()=>D(!C),className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md border border-gray-200","aria-label":"Toggle menu",children:e.jsx(xe,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{className:`${C?"translate-x-0":"-translate-x-full"} md:translate-x-0 fixed md:static inset-y-0 left-0 z-40 w-80 bg-white border-r border-gray-200 transition-transform duration-300 ease-in-out md:transition-none`,children:[e.jsxs("div",{className:"p-4 md:p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h1",{className:"text-lg md:text-xl font-semibold text-gray-900",children:"Tableau de Bord"}),e.jsx("button",{onClick:()=>D(!1),className:"md:hidden p-1 text-gray-500 hover:text-gray-700","aria-label":"Close menu",children:e.jsx(oe,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"mt-4 px-2 md:px-4 overflow-y-auto h-[calc(100vh-80px)]",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>t("overview"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="overview"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(xe,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Vue d'ensemble"})]}),e.jsxs("button",{onClick:()=>t("properties"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="properties"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(X,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Propri√©t√©s"})]}),e.jsxs("button",{onClick:()=>t("tunnet"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="tunnet"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(J,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Locataires"})]}),e.jsxs("button",{onClick:()=>t("payments"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="payments"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(Q,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Paiements"})]}),e.jsxs("button",{onClick:()=>t("expense-analytics"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="expense-analytics"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(de,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Analyse des D√©penses"})]}),e.jsxs("button",{onClick:()=>t("expense-analysis"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="expense-analysis"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(ee,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Analyse"})]}),e.jsxs("button",{onClick:()=>t("settings"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="settings"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,children:[e.jsx(pe,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Param√®tres"})]}),a?.role==="SUPER_ADMIN"&&e.jsxs("button",{onClick:()=>t("admin-management"),className:`w-full flex items-center px-3 md:px-4 py-2.5 md:py-3 rounded text-sm md:text-base ${o==="admin-management"?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50"}`,title:"Gestion des Administrateurs",children:[e.jsx(Ie,{className:"w-5 h-5 md:w-6 md:h-6 flex-shrink-0"}),e.jsx("span",{className:"ml-2 md:ml-3",children:"Gestion Administrateurs"})]})]})})]}),C&&e.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>D(!1)}),e.jsxs("div",{className:"flex-1 w-full min-w-0",children:[e.jsx("header",{className:"bg-white border-b border-gray-200 px-3 md:px-6 py-3 md:py-4 sticky top-0 z-20",children:e.jsx("div",{className:"flex items-center justify-end gap-2 md:gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[e.jsx(Je,{}),e.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3 hover:bg-gray-50 p-1.5 md:p-2 rounded-lg transition-colors cursor-pointer","aria-label":"Aller aux Param√®tres",onClick:()=>{t("settings"),D(!1)},children:[e.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-semibold text-xs md:text-sm flex-shrink-0",children:(a?.name||a?.fullName||"U").charAt(0).toUpperCase()}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a?.name||a?.fullName||"Utilisateur"}),e.jsx("div",{className:"text-xs text-gray-500",children:a?.role||"Administrateur"})]})]})]})})}),e.jsx("div",{className:"p-3 md:p-4 lg:p-6 w-full max-w-full overflow-x-hidden",children:p()})]}),i&&s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 md:p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[95vh] md:max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 md:p-6 flex items-center justify-between z-10",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[e.jsx("h2",{className:"text-lg md:text-heading-large truncate",children:s.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:s.rating}),e.jsxs("span",{className:"ml-1 card-subtitle",children:["(",s.reviews," reviews)"]})]}),e.jsxs("div",{className:"flex items-center card-subtitle",children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),s.location]})]})]}),e.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close property details",children:e.jsx(oe,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx("div",{className:"mb-6 md:mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-48 md:h-80 object-cover rounded-lg"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:s.images.slice(1,5).map((N,P)=>e.jsx("img",{src:N,alt:`${s.title} ${P+2}`,className:"w-full h-24 md:h-36 object-cover rounded-lg"},P))})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 md:gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6 md:space-y-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:[s.propertyDetails.propertyType," hosted by ",s.host.name]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.tagColor==="orange"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:s.tag})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 md:gap-6 text-gray-600 mb-4 text-sm md:text-base",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.guests," guests"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.bedrooms," bedrooms"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($e,{className:"w-4 h-4 mr-1"}),e.jsxs("span",{children:[s.bathrooms," bathrooms"]})]})]}),e.jsx("p",{className:"text-gray-700 leading-relaxed",children:s.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:"What this place offers"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:s.amenities.map((N,P)=>{const U=F=>{switch(F.toLowerCase()){case"wifi":return e.jsx(Oe,{className:"w-5 h-5"});case"tv":return e.jsx(Me,{className:"w-5 h-5"});case"parking":return e.jsx(Le,{className:"w-5 h-5"});case"coffee maker":return e.jsx(Fe,{className:"w-5 h-5"});default:return e.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded"})}};return e.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg",children:[U(N),e.jsx("span",{className:"text-gray-700",children:N})]},P)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:"Property Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Property Type"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.propertyType})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Size"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.size})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-in"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.checkIn})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Check-out"}),e.jsx("p",{className:"text-gray-700",children:s.propertyDetails.checkOut})]})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"lg:sticky lg:top-6",children:[e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("img",{src:s.host.avatar,alt:s.host.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900",children:["Hosted by ",s.host.name]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.host.joinDate})]})]})}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"price-large",children:[s.price,"‚Ç¨"]}),e.jsx("span",{className:"text-body-small text-gray-500 ml-1",children:"mois"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ne,{className:"w-4 h-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"ml-1 text-label-large",children:s.rating})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Check-in Date"}),e.jsx("input",{type:"date",placeholder:"Select check-in date",title:"Check-in date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Lease Duration"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Lease duration",children:[e.jsx("option",{children:"3 months"}),e.jsx("option",{children:"6 months"}),e.jsx("option",{children:"12 months"}),e.jsx("option",{children:"Month by month"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label mb-1",children:"Room Type"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 form-input",title:"Room type",children:[e.jsx("option",{children:"Private room"}),e.jsx("option",{children:"Shared room"}),e.jsx("option",{children:"Master room"})]})]}),e.jsx("button",{className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors btn-text",children:"Apply Now"}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Add to favorites",children:e.jsx(Be,{className:"w-5 h-5"})})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Application review required"})})]})]})})]})]})]})})]})},ut=Object.freeze(Object.defineProperty({__proto__:null,default:nt},Symbol.toStringTag,{value:"Module"}));export{ut as D,le as d,Ke as n};
