import{j as e}from"./index-BRkigiy4.js";import{r as g}from"./router-DUq0sin2.js";import v from"./api-DQwSXtBv.js";import{d as k}from"./Dashboard-Dh4ppiET.js";/* empty css                            */import{R as Be,s as Y,Z as Fe,z as xe,e as ee,G as $,D as _e,f as M,I as Ce,a as Oe,H as Ve,b as Ue,d as H,x as $e}from"./icons-ByKMif1I.js";import"./vendor-Bzgz95E1.js";import"./utils-B9HHbEsj.js";import"./charts-DdKZH6bc.js";const Xe=()=>{const[x,w]=g.useState([]),[B,S]=g.useState(null),[F,C]=g.useState(!0),[te,_]=g.useState(null),[Ne,Q]=g.useState(!1),[u,L]=g.useState(null),[b,G]=g.useState(null),[z,ae]=g.useState(null),[se,re]=g.useState(null),[E,q]=g.useState([]),[O,oe]=g.useState(!1),[V,ve]=g.useState({status:"",search:"",page:1,limit:10}),[Me]=g.useState({total:0,page:1,limit:10,totalPages:0}),[N,j]=g.useState(()=>{const t=k.getNewBillDefaults();return{tenant_id:0,property_id:0,amount:0,charges:0,month:t.month,payment_date:"",description:t.description}}),[K,P]=g.useState([]),[U,T]=g.useState([]),[we,ne]=g.useState(!1),[be,le]=g.useState(!1),[Ee,ie]=g.useState(!1),[W,de]=g.useState(!1);g.useEffect(()=>{je()},[V]),g.useEffect(()=>{if(x.length>0){console.log("ðŸ”„ Recalculating stats from bills...");const t=new Date;t.setHours(0,0,0,0);let s=0,r=0,o=0,n=0,l=0,d=0,h=0;x.forEach(m=>{const c=m.total_amount||m.amount||0;s+=c;const a=m.due_date?new Date(m.due_date):null;let i=!1;a&&(a.setHours(0,0,0,0),i=a<t&&m.status!=="PAID"),m.status==="PAID"?(h++,n+=c):m.status==="PENDING"?(r++,l+=c,i&&(o++,d+=c)):(m.status==="OVERDUE"||i)&&(o++,d+=c,r++,l+=c)});const p={totalBills:x.length,totalAmount:s,pendingBills:r,overdueBills:o,statusBreakdown:[{status:"PAID",count:h,total_amount:n},{status:"PENDING",count:r,total_amount:l},{status:"OVERDUE",count:o,total_amount:d}]};S(p),console.log("âœ… Stats updated:",p)}},[x]);const je=async()=>{console.log("ðŸš€ Loading initial data...");try{const t=localStorage.getItem("token");if(!t){console.log("âŒ No token, using mock data"),J();return}(await fetch("http://192.168.1.109:4002/api/bills",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok?(console.log("âœ… Server is available, loading real data"),await A(),await D(),await ce(),await me()):(console.log("âŒ Server not available, using mock data"),J())}catch{console.log("âŒ Server connectivity test failed, using mock data"),J()}},J=()=>{console.log("ðŸ”„ Loading mock data...");const t=[{id:1,tenant_id:1,property_id:1,admin_id:3,amount:1e3,rent_amount:1e3,charges:0,total_amount:1e3,month:"2025-01",bill_date:"2025-01-01",due_date:"2025-01-15",payment_date:void 0,status:"PENDING",description:"Paiement de loyer mensuel",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",tenant:{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890"},property:{id:1,title:"Test Property 1",address:"123 Test Street",city:"Paris"},created_at_fr:"01/01/2025",due_date_fr:"15/01/2025",payment_date_fr:void 0,amount_formatted:"1 000,00 â‚¬",rent_amount_formatted:"1 000,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"1 000,00 â‚¬",is_overdue:!1,days_until_due:14,status_fr:"En attente",priority:"low",tenant_display_name:"Mohamed FaisalPortfolio Faisal",property_display_name:"Test Property 1"},{id:2,tenant_id:2,property_id:2,admin_id:4,amount:1200,rent_amount:1200,charges:0,total_amount:1200,month:"2025-01",bill_date:"2025-01-01",due_date:"2025-01-10",payment_date:"2025-01-05",status:"PAID",description:"Paiement de loyer mensuel",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-05T00:00:00Z",tenant:{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890"},property:{id:2,title:"Test Property 2",address:"456 Test Avenue",city:"Lyon"},created_at_fr:"01/01/2025",due_date_fr:"10/01/2025",payment_date_fr:"05/01/2025",amount_formatted:"1 200,00 â‚¬",rent_amount_formatted:"1 200,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"1 200,00 â‚¬",is_overdue:!1,days_until_due:-5,status_fr:"PayÃ©",priority:"low",tenant_display_name:"Mohamed Faisal",property_display_name:"Test Property 2"},{id:3,tenant_id:3,property_id:3,admin_id:1,amount:800,rent_amount:800,charges:0,total_amount:800,month:"2024-12",bill_date:"2024-12-01",due_date:"2024-12-15",payment_date:void 0,status:"OVERDUE",description:"Paiement de loyer mensuel",created_at:"2024-12-01T00:00:00Z",updated_at:"2024-12-01T00:00:00Z",tenant:{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890"},property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",city:"Marseille"},created_at_fr:"01/12/2024",due_date_fr:"15/12/2024",payment_date_fr:void 0,amount_formatted:"800,00 â‚¬",rent_amount_formatted:"800,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"800,00 â‚¬",is_overdue:!0,days_until_due:-17,status_fr:"En retard",priority:"critical",tenant_display_name:"Locataire Admin 1",property_display_name:"Test Property 3"}],s={totalBills:3,totalAmount:3e3,pendingBills:1,overdueBills:1,statusBreakdown:[{status:"PAID",count:1,total_amount:1200},{status:"PENDING",count:1,total_amount:1e3},{status:"OVERDUE",count:1,total_amount:800}]},r=[{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:3,property_id:1,status:"ACTIVE",rent_amount:1e3,display_name:"Mohamed FaisalPortfolio Faisal (faisal786mf7@gmail.com)",property:{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3},admin:{id:3,name:"Mohamed Faisal",email:"faisal@property.com"}},{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:4,property_id:2,status:"ACTIVE",rent_amount:1200,display_name:"Mohamed Faisal (faisal786mf7@gmail.com)",property:{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200},admin:{id:4,name:"Mohamed Rahim",email:"rahim@property.com"}},{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890",admin_id:1,property_id:3,status:"ACTIVE",rent_amount:800,display_name:"Locataire Admin 1 (locataire.admin1@test.com)",property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800},admin:{id:1,name:"Default Admin",email:"admin@example.com"}}],o=[{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3,admin_id:3,display_name:"Test Property 1 - 123 Test Street"},{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200,admin_id:4,display_name:"Test Property 2 - 456 Test Avenue"},{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800,admin_id:1,display_name:"Test Property 3 - 789 Test Boulevard"}];w(t),S(s),P(r),T(o),C(!1),_(""),console.log("ðŸ“Š Mock data loaded successfully:",{bills:t.length,stats:s,tenants:r.length,properties:o.length})},A=async(t=!1)=>{try{t||C(!0),_(""),console.log("ðŸ” Fetching bills with filters:",V),k.clearCache();const s=localStorage.getItem("token");if(console.log("ðŸ”‘ Token exists:",!!s),!s){console.error("âŒ No authentication token found"),_("Token d'authentification manquant"),w([]);return}const r=await v.listBills(V);if(console.log("ðŸ“¡ Bills API Response:",r.data),r.data?.success&&r.data?.data?.bills){const o=r.data.data.bills;console.log("ðŸ“‹ Raw bills from API:",o.length);const n=o.map(l=>{const d=l.payment_date?new Date(l.payment_date):null,h=l.due_date?new Date(l.due_date):null,p=new Date;p.setHours(0,0,0,0);let m=!1,c=null;return h&&(h.setHours(0,0,0,0),m=h<p,c=Math.ceil((h.getTime()-p.getTime())/(1e3*60*60*24))),{...l,created_at_fr:new Date(l.created_at).toLocaleDateString("fr-FR"),due_date_fr:h?h.toLocaleDateString("fr-FR"):null,payment_date_fr:d?d.toLocaleDateString("fr-FR"):null,amount_formatted:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(l.amount||l.total_amount||0),rent_amount_formatted:l.rent_amount?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(l.rent_amount):null,charges_formatted:l.charges?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(l.charges):null,total_amount_formatted:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(l.total_amount||l.amount||0),is_overdue:m,days_until_due:c||0,status_fr:l.status==="PENDING"?"En attente":l.status==="PAID"?"PayÃ©":l.status==="OVERDUE"?"En retard":l.status==="RECEIPT_SENT"?"ReÃ§u envoyÃ©":l.status,priority:l.status==="PAID"?"low":m?"critical":c!==null&&c<=3?"high":c!==null&&c<=7?"medium":"low",tenant_display_name:l.tenant?.name||l.tenant?.fullName||"Locataire",property_display_name:l.property?.title||l.property?.name||"PropriÃ©tÃ©"}});return console.log("âœ… Bills processed with French formatting:",n.length,"bills"),w(n),n}else return console.log("âŒ Invalid bills response structure:",r.data),w([]),[]}catch(s){console.error("âŒ Error fetching bills:",s),console.log("ðŸ”„ Using mock bills due to API error...");const r=[{id:1,tenant_id:1,property_id:1,admin_id:3,amount:1e3,rent_amount:1e3,charges:0,total_amount:1e3,month:"2025-01",bill_date:"2025-01-01",due_date:"2025-01-15",payment_date:void 0,status:"PENDING",description:"Paiement de loyer mensuel",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-01T00:00:00Z",tenant:{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890"},property:{id:1,title:"Test Property 1",address:"123 Test Street",city:"Paris"},created_at_fr:"01/01/2025",due_date_fr:"15/01/2025",payment_date_fr:void 0,amount_formatted:"1 000,00 â‚¬",rent_amount_formatted:"1 000,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"1 000,00 â‚¬",is_overdue:!1,days_until_due:14,status_fr:"En attente",priority:"low",tenant_display_name:"Mohamed FaisalPortfolio Faisal",property_display_name:"Test Property 1"},{id:2,tenant_id:2,property_id:2,admin_id:4,amount:1200,rent_amount:1200,charges:0,total_amount:1200,month:"2025-01",bill_date:"2025-01-01",due_date:"2025-01-10",payment_date:"2025-01-05",status:"PAID",description:"Paiement de loyer mensuel",created_at:"2025-01-01T00:00:00Z",updated_at:"2025-01-05T00:00:00Z",tenant:{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890"},property:{id:2,title:"Test Property 2",address:"456 Test Avenue",city:"Lyon"},created_at_fr:"01/01/2025",due_date_fr:"10/01/2025",payment_date_fr:"05/01/2025",amount_formatted:"1 200,00 â‚¬",rent_amount_formatted:"1 200,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"1 200,00 â‚¬",is_overdue:!1,days_until_due:-5,status_fr:"PayÃ©",priority:"low",tenant_display_name:"Mohamed Faisal",property_display_name:"Test Property 2"},{id:3,tenant_id:3,property_id:3,admin_id:1,amount:800,rent_amount:800,charges:0,total_amount:800,month:"2024-12",bill_date:"2024-12-01",due_date:"2024-12-15",payment_date:void 0,status:"OVERDUE",description:"Paiement de loyer mensuel",created_at:"2024-12-01T00:00:00Z",updated_at:"2024-12-01T00:00:00Z",tenant:{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890"},property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",city:"Marseille"},created_at_fr:"01/12/2024",due_date_fr:"15/12/2024",payment_date_fr:void 0,amount_formatted:"800,00 â‚¬",rent_amount_formatted:"800,00 â‚¬",charges_formatted:"0,00 â‚¬",total_amount_formatted:"800,00 â‚¬",is_overdue:!0,days_until_due:-17,status_fr:"En retard",priority:"critical",tenant_display_name:"Locataire Admin 1",property_display_name:"Test Property 3"}];return w(r),console.log("ðŸ“Š Mock bills loaded:",r.length,"bills"),_(""),await D(),r}finally{t||C(!1)}},De=async t=>{try{if(!window.confirm("Supprimer cette facture ? Cette action est irrÃ©versible."))return;re(t),_("");const r=await v.deleteBill(t);r?.data?.success?(w(o=>o.filter(n=>n.id!==t)),await D()):_(r?.data?.message||"Ã‰chec de la suppression de la facture")}catch(s){_(s?.userMessage||s?.message||"Erreur lors de la suppression")}finally{re(null)}},D=async()=>{try{k.clearCache();const t=await v.getBillsStats();if(t.data?.success&&t.data?.data){const s=t.data.data;console.log("ðŸ“Š Raw stats from API:",s);const r={totalBills:s.totalBills||s.total||0,totalAmount:s.totalAmount||s.total_amount||0,pendingBills:s.pendingBills||s.pending||0,overdueBills:s.overdueBills||s.overdue||0,statusBreakdown:[{status:"PAID",count:s.paid||0,total_amount:s.paid_amount||0},{status:"PENDING",count:s.pendingBills||s.pending||0,total_amount:s.pending_amount||0},{status:"OVERDUE",count:s.overdueBills||s.overdue||0,total_amount:s.overdue_amount||0}]};S(r),console.log("âœ… Stats loaded from API:",r)}}catch(t){console.error("âŒ Failed to fetch stats from API:",t),console.log("ðŸ”„ Calculating stats from loaded bills...");let s=x.length>0?x:[];if(s.length===0){const o=await A();s=Array.isArray(o)?o:[]}let r;if(s.length>0){const o=new Date;o.setHours(0,0,0,0);let n=0,l=0,d=0,h=0,p=0,m=0;s.forEach(c=>{const a=c.total_amount||c.amount||0;n+=a;const i=c.due_date?new Date(c.due_date):null;let f=!1;i&&(i.setHours(0,0,0,0),f=i<o&&c.status!=="PAID"),c.status==="PAID"?h+=a:c.status==="PENDING"?(l++,p+=a,f&&(d++,m+=a)):(c.status==="OVERDUE"||f)&&(d++,m+=a,l++,p+=a)}),r={totalBills:s.length,totalAmount:n,pendingBills:l,overdueBills:d,statusBreakdown:[{status:"PAID",count:s.filter(c=>c.status==="PAID").length,total_amount:h},{status:"PENDING",count:l,total_amount:p},{status:"OVERDUE",count:d,total_amount:m}]}}else r={totalBills:3,totalAmount:3e3,pendingBills:2,overdueBills:1,statusBreakdown:[{status:"PAID",count:0,total_amount:0},{status:"PENDING",count:2,total_amount:2e3},{status:"OVERDUE",count:1,total_amount:1e3}]};S(r),console.log("ðŸ“Š Stats calculated from bills:",r)}},ce=async()=>{try{if(k.clearCache(),!localStorage.getItem("token")){console.error("âŒ No authentication token found for tenants fetch"),P([]);return}console.log("ðŸ” Fetching tenants from database...");const s=await v.listTenants();console.log("ðŸ” Tenants API Response:",s),console.log("ðŸ” Response status:",s.status),console.log("ðŸ” Response data:",s.data);let r=[];if(s.data?.success&&s.data?.data)r=s.data.data,console.log("ðŸ“‹ Using response.data.data structure");else if(s.data&&Array.isArray(s.data))r=s.data,console.log("ðŸ“‹ Using direct array structure");else if(s.data?.tenants)r=s.data.tenants,console.log("ðŸ“‹ Using response.data.tenants structure");else if(s.data?.results)r=s.data.results,console.log("ðŸ“‹ Using response.data.results structure");else{console.log("âŒ Unknown response structure:",s.data),console.log("âŒ Available keys:",Object.keys(s.data||{})),P([]);return}if(Array.isArray(r)&&r.length>0){console.log("ðŸ“‹ Raw tenants from API:",r.length,"tenants"),console.log("ðŸ“‹ Raw tenants structure:",r);const o=r.map(n=>(console.log("ðŸ”„ Processing tenant:",n),{...n,created_at_fr:n.created_at?new Date(n.created_at).toLocaleDateString("fr-FR"):"N/A",display_name:n.name||n.fullName||(n.firstName&&n.lastName?`${n.firstName} ${n.lastName}`:null)||`Locataire ${n.id}`,property_display_name:n.property?.title||n.property?.name||"PropriÃ©tÃ©"}));P(o),console.log("âœ… Tenants processed with French formatting:",o.length,"tenants"),console.log("ðŸ“ Tenant names for dropdown:",o.map(n=>({id:n.id,name:n.name,fullName:n.fullName,firstName:n.firstName,lastName:n.lastName,display_name:n.display_name})))}else console.log("âŒ No tenants found or invalid data structure"),console.log("âŒ Raw tenants:",r),P([])}catch(t){console.error("âŒ Failed to fetch tenants:",t),console.error("âŒ Error details:",{message:t.message,status:t.response?.status,data:t.response?.data}),P([])}},me=async()=>{try{if(k.clearCache(),!localStorage.getItem("token")){console.error("âŒ No authentication token found for properties fetch"),T([]);return}console.log("ðŸ” Fetching properties from database...");const s=await v.listProperties();console.log("ðŸ” Properties API Response:",s),console.log("ðŸ” Response status:",s.status),console.log("ðŸ” Response data:",s.data);let r=[];if(s.data?.success&&s.data?.data)r=s.data.data,console.log("ðŸ“‹ Using response.data.data structure");else if(s.data&&Array.isArray(s.data))r=s.data,console.log("ðŸ“‹ Using direct array structure");else if(s.data?.properties)r=s.data.properties,console.log("ðŸ“‹ Using response.data.properties structure");else if(s.data?.results)r=s.data.results,console.log("ðŸ“‹ Using response.data.results structure");else{console.log("âŒ Unknown response structure:",s.data),console.log("âŒ Available keys:",Object.keys(s.data||{})),T([]);return}if(Array.isArray(r)&&r.length>0){console.log("ðŸ“‹ Raw properties from API:",r.length,"properties"),console.log("ðŸ“‹ Raw properties structure:",r);const o=r.map(n=>(console.log("ðŸ”„ Processing property:",n),{...n,created_at_fr:n.created_at?new Date(n.created_at).toLocaleDateString("fr-FR"):"N/A",display_name:n.title||n.name||n.propertyName||`PropriÃ©tÃ© ${n.id}`,rent_formatted:n.rent?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n.rent):null}));T(o),console.log("âœ… Properties processed with French formatting:",o.length,"properties"),console.log("ðŸ“ Property titles for dropdown:",o.map(n=>({id:n.id,title:n.title,name:n.name,propertyName:n.propertyName,display_name:n.display_name})))}else console.log("âŒ No properties found or invalid data structure"),console.log("âŒ Raw properties:",r),T([])}catch(t){console.error("âŒ Failed to fetch properties:",t),console.error("âŒ Error details:",{message:t.message,status:t.response?.status,data:t.response?.data}),T([])}},Pe=async()=>{try{console.log("ðŸš€ [SENIOR DEV] Loading data for create bill with advanced diagnostics...");const t=localStorage.getItem("token");if(!t)return console.error("âŒ [SENIOR DEV] No authentication token"),alert("âŒ Vous devez Ãªtre connectÃ© pour crÃ©er une facture"),{tenants:[],properties:[]};try{const a=JSON.parse(atob(t.split(".")[1]));console.log("ðŸ” [SENIOR DEV] Token payload:",a),console.log("ðŸ‘¤ [SENIOR DEV] Admin ID:",a.id),console.log("ðŸ‘¤ [SENIOR DEV] Admin Role:",a.role)}catch{console.warn("âš ï¸ [SENIOR DEV] Could not decode token payload")}const s="http://192.168.1.109:4002/api";console.log("ðŸŒ [SENIOR DEV] API Base URL:",s),console.log("ðŸ§ª [SENIOR DEV] Testing API connectivity...");const r=await fetch(`${s}/tenants`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("ðŸ§ª [SENIOR DEV] Connectivity test status:",r.status),console.log("ðŸ§ª [SENIOR DEV] Connectivity test headers:",Object.fromEntries(r.headers.entries())),!r.ok){const a=await r.text();console.error("âŒ [SENIOR DEV] API connectivity failed:",r.status,a),console.log("ðŸ”„ [SENIOR DEV] Server not available, using mock data...");const i=[{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:3,property_id:1,status:"ACTIVE",rent_amount:1e3,display_name:"Mohamed FaisalPortfolio Faisal (faisal786mf7@gmail.com)",property:{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3},admin:{id:3,name:"Mohamed Faisal",email:"faisal@property.com"}},{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:4,property_id:2,status:"ACTIVE",rent_amount:1200,display_name:"Mohamed Faisal (faisal786mf7@gmail.com)",property:{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200},admin:{id:4,name:"Mohamed Rahim",email:"rahim@property.com"}},{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890",admin_id:1,property_id:3,status:"ACTIVE",rent_amount:800,display_name:"Locataire Admin 1 (locataire.admin1@test.com)",property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800},admin:{id:1,name:"Default Admin",email:"admin@example.com"}}],f=[{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3,admin_id:3,display_name:"Test Property 1 - 123 Test Street"},{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200,admin_id:4,display_name:"Test Property 2 - 456 Test Avenue"},{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800,admin_id:1,display_name:"Test Property 3 - 789 Test Boulevard"}];return console.log("ðŸ“Š [SENIOR DEV] Mock data loaded:",{tenants:i.length,properties:f.length}),{tenants:i,properties:f}}console.log("ðŸ‘¥ [SENIOR DEV] Fetching tenants with detailed diagnostics...");let o,n=`${s}/bills/create-data/tenants`;try{o=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),console.log("ðŸ‘¥ [SENIOR DEV] Bill creation tenants endpoint status:",o.status),o.status===403&&(console.log("ðŸ‘¥ [SENIOR DEV] 403 error, trying fallback endpoint..."),n=`${s}/tenants`,o=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),console.log("ðŸ‘¥ [SENIOR DEV] Fallback tenants endpoint status:",o.status))}catch(a){console.error("ðŸ‘¥ [SENIOR DEV] Error fetching tenants:",a),o={ok:!1,status:500}}console.log("ðŸ‘¥ [SENIOR DEV] Tenants response status:",o.status),console.log("ðŸ‘¥ [SENIOR DEV] Tenants response headers:",o.headers?Object.fromEntries(o.headers.entries()):"No headers");let l=[];if(o.ok&&"json"in o){const a=await o.json();if(console.log("ðŸ‘¥ [SENIOR DEV] Raw tenants response:",a),console.log("ðŸ‘¥ [SENIOR DEV] Tenants data type:",typeof a),console.log("ðŸ‘¥ [SENIOR DEV] Tenants data keys:",Object.keys(a||{})),a.success&&Array.isArray(a.data))l=a.data,console.log("ðŸ‘¥ [SENIOR DEV] Using tenantsData.data structure");else if(Array.isArray(a))l=a,console.log("ðŸ‘¥ [SENIOR DEV] Using direct array structure");else if(a.tenants&&Array.isArray(a.tenants))l=a.tenants,console.log("ðŸ‘¥ [SENIOR DEV] Using tenantsData.tenants structure");else if(a.results&&Array.isArray(a.results))l=a.results,console.log("ðŸ‘¥ [SENIOR DEV] Using tenantsData.results structure");else{console.log("ðŸ‘¥ [SENIOR DEV] Unknown structure, searching for arrays...");for(const[i,f]of Object.entries(a))if(Array.isArray(f)){console.log(`ðŸ‘¥ [SENIOR DEV] Found array in key '${i}' with ${f.length} items`),l=f;break}}console.log("ðŸ‘¥ [SENIOR DEV] Extracted tenants count:",l.length),l.length>0&&console.log("ðŸ‘¥ [SENIOR DEV] Sample tenant:",l[0])}else{const a="text"in o?await o.text():"Unknown error";console.error("âŒ [SENIOR DEV] Failed to fetch tenants:",o.status,a),console.log("ðŸ”„ [SENIOR DEV] Using mock tenants as fallback..."),l=[{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:3,property_id:1,status:"ACTIVE",rent_amount:1e3,display_name:"Mohamed FaisalPortfolio Faisal (faisal786mf7@gmail.com)",property:{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3},admin:{id:3,name:"Mohamed Faisal",email:"faisal@property.com"}},{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:4,property_id:2,status:"ACTIVE",rent_amount:1200,display_name:"Mohamed Faisal (faisal786mf7@gmail.com)",property:{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200},admin:{id:4,name:"Mohamed Rahim",email:"rahim@property.com"}},{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890",admin_id:1,property_id:3,status:"ACTIVE",rent_amount:800,display_name:"Locataire Admin 1 (locataire.admin1@test.com)",property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800},admin:{id:1,name:"Default Admin",email:"admin@example.com"}}]}console.log("ðŸ  [SENIOR DEV] Fetching properties with detailed diagnostics...");let d,h=`${s}/bills/create-data/properties`;try{d=await fetch(h,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),console.log("ðŸ  [SENIOR DEV] Bill creation properties endpoint status:",d.status),d.status===403&&(console.log("ðŸ  [SENIOR DEV] 403 error, trying fallback endpoint..."),h=`${s}/properties`,d=await fetch(h,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}}),console.log("ðŸ  [SENIOR DEV] Fallback properties endpoint status:",d.status))}catch(a){console.error("ðŸ  [SENIOR DEV] Error fetching properties:",a),d={ok:!1,status:500}}console.log("ðŸ  [SENIOR DEV] Properties response status:",d.status),console.log("ðŸ  [SENIOR DEV] Properties response headers:",d.headers?Object.fromEntries(d.headers.entries()):"No headers");let p=[];if(d.ok&&"json"in d){const a=await d.json();if(console.log("ðŸ  [SENIOR DEV] Raw properties response:",a),console.log("ðŸ  [SENIOR DEV] Properties data type:",typeof a),console.log("ðŸ  [SENIOR DEV] Properties data keys:",Object.keys(a||{})),a.success&&Array.isArray(a.data))p=a.data,console.log("ðŸ  [SENIOR DEV] Using propertiesData.data structure");else if(Array.isArray(a))p=a,console.log("ðŸ  [SENIOR DEV] Using direct array structure");else if(a.properties&&Array.isArray(a.properties))p=a.properties,console.log("ðŸ  [SENIOR DEV] Using propertiesData.properties structure");else if(a.results&&Array.isArray(a.results))p=a.results,console.log("ðŸ  [SENIOR DEV] Using propertiesData.results structure");else{console.log("ðŸ  [SENIOR DEV] Unknown structure, searching for arrays...");for(const[i,f]of Object.entries(a))if(Array.isArray(f)){console.log(`ðŸ  [SENIOR DEV] Found array in key '${i}' with ${f.length} items`),p=f;break}}console.log("ðŸ  [SENIOR DEV] Extracted properties count:",p.length),p.length>0&&console.log("ðŸ  [SENIOR DEV] Sample property:",p[0])}else{const a="text"in d?await d.text():"Unknown error";console.error("âŒ [SENIOR DEV] Failed to fetch properties:",d.status,a),console.log("ðŸ”„ [SENIOR DEV] Using mock properties as fallback..."),p=[{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3,admin_id:3,display_name:"Test Property 1 - 123 Test Street"},{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200,admin_id:4,display_name:"Test Property 2 - 456 Test Avenue"},{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800,admin_id:1,display_name:"Test Property 3 - 789 Test Boulevard"}]}const m=l.map((a,i)=>{try{return{id:a.id,name:a.name||a.fullName||`${a.firstName||""} ${a.lastName||""}`.trim()||`Locataire ${a.id}`,email:a.email||"",phone:a.phone||"",display_name:a.name||a.fullName||`${a.firstName||""} ${a.lastName||""}`.trim()||`Locataire ${a.id}`,property_id:a.property_id,admin_id:a.admin_id,status:a.status}}catch(f){return console.error(`âŒ [SENIOR DEV] Error processing tenant ${i}:`,f),{id:a.id||`unknown_${i}`,name:`Locataire ${a.id||i}`,email:"",phone:"",display_name:`Locataire ${a.id||i}`,property_id:a.property_id,admin_id:a.admin_id,status:a.status}}}),c=p.map((a,i)=>{try{return{id:a.id,title:a.title||a.name||a.propertyName||`PropriÃ©tÃ© ${a.id}`,address:a.address||"",rent:a.rent||a.monthly_rent||0,display_name:a.title||a.name||a.propertyName||`PropriÃ©tÃ© ${a.id}`,admin_id:a.admin_id,city:a.city,country:a.country}}catch(f){return console.error(`âŒ [SENIOR DEV] Error processing property ${i}:`,f),{id:a.id||`unknown_${i}`,title:`PropriÃ©tÃ© ${a.id||i}`,address:"",rent:0,display_name:`PropriÃ©tÃ© ${a.id||i}`,admin_id:a.admin_id,city:a.city,country:a.country}}});return console.log("âœ… [SENIOR DEV] Data processing completed:"),console.log("  - Processed tenants:",m.length),console.log("  - Processed properties:",c.length),m.length>0&&console.log("ðŸ‘¥ [SENIOR DEV] Sample processed tenant:",m[0]),c.length>0&&console.log("ðŸ  [SENIOR DEV] Sample processed property:",c[0]),{tenants:m,properties:c}}catch(t){console.error("âŒ [SENIOR DEV] Critical error in loadDataForCreateBill:",t),console.error("âŒ [SENIOR DEV] Error stack:",t.stack),console.log("ðŸ”„ [SENIOR DEV] Using mock data due to critical error...");const s=[{id:1,name:"Mohamed FaisalPortfolio Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:3,property_id:1,status:"ACTIVE",rent_amount:1e3,display_name:"Mohamed FaisalPortfolio Faisal (faisal786mf7@gmail.com)",property:{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3},admin:{id:3,name:"Mohamed Faisal",email:"faisal@property.com"}},{id:2,name:"Mohamed Faisal",email:"faisal786mf7@gmail.com",phone:"+1234567890",admin_id:4,property_id:2,status:"ACTIVE",rent_amount:1200,display_name:"Mohamed Faisal (faisal786mf7@gmail.com)",property:{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200},admin:{id:4,name:"Mohamed Rahim",email:"rahim@property.com"}},{id:3,name:"Locataire Admin 1",email:"locataire.admin1@test.com",phone:"+1234567890",admin_id:1,property_id:3,status:"ACTIVE",rent_amount:800,display_name:"Locataire Admin 1 (locataire.admin1@test.com)",property:{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800},admin:{id:1,name:"Default Admin",email:"admin@example.com"}}],r=[{id:1,title:"Test Property 1",address:"123 Test Street",monthly_rent:1e3,admin_id:3,display_name:"Test Property 1 - 123 Test Street"},{id:2,title:"Test Property 2",address:"456 Test Avenue",monthly_rent:1200,admin_id:4,display_name:"Test Property 2 - 456 Test Avenue"},{id:3,title:"Test Property 3",address:"789 Test Boulevard",monthly_rent:800,admin_id:1,display_name:"Test Property 3 - 789 Test Boulevard"}];return console.log("ðŸ“Š [SENIOR DEV] Mock data loaded due to error:",{tenants:s.length,properties:r.length}),{tenants:s,properties:r}}},I=()=>{if(U.length>0){const t=U[0];return{name:"Hisham",company:"Gestion Locative",address:t.address||"123 Rue de la Paix",city:t.city||"Paris",postalCode:t.postal_code||"75001",country:t.country||"France"}}return{name:"Hisham",company:"Gestion Locative",address:"123 Rue de la Paix",city:"Paris",postalCode:"75001",country:"France"}},X=async t=>{try{ae(t);const s=x.find(y=>y.id===t);let r="";if(s&&s.tenant&&s.tenant.name&&s.month){const Z=s.tenant.name.trim().replace(/\.\./g,"").replace(/[<>:"|?*\x00-\x1f]/g,"").replace(/[^\p{L}\p{N}\s-]/gu,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase().trim();r=`${Z.length>0&&Z.length<=50?Z:"tenant"}-${s.month}.pdf`,console.log("ðŸ“„ Generated fallback filename from bill data:",r)}const o=localStorage.getItem("token");if(!o)throw new Error("Token d'authentification manquant");const l=`http://192.168.1.109:4002/api/bills/${t}/download`;console.log("ðŸ“¥ Downloading PDF from:",l);const d=await fetch(l,{method:"GET",headers:{Authorization:`Bearer ${o}`,Accept:"application/pdf"}});if(!d.ok){const y=await d.text();throw console.error("âŒ Response error:",d.status,y),new Error(`Download failed (${d.status}): ${d.statusText}`)}const h=d.headers.get("content-type");(!h||!h.includes("application/pdf"))&&console.warn("âš ï¸ Unexpected content type:",h);const p=d.headers.get("content-disposition");let m=r||`bill-${t}.pdf`;if(console.log("ðŸ“¥ Content-Disposition header:",p),p){let y=p.match(/filename\s*=\s*"([^"]+)"/i);if(y&&y[1])m=y[1];else if(y=p.match(/filename\*\s*=\s*UTF-8''([^;]+)/i),y&&y[1])try{m=decodeURIComponent(y[1])}catch{console.warn("Failed to decode UTF-8 filename, using fallback")}else y=p.match(/filename\s*=\s*([^;]+)/i),y&&y[1]&&(m=y[1].trim().replace(/^["']|["']$/g,""))}m.toLowerCase().endsWith(".pdf")||(m=m.replace(/\.[^.]*$/,"")+".pdf"),console.log("ðŸ“¥ Final extracted filename:",m);const c=await d.blob();if(c.size===0)throw new Error("Le fichier PDF tÃ©lÃ©chargÃ© est vide");const a=await c.arrayBuffer(),i=new Uint8Array(a);String.fromCharCode(i[0],i[1],i[2],i[3])!=="%PDF"&&console.warn("âš ï¸ Le fichier tÃ©lÃ©chargÃ© ne semble pas Ãªtre un PDF valide");const ye=window.URL.createObjectURL(c),R=document.createElement("a");R.href=ye,R.download=m,R.style.display="none",document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(ye),console.log("âœ… Quittance tÃ©lÃ©chargÃ©e avec succÃ¨s:",m,`(${(c.size/1024).toFixed(1)} KB)`),alert(`âœ… Quittance tÃ©lÃ©chargÃ©e avec succÃ¨s !
Fichier: ${m}
Taille: ${(c.size/1024).toFixed(1)} KB`)}catch(s){console.error("âŒ Erreur de tÃ©lÃ©chargement:",s),alert("âŒ Ã‰chec du tÃ©lÃ©chargement: "+(s.message||"Erreur inconnue"))}finally{ae(null)}},Te=async()=>{if(E.length===0){alert("Veuillez sÃ©lectionner au moins une facture Ã  tÃ©lÃ©charger");return}for(const t of E)await X(t),await new Promise(s=>setTimeout(s,500));q([]),alert(`${E.length} facture(s) tÃ©lÃ©chargÃ©e(s) avec succÃ¨s !`)},Ae=t=>{q(s=>s.includes(t)?s.filter(r=>r!==t):[...s,t])},Se=()=>{E.length===x.length?q([]):q(x.map(t=>t.id))},ue=async t=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir marquer cette facture comme payÃ©e ?"))try{G(t);try{await v.markBillAsPaid(t),await A(),await D(),alert("Facture marquÃ©e comme payÃ©e avec succÃ¨s !")}catch{console.log("ðŸ”„ API error, updating locally..."),w(r=>{const o=r.map(a=>a.id===t?{...a,status:"PAID",payment_date:new Date().toISOString().split("T")[0],payment_date_fr:new Date().toLocaleDateString("fr-FR"),status_fr:"PayÃ©",priority:"low"}:a),n=o.filter(a=>a.status==="PAID"),l=o.filter(a=>a.status==="PENDING"),d=o.filter(a=>a.status==="OVERDUE"),h=o.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),p=n.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),m=l.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),c=d.reduce((a,i)=>a+(i.total_amount||i.amount||0),0);return S({totalBills:o.length,totalAmount:h,pendingBills:l.length,overdueBills:d.length,statusBreakdown:[{status:"PAID",count:n.length,total_amount:p},{status:"PENDING",count:l.length,total_amount:m},{status:"OVERDUE",count:d.length,total_amount:c}]}),o}),alert("Facture marquÃ©e comme payÃ©e localement ! (Serveur non disponible)")}}catch(s){alert(s.userMessage||"Ã‰chec de la mise Ã  jour de la facture")}finally{G(null)}},pe=async t=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir annuler le paiement de cette facture ? Le montant sera soustrait des profits."))try{G(t);try{await v.undoPayment(t),await A(),await D(),alert("Paiement annulÃ© avec succÃ¨s !")}catch{console.log("ðŸ”„ API error, updating locally..."),w(r=>{const o=r.map(a=>a.id===t?{...a,status:"PENDING",payment_date:void 0,payment_date_fr:void 0,status_fr:"En attente",priority:"medium"}:a),n=o.filter(a=>a.status==="PAID"),l=o.filter(a=>a.status==="PENDING"),d=o.filter(a=>a.status==="OVERDUE"),h=o.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),p=n.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),m=l.reduce((a,i)=>a+(i.total_amount||i.amount||0),0),c=d.reduce((a,i)=>a+(i.total_amount||i.amount||0),0);return S({totalBills:o.length,totalAmount:h,pendingBills:l.length,overdueBills:d.length,statusBreakdown:[{status:"PAID",count:n.length,total_amount:p},{status:"PENDING",count:l.length,total_amount:m},{status:"OVERDUE",count:d.length,total_amount:c}]}),o}),alert("Paiement annulÃ© localement ! (Serveur non disponible)")}}catch(s){alert(s.userMessage||"Ã‰chec de l'annulation du paiement")}finally{G(null)}},Ie=async()=>{if(O)return;const t=new Date().toISOString().slice(0,7),r=`Do you want to generate monthly bills for all active tenants for ${new Date().toLocaleString("en-US",{month:"long",year:"numeric"})} (${t})?`;if(window.confirm(r)){oe(!0),_(null);try{console.log("ðŸ”„ Generating bills for all active tenants...");const o=await v.generateBillsForCurrentAdmin(t);if(console.log("âœ… Bills generation response:",o),o.data&&o.data.success){const n=o.data.data||o.data.statistics,l=`âœ… Successfully generated ${n.billsGenerated||0} bill(s)!
â­ï¸ ${n.billsSkipped||0} bill(s) already existed (skipped).
ðŸ“Š Total active tenants: ${n.totalTenants||0}`;alert(l),console.log("ðŸ”„ Refreshing bills and stats..."),await A(),await D(),console.log("âœ… Bills generated and data refreshed successfully!")}else throw new Error(o.data?.message||"Error generating bills")}catch(o){console.error("âŒ Error generating bills:",o);const n=o.response?.data?.message||o.message||"Unknown error occurred while generating bills";_(n),alert("Error generating bills: "+n)}finally{oe(!1)}}},Re=async t=>{t.preventDefault(),de(!0),ne(!0);try{console.log("ðŸ”„ Creating bill with data:",N);const s=await v.createBill({...N,status:"PENDING"});console.log("âœ… Bill creation response:",s),le(!0),await new Promise(h=>setTimeout(h,800)),Q(!1),j({tenant_id:0,property_id:0,amount:0,charges:0,month:new Date().toISOString().slice(0,7),payment_date:"",description:"Monthly rent payment"}),console.log("â³ Waiting for database to update..."),await new Promise(h=>setTimeout(h,1e3)),console.log("ðŸ”„ Refreshing bills and stats..."),await A(),await D(),console.log("âœ… Bill created and data refreshed successfully!");const r=document.createElement("div");r.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg notification-enter z-50";const o=document.createElement("div");o.className="flex items-center gap-2";const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class","w-5 h-5"),n.setAttribute("fill","currentColor"),n.setAttribute("viewBox","0 0 20 20");const l=document.createElementNS("http://www.w3.org/2000/svg","path");l.setAttribute("fill-rule","evenodd"),l.setAttribute("d","M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"),l.setAttribute("clip-rule","evenodd"),n.appendChild(l);const d=document.createElement("span");d.className="font-medium",d.textContent="Facture crÃ©Ã©e avec succÃ¨s !",o.appendChild(n),o.appendChild(d),r.appendChild(o),document.body.appendChild(r),setTimeout(()=>{r.remove()},3e3)}catch(s){console.error("âŒ Error creating bill:",s),ie(!0),setTimeout(()=>{ie(!1)},1e3),alert("Erreur lors de la crÃ©ation de la facture: "+(s.userMessage||s.message||"Erreur inconnue"))}finally{de(!1),ne(!1),le(!1)}},he=(t,s)=>{ve(r=>({...r,[t]:s,page:1}))},ke=async()=>{console.log("ðŸ”„ Manual refresh triggered");try{C(!0),_(null),k.clearCache(),await Promise.all([A(!0),D(),ce(),me()]),console.log("âœ… Manual refresh completed - All data reloaded")}catch(t){console.error("âŒ Error during manual refresh:",t),_("Erreur lors du rafraÃ®chissement des donnÃ©es")}finally{C(!1)}},ge=t=>{switch(t){case"PENDING":return e.jsx(M,{className:"w-4 h-4 text-yellow-500"});case"PAID":return e.jsx(H,{className:"w-4 h-4 text-green-500"});case"OVERDUE":return e.jsx(ee,{className:"w-4 h-4 text-red-500"});case"RECEIPT_SENT":return e.jsx(H,{className:"w-4 h-4 text-blue-500"});default:return e.jsx($,{className:"w-4 h-4 text-gray-500"})}},fe=t=>{switch(t){case"PENDING":return"bg-yellow-100 text-yellow-800";case"PAID":return"bg-green-100 text-green-800";case"OVERDUE":return"bg-red-100 text-red-800";case"RECEIPT_SENT":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return F&&x.length===0?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center content-fade-in",children:[e.jsxs("div",{className:"nav-item-enter-delay-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestion des Paiements"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"GÃ©rer les factures, reÃ§us et paiements"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:ke,disabled:F,className:`bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 flex items-center gap-2 nav-transition nav-hover-lift nav-item-enter-delay-1 smooth-transition hover-lift glow-effect ${F?"opacity-75 cursor-not-allowed":""}`,title:"Actualiser les donnÃ©es",children:[e.jsx(Be,{className:`w-4 h-4 nav-icon-float smooth-transition ${F?"animate-spin":""}`}),F?"Actualisation...":"Actualiser"]}),E.length>0&&e.jsxs("button",{onClick:Te,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2 nav-transition nav-hover-lift nav-item-enter-delay-2",children:[e.jsx(Y,{className:"w-4 h-4 nav-icon-float-delay"}),"TÃ©lÃ©charger (",E.length,")"]}),e.jsxs("button",{onClick:Ie,disabled:O,className:`bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center gap-2 nav-transition nav-hover-lift nav-item-enter-delay-2 smooth-transition hover-lift glow-effect ${O?"opacity-75 cursor-not-allowed":""}`,title:"Generate monthly bills for all active tenants with one click",children:[e.jsx(Fe,{className:`w-4 h-4 nav-icon-float ${O?"animate-spin":""}`}),O?"Generating...":"Generate All Monthly Bills"]}),e.jsxs("button",{onClick:async()=>{console.log("ðŸš€ Opening create bill form...");const{tenants:t,properties:s}=await Pe();P(t),T(s),Q(!0),t.length>0||s.length>0?console.log("âœ… Create bill form opened with data loaded"):console.log("âš ï¸ No data loaded - check console for details")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2 nav-transition nav-hover-lift nav-item-enter-delay-3 smooth-transition hover-lift glow-effect",children:[e.jsx(xe,{className:"w-4 h-4 nav-icon-float"}),"CrÃ©er une Facture"]})]})]}),te&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-600 font-medium",children:te})]}),e.jsx("button",{onClick:()=>_(null),className:"text-red-400 hover:text-red-600",children:e.jsx($,{className:"w-4 h-4"})})]})}),B&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow smooth-transition hover-lift fade-in",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-8 h-8 text-blue-600 smooth-transition"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.totalBills})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow smooth-transition hover-lift fade-in",style:{animationDelay:"0.1s"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(_e,{className:"w-8 h-8 text-green-600 smooth-transition"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",B.totalAmount.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow smooth-transition hover-lift fade-in",style:{animationDelay:"0.2s"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-8 h-8 text-yellow-600 smooth-transition"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.pendingBills})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow smooth-transition hover-lift fade-in",style:{animationDelay:"0.3s"},children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"w-8 h-8 text-red-600 smooth-transition"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:B.overdueBills})]})]})})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow smooth-transition hover-lift fade-in",style:{animationDelay:"0.4s"},children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:V.status,onChange:t=>he("status",t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"PAID",children:"Paid"}),e.jsx("option",{value:"OVERDUE",children:"Overdue"}),e.jsx("option",{value:"RECEIPT_SENT",children:"Receipt Sent"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",placeholder:"Search bills...",value:V.search,onChange:t=>he("search",t.target.value),className:"border border-gray-300 rounded-md px-3 py-2 text-sm w-64"})})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden smooth-transition hover-lift fade-in",style:{animationDelay:"0.5s"},children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:E.length===x.length&&x.length>0,onChange:Se,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"SÃ©lectionner tout"})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Locataire"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PropriÃ©tÃ©"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mois"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date de paiement"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((t,s)=>e.jsxs("tr",{className:"hover:bg-gray-50 smooth-transition hover-lift fade-in",style:{animationDelay:`${s*.1}s`},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"checkbox",checked:E.includes(t.id),onChange:()=>Ae(t.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"SÃ©lectionner pour tÃ©lÃ©chargement"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.tenant.name}),e.jsx("div",{className:"text-sm text-gray-500",children:t.tenant.email})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.property.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.property.city})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["â‚¬",(t.total_amount||t.amount).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.month}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.payment_date?new Date(t.payment_date).toLocaleDateString("fr-FR"):"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(t.status)}`,children:[ge(t.status),e.jsx("span",{className:"ml-1",children:t.status.replace("_"," ")})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>L(t),className:"text-blue-600 hover:text-blue-900 nav-transition nav-hover-scale smooth-transition hover-lift",title:"Voir dÃ©tails",children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>X(t.id),disabled:z===t.id,className:"text-gray-600 hover:text-gray-900 disabled:opacity-50 nav-transition nav-hover-scale smooth-transition hover-lift",title:"TÃ©lÃ©charger la quittance PDF",children:z===t.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600"}):e.jsx(Y,{className:"w-4 h-4"})}),(t.status==="PENDING"||t.status==="OVERDUE")&&e.jsx("button",{onClick:()=>ue(t.id),disabled:b===t.id,className:"text-green-600 hover:text-green-900 disabled:opacity-50 nav-transition nav-hover-scale smooth-transition hover-lift",title:"Marquer comme payÃ©e",children:b===t.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):e.jsx(H,{className:"w-4 h-4"})}),t.status==="PAID"&&e.jsx("button",{onClick:()=>pe(t.id),disabled:b===t.id,className:"text-orange-600 hover:text-orange-900 disabled:opacity-50 nav-transition nav-hover-scale smooth-transition hover-lift",title:"Annuler le paiement",children:b===t.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600"}):e.jsx($,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>De(t.id),disabled:se===t.id,className:"text-red-600 hover:text-red-900 disabled:opacity-50 nav-transition nav-hover-scale smooth-transition hover-lift",title:"Supprimer la facture",children:se===t.id?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):e.jsx($e,{className:"w-4 h-4"})})]})})]},t.id))})]})}),!1]}),Ne&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 fade-in",children:e.jsx("div",{className:`relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white modal-enter ${we?"glow-effect":""} ${Ee?"error-shake":""}`,children:e.jsxs("div",{className:"mt-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New Bill"}),e.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[e.jsxs("div",{className:"slide-in-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tenant"}),e.jsxs("select",{value:N.tenant_id,onChange:t=>j(s=>({...s,tenant_id:parseInt(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:0,children:"SÃ©lectionner un locataire"}),Array.isArray(K)&&K.length>0?K.map(t=>e.jsx("option",{value:t.id,children:t.display_name||t.name||t.fullName||`Locataire ${t.id}`},t.id)):e.jsx("option",{disabled:!0,children:"Aucun locataire disponible"})]})]}),e.jsxs("div",{className:"slide-in-right",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Property"}),e.jsxs("select",{value:N.property_id,onChange:t=>j(s=>({...s,property_id:parseInt(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:0,children:"SÃ©lectionner une propriÃ©tÃ©"}),Array.isArray(U)&&U.length>0?U.map(t=>e.jsx("option",{value:t.id,children:t.display_name||t.title||t.name||`PropriÃ©tÃ© ${t.id}`},t.id)):e.jsx("option",{disabled:!0,children:"Aucune propriÃ©tÃ© disponible"})]})]}),e.jsxs("div",{className:"slide-in-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsx("input",{type:"number",step:"0.01",value:N.amount,onChange:t=>j(s=>({...s,amount:parseFloat(t.target.value)})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"slide-in-right",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Charges Amount"}),e.jsx("input",{type:"number",step:"0.01",value:N.charges||0,onChange:t=>j(s=>({...s,charges:parseFloat(t.target.value)||0})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional"})]}),e.jsxs("div",{className:"slide-in-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Month"}),e.jsx("input",{type:"month",value:N.month,onChange:t=>j(s=>({...s,month:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{className:"slide-in-right",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Date"}),e.jsx("input",{type:"date",value:N.payment_date||"",onChange:t=>j(s=>({...s,payment_date:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Optional"})]}),e.jsxs("div",{className:"slide-in-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:N.description,onChange:t=>j(s=>({...s,description:t.target.value})),className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 smooth-transition hover-lift focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>Q(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 smooth-transition hover-lift",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:W,className:`px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 smooth-transition hover-lift ${W?"opacity-50 cursor-not-allowed":""} ${be?"success-bounce":""}`,children:W?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full loading-spinner"}),e.jsx("span",{children:"CrÃ©ation..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("span",{children:"CrÃ©er la Facture"})]})})]})]})]})})}),u&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 fade-in",children:e.jsx("div",{className:"relative top-10 mx-auto p-0 border w-full max-w-2xl shadow-lg rounded-md bg-white modal-enter",children:e.jsxs("div",{className:"mt-0",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 rounded-t-md",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"QUITTANCE DE LOYER"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"ReÃ§u de paiement de loyer"})]}),e.jsx("button",{onClick:()=>L(null),className:"text-white hover:text-blue-200 transition-colors smooth-transition hover-lift",children:e.jsx($,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 bg-white",children:[e.jsx("div",{className:"border-b border-gray-200 pb-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:I().name}),e.jsx("p",{className:"text-sm text-gray-600",children:I().company}),e.jsx("p",{className:"text-sm text-gray-600",children:I().address}),e.jsxs("p",{className:"text-sm text-gray-600",children:[I().postalCode," ",I().city,", ",I().country]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Locataire"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:u.tenant.name}),e.jsx("p",{className:"text-sm text-gray-600",children:u.tenant.email}),e.jsx("p",{className:"text-sm text-gray-600",children:u.tenant.phone})]})]})}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"DÃ©tails du Bien"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:u.property.title}),e.jsx("p",{className:"text-sm text-gray-600",children:u.property.address}),e.jsx("p",{className:"text-sm text-gray-600",children:u.property.city})]}),e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"DÃ©tail du rÃ¨glement :"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"Loyer :"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¬",(u.rent_amount||u.amount).toFixed(2)," euros"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700",children:"(le cas Ã©chÃ©ant, contribution aux Ã©conomies d'Ã©nergies) :"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¬",(u.charges||0).toFixed(2)," euros"]})]}),e.jsx("div",{className:"border-t border-gray-300 pt-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total :"}),e.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["â‚¬",(u.total_amount||u.amount).toFixed(2)," euros"]})]})})]})})]}),e.jsx("div",{className:"border-b border-gray-200 pb-4 mb-6",children:e.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:"Date du paiement :"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:["le ",u.payment_date?new Date(u.payment_date).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"...... / ...... / 20......"]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"PÃ©riode"}),e.jsx("p",{className:"text-blue-800",children:u.month})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Statut"}),e.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${fe(u.status)}`,children:[ge(u.status),e.jsx("span",{className:"ml-2",children:u.status.replace("_"," ")})]})]})]}),u.description&&e.jsxs("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600",children:u.description})]}),e.jsxs("div",{className:"text-center text-xs text-gray-500 border-t border-gray-200 pt-4",children:[e.jsx("p",{children:"Ce reÃ§u fait foi de paiement du loyer pour la pÃ©riode indiquÃ©e."}),e.jsxs("p",{className:"mt-1",children:["GÃ©nÃ©rÃ© le ",new Date().toLocaleDateString("fr-FR")," Ã  ",new Date().toLocaleTimeString("fr-FR")]})]}),e.jsx("div",{className:"pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[(u.status==="PENDING"||u.status==="OVERDUE")&&e.jsx("button",{onClick:()=>{ue(u.id),L(null)},disabled:b===u.id,className:"flex items-center justify-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors smooth-transition hover-lift",children:b===u.id?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}),"Marquage en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Marquer comme payÃ©e"]})}),u.status==="PAID"&&e.jsx("button",{onClick:()=>{pe(u.id),L(null)},disabled:b===u.id,className:"flex items-center justify-center px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors smooth-transition hover-lift",children:b===u.id?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}),"Annulation en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 mr-2"}),"Annuler le paiement"]})}),e.jsx("button",{onClick:()=>X(u.id),disabled:z===u.id,className:"flex items-center justify-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors smooth-transition hover-lift",children:z===u.id?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"w-4 h-4 mr-2 animate-spin"}),"TÃ©lÃ©chargement en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"ðŸ“„ TÃ©lÃ©charger la Quittance PDF"]})})]})})]})]})})})]})};export{Xe as default};
