import{j as e}from"./index-rAghrxu1.js";import{r as a}from"./router-DUq0sin2.js";import b from"./api-XfUXylTc.js";import{n as A}from"./Dashboard-C2yiMU_o.js";import{X as de,s as fe,I as Q,f as ie,p as be,u as me,H as ye,B as ce,J as je,M as Ne,w as ve}from"./icons-B-WyEUkg.js";/* empty css                            */import"./vendor-Bzgz95E1.js";import"./utils-B9HHbEsj.js";import"./charts-DdKZH6bc.js";const _e=({propertyId:x,onClose:_})=>{const[p,C]=a.useState([]),[I,w]=a.useState(!1),[P,S]=a.useState(!1),[k,d]=a.useState(""),[m,y]=a.useState(null),[j,N]=a.useState([]);a.useEffect(()=>{v()},[x]),a.useEffect(()=>()=>{j.forEach(s=>{s.startsWith("blob:")&&URL.revokeObjectURL(s)})},[j]);const v=async()=>{try{w(!0);const u=((await b.getPropertyPhotos(x)).data?.data?.photos||[]).map(c=>({...c,file_url:A(c.file_url)}));C(u)}catch(s){console.error("Error fetching photos:",s),d(s.userMessage||"Failed to fetch photos")}finally{w(!1)}},E=s=>{const l=s.target.files;if(l&&l.length>0){y(l);const u=[];for(let c=0;c<l.length;c++)u.push(URL.createObjectURL(l[c]));N(u)}},T=async()=>{if(!m||m.length===0){d("Please select at least one photo");return}S(!0),d("");try{const s=new FormData;for(let c=0;c<m.length;c++)s.append("photos",m[c]);console.log("Uploading photos for property:",x),console.log("Files to upload:",m.length);const l=await b.uploadPropertyPhotos(x,s);console.log("Upload response:",l),y(null),N([]),await v();const u=document.getElementById("photo-upload");u&&(u.value=""),d("")}catch(s){console.error("Error uploading photos:",s),console.error("Error details:",s.response?.data),d(s.userMessage||s.message||"Failed to upload photos")}finally{S(!1)}},M=async s=>{if(confirm("Are you sure you want to delete this photo?"))try{await b.deletePropertyPhoto(x,s),await v()}catch(l){console.error("Error deleting photo:",l),d(l.userMessage||"Failed to delete photo")}},D=async s=>{try{await b.setPrimaryPropertyPhoto(x,s),await v()}catch(l){console.error("Error setting primary photo:",l),d(l.userMessage||"Failed to set primary photo")}},F=()=>{y(null),N([]);const s=document.getElementById("photo-upload");s&&(s.value="")},O=s=>s<1024?s+" B":s<1024*1024?(s/1024).toFixed(1)+" KB":(s/(1024*1024)).toFixed(1)+" MB";return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Property Photos"}),e.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Close",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upload New Photos"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsxs("label",{htmlFor:"photo-upload",className:"flex items-center justify-center w-full px-4 py-3 border border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors",children:[e.jsx(fe,{className:"w-5 h-5 mr-2 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Choose Photos (Max 10 files, 10MB each)"}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",multiple:!0,onChange:E,className:"hidden"})]})}),m&&m.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[m.length," file(s) selected"]}),e.jsx("button",{onClick:F,className:"text-sm text-red-600 hover:text-red-800",children:"Clear Selection"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:j.map((s,l)=>e.jsx("div",{className:"relative",children:e.jsx("img",{src:s,alt:`Preview ${l+1}`,className:"w-full h-24 object-cover rounded border border-gray-300"})},l))}),e.jsx("button",{onClick:T,disabled:P,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed",children:P?"Uploading...":"Upload Photos"})]})]})]}),k&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:k}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Uploaded Photos (",p.length,")"]}),I?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading photos..."})]}):p.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Q,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No photos uploaded yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Upload your first photo above"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(s=>e.jsxs("div",{className:"relative border border-gray-200 rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md transition-shadow",children:[s.is_primary&&e.jsxs("div",{className:"absolute top-2 left-2 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs font-semibold flex items-center z-10",children:[e.jsx(ie,{className:"w-3 h-3 mr-1 fill-current"}),"Primary"]}),e.jsx("div",{className:"h-48 bg-gray-100",children:e.jsx("img",{src:A(s.file_url),alt:s.original_filename,className:"w-full h-full object-cover",onError:l=>{console.error("Image load error for:",s.file_url),l.currentTarget.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSIvPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjE4IiBmaWxsPSIjYWFhIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgRXJyb3I8L3RleHQ+PC9zdmc+"},onLoad:()=>{console.log("Image loaded successfully:",s.file_url)}})}),e.jsxs("div",{className:"p-3",children:[e.jsx("p",{className:"text-sm text-gray-900 truncate mb-1",title:s.original_filename,children:s.original_filename}),e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:O(s.file_size)}),e.jsxs("div",{className:"flex items-center gap-2",children:[!s.is_primary&&e.jsxs("button",{onClick:()=>D(s.id),className:"flex-1 flex items-center justify-center px-2 py-1.5 text-xs bg-yellow-50 text-yellow-700 rounded hover:bg-yellow-100 transition-colors",title:"Set as primary photo",children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Set Primary"]}),e.jsx("a",{href:A(s.file_url),target:"_blank",rel:"noopener noreferrer",download:!0,className:"flex items-center justify-center px-2 py-1.5 text-xs bg-blue-50 text-blue-700 rounded hover:bg-blue-100 transition-colors",title:"Download photo",children:e.jsx(be,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>M(s.id),className:"flex items-center justify-center px-2 py-1.5 text-xs bg-red-50 text-red-700 rounded hover:bg-red-100 transition-colors",title:"Delete photo",children:e.jsx(me,{className:"w-3 h-3"})})]})]})]},s.id))})]})]}),e.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50",children:e.jsx("button",{onClick:_,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Close"})})]})})},Ae=()=>{const[x,_]=a.useState([]),[p,C]=a.useState(""),[I,w]=a.useState(""),[P,S]=a.useState(""),[k,d]=a.useState(""),[m,y]=a.useState("APARTMENT"),[j,N]=a.useState(""),[v,E]=a.useState(""),[T,M]=a.useState(""),[D,F]=a.useState(""),[O,s]=a.useState(""),[l,u]=a.useState(""),[c,L]=a.useState(""),[Y,U]=a.useState(""),[ee,te]=a.useState(null),[se,V]=a.useState(null),[re,B]=a.useState(!1),[ae,R]=a.useState(""),[q,W]=a.useState(!1),[le,Z]=a.useState(null),[ue,H]=a.useState(!1),[oe,$]=a.useState(null),G=async()=>{try{if(!localStorage.getItem("token")){console.log("No token found, skipping properties API call"),_([]);return}B(!0),R(""),console.log("üè† Fetching properties with photos...");const n=await b.listProperties();if(console.log("üì° API Response:",n.data),n.data?.success&&n.data?.data?.properties){const r=n.data.data.properties;console.log("üìã Raw properties from API:",r.length);const h=await Promise.all(r.map(async o=>{let i=[];try{const g=await b.getPropertyPhotos(o.id);g.data?.success&&g.data?.data?.photos&&(i=g.data.data.photos.map(f=>({...f,display_url:A(f.file_url),created_at_fr:new Date(f.created_at).toLocaleDateString("fr-FR"),updated_at_fr:f.updated_at?new Date(f.updated_at).toLocaleDateString("fr-FR"):null})))}catch(g){console.warn(`‚ö†Ô∏è Could not fetch photos for property ${o.id}:`,g)}return{...o,photos:i,primary_photo:i.find(g=>g.is_primary)||i[0]||null,display_title:o.title||o.name||"Propri√©t√© sans nom",display_address:`${o.address||""}, ${o.city||""}, ${o.country||""}`.trim(),rent_formatted:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(o.monthly_rent||o.rent||0),photo_count:i.length,has_photos:i.length>0}}));console.log("‚úÖ Properties fetched with photos:",h.length,"properties"),_(h)}else console.log("‚ùå Invalid response structure:",n.data),_([])}catch(t){console.error("‚ùå Failed to fetch properties:",t),R("Erreur lors du chargement des propri√©t√©s"),_([])}finally{B(!1)}};a.useEffect(()=>{G()},[]);const he=()=>{if(!p.trim())return"Title is required";if(p.trim().length<3)return"Title must be at least 3 characters";if(p.trim().length>255)return"Title must be less than 255 characters";if(!I.trim())return"Address is required";if(I.trim().length<5)return"Address must be at least 5 characters";if(!P.trim())return"City is required";if(P.trim().length<2)return"City must be at least 2 characters";if(!k.trim())return"Country is required";if(k.trim().length<2)return"Country must be at least 2 characters";if(!m.trim())return"Property type is required";const t=parseFloat(j);if(j&&(isNaN(t)||t<=0))return"Rent amount must be a positive number";if(t>1e6)return"Rent amount seems unusually high. Please verify.";const n=v.trim();return n&&n.length>2e3?"Description must be less than 2000 characters":null},ge=async t=>{t.preventDefault();const n=he();if(n){R(n);return}B(!0),R("");try{const r=new FormData;r.append("title",p.trim()),r.append("address",I.trim()),r.append("city",P.trim()),r.append("country",k.trim()),r.append("property_type",m);const h=parseFloat(j);!isNaN(h)&&h>0&&r.append("monthly_rent",h.toString());const o=v.trim();o&&r.append("description",o),ee&&r.append("photo",ee);const i=parseInt(T);r.append("number_of_halls",(!isNaN(i)&&i>=0?i:0).toString());const g=parseInt(D);r.append("number_of_kitchens",(!isNaN(g)&&g>=0?g:0).toString());const f=parseInt(O);r.append("number_of_bathrooms",(!isNaN(f)&&f>=0?f:0).toString());const J=parseInt(l);r.append("number_of_parking_spaces",(!isNaN(J)&&J>=0?J:0).toString());const X=parseInt(c);r.append("number_of_rooms",(!isNaN(X)&&X>=0?X:0).toString());const K=parseInt(Y);r.append("number_of_gardens",(!isNaN(K)&&K>=0?K:0).toString());let z;if(q&&le?z=await b.updateProperty(le,r):z=await b.createProperty(r),!z?.data?.success)throw new Error(z?.data?.error||"Failed to save property");C(""),w(""),S(""),d(""),y("APARTMENT"),N(""),E(""),M(""),F(""),s(""),u(""),L(""),U(""),te(null),V(null),W(!1),Z(null),H(!1),await G()}catch(r){console.error("Property submission error:",r),R(r.userMessage||r?.response?.data?.error||"Failed to save property")}finally{B(!1)}},xe=t=>{C(t.title),w(t.address),S(t.city),d(t.country),y(t.property_type),N(t.monthly_rent?.toString()||""),E(t.description||""),M(t.number_of_halls?.toString()||""),F(t.number_of_kitchens?.toString()||""),s(t.number_of_bathrooms?.toString()||""),u(t.number_of_parking_spaces?.toString()||""),L(t.number_of_rooms?.toString()||""),U(t.number_of_gardens?.toString()||""),W(!0),Z(t.id.toString()),H(!0)},ne=()=>{C(""),w(""),S(""),d(""),y("APARTMENT"),N(""),E(""),M(""),F(""),s(""),u(""),L(""),U(""),W(!1),Z(null),H(!1)},pe=async t=>{if(confirm("Delete this property?"))try{await b.deleteProperty(t.toString()),await G()}catch(n){alert(n?.response?.data?.error||"Failed to delete")}};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 fade-in-soft",children:[e.jsxs("div",{className:"slide-in-left",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Propri√©t√©s"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"G√©rer vos propri√©t√©s et leurs photos"})]}),e.jsx("div",{className:"slide-in-right",children:e.jsxs("button",{onClick:()=>H(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-blue-700 smooth-transition hover-lift-strong glow-effect",children:[e.jsx(ye,{className:"w-4 h-4 smooth-transition"}),e.jsx("span",{children:"Ajouter Propri√©t√©"})]})})]}),ue&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 fade-in",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto modal-enter",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:q?"Modifier la Propri√©t√©":"Ajouter une Nouvelle Propri√©t√©"}),e.jsx("button",{onClick:ne,className:"text-gray-400 hover:text-gray-600",title:"Fermer le modal","aria-label":"Fermer le modal",children:e.jsx(de,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:ge,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"slide-in-left",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre *"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 smooth-transition hover-lift",placeholder:"Titre de la Propri√©t√©",value:p,onChange:t=>C(t.target.value),required:!0})]}),e.jsxs("div",{className:"slide-in-right",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse *"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 smooth-transition hover-lift",placeholder:"Adresse de la Propri√©t√©",value:I,onChange:t=>w(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ville *"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ville",value:P,onChange:t=>S(t.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pays *"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Pays",value:k,onChange:t=>d(t.target.value),required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de Propri√©t√© *"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:m,onChange:t=>y(t.target.value),required:!0,"aria-label":"Type de Propri√©t√©",id:"property-type",children:[e.jsx("option",{value:"APARTMENT",children:"Appartement"}),e.jsx("option",{value:"HOUSE",children:"Maison"}),e.jsx("option",{value:"CONDO",children:"Condo"}),e.jsx("option",{value:"STUDIO",children:"Studio"}),e.jsx("option",{value:"OTHER",children:"Autre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loyer Mensuel"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Loyer Mensuel",type:"number",step:"0.01",value:j,onChange:t=>N(t.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Description de la Propri√©t√©",value:v,onChange:t=>E(t.target.value),rows:3})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"D√©tails de la Propri√©t√© (Optionnel)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Halls"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:T,onChange:t=>M(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Cuisines"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:D,onChange:t=>F(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Salles de Bain"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:O,onChange:t=>s(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Places de Parking"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:l,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Chambres"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:c,onChange:t=>L(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de Jardins"}),e.jsx("input",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0",type:"number",min:"0",value:Y,onChange:t=>U(t.target.value)})]})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Image de la Propri√©t√©"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:t=>{const n=t.target.files?.[0]||null;if(te(n||null),n){const r=URL.createObjectURL(n);V(r)}else V(null)}}),se&&e.jsx("img",{src:se,alt:"Aper√ßu",className:"w-24 h-24 object-cover rounded border"})]})]}),ae&&e.jsx("div",{className:"text-red-600",children:ae}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:ne,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",disabled:re,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:re?"Enregistrement...":q?"Mettre √† Jour la Propri√©t√©":"Ajouter Propri√©t√©"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.map((t,n)=>e.jsxs("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden nav-hover-lift nav-item-enter-delay-${Math.min(n+1,7)}`,children:[e.jsxs("div",{className:"h-48 bg-gray-100 flex items-center justify-center relative group",children:[t.primary_photo?e.jsx("img",{src:t.primary_photo.display_url||A(t.primary_photo.file_url||""),alt:t.display_title,crossOrigin:"anonymous",loading:"lazy",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",onError:r=>{console.warn(`‚ùå Failed to load primary image for property ${t.id}:`,{original_url:t.primary_photo?.file_url,display_url:t.primary_photo?.display_url,current_src:r.currentTarget.src,error:"Image failed to load - check CORS/CSP headers"});const h=r.currentTarget;h.style.display="none";const o=h.parentElement;if(o&&!o.querySelector(".placeholder-shown")){const i=document.createElement("div");i.className="placeholder-shown flex items-center justify-center h-full w-full bg-gray-200",i.innerHTML='<svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>',o.appendChild(i)}},onLoad:()=>{console.log(`‚úÖ Primary image loaded successfully for property ${t.id}`)}}):t.photos&&t.photos.length>0?e.jsx("img",{src:t.photos[0]?.display_url||A(t.photos[0]?.file_url||""),alt:t.display_title,crossOrigin:"anonymous",loading:"lazy",className:"w-full h-48 object-cover transition-transform duration-300 group-hover:scale-105",onError:r=>{console.warn(`‚ùå Failed to load first image for property ${t.id}:`,{original_url:t.photos?.[0]?.file_url,display_url:t.photos?.[0]?.display_url,current_src:r.currentTarget.src,error:"Image failed to load - check CORS/CSP headers"});const h=r.currentTarget;h.style.display="none";const o=h.parentElement;if(o&&!o.querySelector(".placeholder-shown")){const i=document.createElement("div");i.className="placeholder-shown flex items-center justify-center h-full w-full bg-gray-200",i.innerHTML='<svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg>',o.appendChild(i)}},onLoad:()=>{console.log(`‚úÖ First image loaded successfully for property ${t.id}`)}}):e.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-200",children:e.jsx(ce,{className:"w-12 h-12 text-gray-400"})}),t.photo_count>0&&e.jsxs("div",{className:"absolute top-2 left-2 bg-black bg-opacity-50 text-white px-2 py-1 rounded-full text-xs flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),t.photo_count]}),t.rent_formatted&&e.jsxs("div",{className:"absolute top-2 right-2 bg-blue-600 text-white px-3 py-1 rounded-full text-sm font-semibold",children:[t.rent_formatted,"/mois"]}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("button",{onClick:()=>$(t.id),className:"bg-white bg-opacity-90 text-gray-700 p-2 rounded-full hover:bg-opacity-100 transition-all duration-200 nav-transition nav-hover-scale",title:"G√©rer les photos",children:e.jsx(Q,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"p-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:t.display_title}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(Ne,{className:"w-4 h-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:t.display_address})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 mb-3",children:[e.jsxs("div",{children:["Halls: ",e.jsx("span",{className:"font-medium",children:t.number_of_halls??0})]}),e.jsxs("div",{children:["Kitchens: ",e.jsx("span",{className:"font-medium",children:t.number_of_kitchens??0})]}),e.jsxs("div",{children:["Bathrooms: ",e.jsx("span",{className:"font-medium",children:t.number_of_bathrooms??0})]}),e.jsxs("div",{children:["Parking: ",e.jsx("span",{className:"font-medium",children:t.number_of_parking_spaces??0})]}),e.jsxs("div",{children:["Rooms: ",e.jsx("span",{className:"font-medium",children:t.number_of_rooms??0})]}),e.jsxs("div",{children:["Gardens: ",e.jsx("span",{className:"font-medium",children:t.number_of_gardens??0})]})]}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[e.jsxs("span",{children:[t.city,", ",t.country]}),e.jsx("span",{className:"mx-2",children:"‚Ä¢"}),e.jsx("span",{className:"capitalize",children:t.property_type.toLowerCase()})]}),(t.number_of_rooms||t.number_of_bathrooms||t.number_of_kitchens||t.number_of_halls||t.number_of_parking_spaces||t.number_of_gardens)&&e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[t.number_of_rooms&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[t.number_of_rooms," chambre",t.number_of_rooms!==1?"s":""]}),t.number_of_bathrooms&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.number_of_bathrooms," salle",t.number_of_bathrooms!==1?"s":""," de bain"]}),t.number_of_kitchens&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[t.number_of_kitchens," cuisine",t.number_of_kitchens!==1?"s":""]}),t.number_of_halls&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[t.number_of_halls," hall",t.number_of_halls!==1?"s":""]}),t.number_of_parking_spaces&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[t.number_of_parking_spaces," place",t.number_of_parking_spaces!==1?"s":""," de parking"]}),t.number_of_gardens&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:[t.number_of_gardens," jardin",t.number_of_gardens!==1?"s":""]})]}),t.description&&e.jsx("p",{className:"text-gray-700 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-100",children:[e.jsxs("button",{onClick:()=>$(t.id),className:"flex items-center text-green-600 hover:text-green-800 text-sm font-medium nav-transition nav-hover-scale",children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),"Photos (",t.photo_count||0,")"]}),e.jsxs("button",{onClick:()=>xe(t),className:"flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium nav-transition nav-hover-scale",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Modifier"]}),e.jsxs("button",{onClick:()=>pe(t.id),className:"flex items-center text-red-600 hover:text-red-800 text-sm font-medium nav-transition nav-hover-scale",children:[e.jsx(me,{className:"w-4 h-4 mr-1"}),"Supprimer"]})]})]})]},t.id)),x.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(ce,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Aucune propri√©t√© pour le moment"}),e.jsx("p",{className:"text-gray-600",children:"Ajoutez votre premi√®re propri√©t√© pour commencer."})]})]}),oe&&e.jsx(_e,{propertyId:oe,onClose:()=>$(null)})]})};export{Ae as default};
