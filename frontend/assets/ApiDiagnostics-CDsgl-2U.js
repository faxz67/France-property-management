import{j as e}from"./index-BRkigiy4.js";import{r as c}from"./router-DUq0sin2.js";import{me as j,listProperties as N,listTenants as w,getBillsStats as y}from"./api-DQwSXtBv.js";import{T as v,G as A,d as I}from"./icons-ByKMif1I.js";import"./vendor-Bzgz95E1.js";import"./utils-B9HHbEsj.js";const E=()=>{const[n,r]=c.useState([]),[m,l]=c.useState(!1),d=async()=>{l(!0),r([]);const s=[{name:"Authentication",test:()=>j()},{name:"Properties API",test:()=>N()},{name:"Tenants API",test:()=>w()},{name:"Bills Stats API",test:()=>y()}];for(const{name:t,test:f}of s){const u=Date.now();r(a=>[...a,{name:t,status:"loading",message:"Testing..."}]);try{await f();const a=Date.now()-u;r(o=>o.map(i=>i.name===t?{name:t,status:"success",message:"OK",duration:a}:i))}catch(a){const o=Date.now()-u;r(i=>i.map(x=>x.name===t?{name:t,status:"error",message:a.message||"Failed",duration:o}:x))}}l(!1)};c.useEffect(()=>(d(),()=>{l(!1),r([])}),[]);const g=s=>{switch(s){case"loading":return e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"});case"success":return e.jsx(I,{className:"w-4 h-4 text-green-600"});case"error":return e.jsx(A,{className:"w-4 h-4 text-red-600"})}},h=s=>{switch(s){case"loading":return"text-blue-600";case"success":return"text-green-600";case"error":return"text-red-600"}},p=n.some(s=>s.status==="error"),b=n.length>0&&n.every(s=>s.status!=="loading");return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[e.jsx(v,{className:"w-5 h-5 mr-2 text-yellow-600"}),"API Diagnostics"]}),e.jsx("button",{onClick:d,disabled:m,className:"flex items-center px-3 py-1 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded text-sm font-medium transition-colors disabled:opacity-50",children:m?"Testing...":"Retest"})]}),e.jsx("div",{className:"space-y-3",children:n.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[g(s.status),e.jsx("span",{className:"ml-3 font-medium",children:s.name})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`text-sm ${h(s.status)}`,children:s.message}),s.duration&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.duration,"ms"]})]})]},t))}),b&&e.jsx("div",{className:"mt-4 p-3 rounded-lg",children:p?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Some API endpoints are not responding correctly."}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"Check your internet connection and ensure the backend server is running."})]}):e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsx("p",{className:"text-green-800 font-medium",children:"All API endpoints are working correctly!"}),e.jsx("p",{className:"text-green-600 text-sm mt-1",children:"Your dashboard should load without issues."})]})})]})};export{E as default};
